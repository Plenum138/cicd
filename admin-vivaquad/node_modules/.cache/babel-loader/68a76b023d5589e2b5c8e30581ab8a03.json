{"ast":null,"code":"import _toConsumableArray from\"/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef,Fragment}from'react';import{Row,Col,Empty,Modal,Card,Typography,InputNumber,Form,Input,Checkbox,Button,Switch,Upload,Dropdown,Menu,Select,notification,Transfer,DatePicker,Avatar,message,Descriptions}from'antd';import{LeftOutlined,LoadingOutlined,EditOutlined,CloseOutlined}from'@ant-design/icons';import{section,semester}from'../../../utils/section';import moment from'moment';import{connect}from'dva';import styles from'./style.less';var Text=Typography.Text;var TextArea=Input.TextArea;var timestemp=new Date().getTime();var RangePicker=DatePicker.RangePicker;var formItemLayout={labelCol:{xs:{span:24},sm:{span:24}}};var dateFormat='YYYY/MM/DD';var AddEditStudent=function AddEditStudent(props){var _detail$schoolDetail,_detail$schoolDetail2,_detail$schoolDetail3;var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var _Form$useForm3=Form.useForm(),_Form$useForm4=_slicedToArray(_Form$useForm3,1),form_class=_Form$useForm4[0];var dispatch=props.dispatch,category=props.category;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),visible=_useState2[0],setVisible=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),detail=_useState4[0],setDetail=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),classDetail=_useState6[0],setclassDetail=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),stream=_useState8[0],setStream=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),year_list=_useState10[0],setYearList=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),class_list=_useState12[0],setClassList=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),itemId=_useState14[0],setItemId=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),imageUrl=_useState16[0],setImageUrl=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),picModel=_useState18[0],setPicModel=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),loading=_useState20[0],setLoading=_useState20[1];var _useState21=useState(''),_useState22=_slicedToArray(_useState21,2),InquiryData=_useState22[0],setInquiryData=_useState22[1];var _useState23=useState(''),_useState24=_slicedToArray(_useState23,2),Inquiry=_useState24[0],setInquiry=_useState24[1];var _useState25=useState(0),_useState26=_slicedToArray(_useState25,2),count=_useState26[0],setCount=_useState26[1];var _useState27=useState(0),_useState28=_slicedToArray(_useState27,2),ecount=_useState28[0],setECount=_useState28[1];var _useState29=useState(0),_useState30=_slicedToArray(_useState29,2),dcount=_useState30[0],setDCount=_useState30[1];var _useState31=useState(false),_useState32=_slicedToArray(_useState31,2),btnDis=_useState32[0],setBtnDis=_useState32[1];var stream_list=classDetail===null||classDetail===void 0?void 0:classDetail.stream_list;useEffect(function(){var unmounted=false;window.scroll(0,0);if(props.match&&props.match.params.id){setItemId(props.match.params.id);DetailFun(props.match.params.id);}else{form.resetFields();setImageUrl('');}return function(){unmounted=true;};},[dispatch]);var DetailFun=function DetailFun(id){props.dispatch({type:'users/getDetail',payload:{_id:id,profile_id:id}});};var onFinish=function onFinish(val){props.dispatch({type:'users/updateMeal',payload:{_id:props.match.params.id,meal:val.meal}});form.setFieldsValue(_defineProperty({},'meal',val.meal));};var onFinishClass=function onFinishClass(val){var _form$setFieldsValue2;val._id=props.match.params.id;props.dispatch({type:'users/updateSection',payload:val});form.setFieldsValue((_form$setFieldsValue2={},_defineProperty(_form$setFieldsValue2,'stream_id',val.stream_id),_defineProperty(_form$setFieldsValue2,'year',val.year),_defineProperty(_form$setFieldsValue2,'class_name',val.class_name),_form$setFieldsValue2));};useEffect(function(){var unmounted=false;// Edit\nvar edit=props.users.edit;if(!unmounted&&edit.count>ecount&&edit.status){setECount(edit.count);setBtnDis(false);setImageUrl('');cancelFun();}else if(!unmounted&&edit.count>ecount&&!edit.status){setBtnDis(false);setECount(edit.count);}// detail\nif(props.match&&props.match.params.id){var _detail=props.users.detail;console.log(\"detail : \",_detail);if(!unmounted&&_detail&&_detail.status){var _form$setFieldsValue3,_form_class$setFields;setDCount(_detail.count);var data=_detail.profile;setclassDetail(_detail);setDetail(_objectSpread(_objectSpread({},data),{},{username:data.username,email:data.email,mobile_number:data.mobile_number,isEmailVerified:data.isEmailVerified,isMobileVerified:data.isMobileVerified,roles:data.roles}));form.setFieldsValue((_form$setFieldsValue3={},_defineProperty(_form$setFieldsValue3,'dob',moment(new Date(data.dob),'YYYY/MM/DD')),_defineProperty(_form$setFieldsValue3,'email',data.email),_defineProperty(_form$setFieldsValue3,'gender',data.gender),_defineProperty(_form$setFieldsValue3,'name',data.name),_defineProperty(_form$setFieldsValue3,'phone',data.phone),_defineProperty(_form$setFieldsValue3,'photo',data.photo),_defineProperty(_form$setFieldsValue3,'meal',data.meal),_form$setFieldsValue3));form_class.setFieldsValue((_form_class$setFields={},_defineProperty(_form_class$setFields,'stream_id',data.stream_id),_defineProperty(_form_class$setFields,'year',data.year),_defineProperty(_form_class$setFields,'class_name',data.class_name),_form_class$setFields));setImageUrl(data.photo);}else if(!unmounted&&_detail&&!_detail.status){setBtnDis(false);setDCount(_detail.count);}}return function(){unmounted=true;};},[props.users]);var cancelFun=function cancelFun(){form.resetFields();setImageUrl('');props.history.push('/students');};var onStreamChange=function onStreamChange(e){form_class.setFieldsValue(_defineProperty({},'year',[]));form_class.setFieldsValue(_defineProperty({},'class_name',[]));var year_list=_toConsumableArray(new Map((classDetail===null||classDetail===void 0?void 0:classDetail.class_list)&&(classDetail===null||classDetail===void 0?void 0:classDetail.class_list.filter(function(item){return item.stream_id===e;}).map(function(item){return[item[\"year\"],item];}))).values());setYearList(year_list);setStream(e);};var onYearChange=function onYearChange(e){form_class.setFieldsValue(_defineProperty({},'class_name',[]));var class_list=_toConsumableArray(new Map((classDetail===null||classDetail===void 0?void 0:classDetail.class_list)&&(classDetail===null||classDetail===void 0?void 0:classDetail.class_list.filter(function(item){return item.year===e&&item.stream_id===stream;}).map(function(item){return[item[\"class_name\"],item];}))).values());console.log('class_list',class_list);setClassList(class_list);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card,{title:/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(LeftOutlined,{onClick:function onClick(){return props.history.push('/students');}}),\" User Details\"),style:{marginTop:\"0\"}},/*#__PURE__*/React.createElement(Row,{gutter:15,className:\"mb-4\"},/*#__PURE__*/React.createElement(Col,{flex:\"auto\"},/*#__PURE__*/React.createElement(Row,{gutter:100},/*#__PURE__*/React.createElement(Col,{sm:12,md:12},/*#__PURE__*/React.createElement(\"h4\",null,/*#__PURE__*/React.createElement(\"span\",{class:\"label label-default\"},\"Profile Image\")),/*#__PURE__*/React.createElement(Avatar,{shape:\"round\",size:160,src:detail.avatar,style:{marginBottom:'2px'}})),/*#__PURE__*/React.createElement(Col,{sm:12,md:12},/*#__PURE__*/React.createElement(\"h4\",null,/*#__PURE__*/React.createElement(\"span\",{class:\"label label-default\"},\"ID Card\")))))),/*#__PURE__*/React.createElement(Descriptions,{size:'middle',bordered:true},/*#__PURE__*/React.createElement(Descriptions.Item,{label:\"Name\"},detail.username),/*#__PURE__*/React.createElement(Descriptions.Item,{label:\"Email\"},detail.email),/*#__PURE__*/React.createElement(Descriptions.Item,{label:\"Is Email Verified\"},detail.isEmailVerified?'true':'false'),/*#__PURE__*/React.createElement(Descriptions.Item,{label:\"Role\"},detail.roles),/*#__PURE__*/React.createElement(Descriptions.Item,{label:\"Profile Created On\"},moment(detail.create).format(dateFormat)),/*#__PURE__*/React.createElement(Descriptions.Item,{label:\"DOB\"},detail.dob),/*#__PURE__*/React.createElement(Descriptions.Item,{label:\"Mobile No\"},detail.mobile_number))),/*#__PURE__*/React.createElement(Card,{title:/*#__PURE__*/React.createElement(\"span\",null,\" Meal Details\"),style:{marginTop:\"30px\"}},/*#__PURE__*/React.createElement(Form,Object.assign({},formItemLayout,{form:form,name:\"loc_info\",layout:\"vertical\",onFinish:onFinish,className:\"innerFields\"}),/*#__PURE__*/React.createElement(Row,{gutter:15},/*#__PURE__*/React.createElement(Col,{flex:\"auto\"},/*#__PURE__*/React.createElement(Row,{gutter:15},/*#__PURE__*/React.createElement(Col,{sm:12,md:12},/*#__PURE__*/React.createElement(Form.Item,{name:\"meal\",label:\"Meal\",rules:[{required:true,message:'This field is required.'},function(_ref){var getFieldValue=_ref.getFieldValue;return{validator:function validator(rule,value){if(!value){return Promise.reject('');}if(value>999){return Promise.reject('meal can not be greater than 999');}return Promise.resolve();}};}]},/*#__PURE__*/React.createElement(InputNumber,{type:'number',placeholder:\"Enter Meal\"})))))),/*#__PURE__*/React.createElement(Form.Item,{className:\"mb-0\"},/*#__PURE__*/React.createElement(Button,{type:\"primary\",disabled:btnDis,className:\"btn-w25 btn-primary-light\",onClick:function onClick(){return form.submit();}},\"Update Meal\")))),/*#__PURE__*/React.createElement(Card,{title:/*#__PURE__*/React.createElement(\"span\",null,\" Class Details\"),style:{marginTop:\"30px\"}},/*#__PURE__*/React.createElement(Form,Object.assign({},formItemLayout,{form:form_class,name:\"loc_info\",layout:\"vertical\",onFinish:onFinishClass,className:\"innerFields\"}),/*#__PURE__*/React.createElement(Row,{gutter:15},/*#__PURE__*/React.createElement(Col,{flex:\"auto\"},/*#__PURE__*/React.createElement(Row,{gutter:15},/*#__PURE__*/React.createElement(Col,{sm:12,md:8},/*#__PURE__*/React.createElement(Form.Item,{name:\"stream_id\",label:\"Stream\",rules:[{required:true,message:'Field required!'}]},/*#__PURE__*/React.createElement(Select,{placeholder:\"Select Stream\",onChange:function onChange(e){return onStreamChange(e);}},stream_list&&stream_list.map(function(item,index){return/*#__PURE__*/React.createElement(Select.Option,{key:index,value:item===null||item===void 0?void 0:item.stream_id},item===null||item===void 0?void 0:item.stream_name);})))),/*#__PURE__*/React.createElement(Col,{sm:12,md:8},/*#__PURE__*/React.createElement(Form.Item,{name:\"year\",label:\"Year\",rules:[{required:true,message:'Field required!'}]},/*#__PURE__*/React.createElement(Select,{placeholder:\"Select Year\",onChange:function onChange(e){return onYearChange(e);}},year_list&&year_list.map(function(item,index){return/*#__PURE__*/React.createElement(Select.Option,{key:index,value:item===null||item===void 0?void 0:item.year},item===null||item===void 0?void 0:item.year);})))),/*#__PURE__*/React.createElement(Col,{sm:12,md:8},/*#__PURE__*/React.createElement(Form.Item,{name:\"class_name\",label:\"Class\",rules:[{required:true,message:'Field required!'}]},/*#__PURE__*/React.createElement(Select,{placeholder:\"Select Class\"},class_list&&class_list.map(function(item,index){return/*#__PURE__*/React.createElement(Select.Option,{key:index,value:item===null||item===void 0?void 0:item.class_name},item===null||item===void 0?void 0:item.class_name);}))))))),/*#__PURE__*/React.createElement(Form.Item,{className:\"mb-0\"},/*#__PURE__*/React.createElement(Button,{type:\"primary\",disabled:btnDis,className:\"btn-w25 btn-primary-light\",onClick:function onClick(){return form_class.submit();}},\"Update Class\")))),/*#__PURE__*/React.createElement(Card,{title:/*#__PURE__*/React.createElement(\"span\",null,\" School Details\"),style:{marginTop:\"30px\",marginBottom:\"30px\"}},/*#__PURE__*/React.createElement(Descriptions,{size:'middle',bordered:true},/*#__PURE__*/React.createElement(Descriptions.Item,{label:\"School Name\"},(_detail$schoolDetail=detail.schoolDetail)===null||_detail$schoolDetail===void 0?void 0:_detail$schoolDetail.school_name),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Descriptions.Item,{label:\"School Address\"},(_detail$schoolDetail2=detail.schoolDetail)===null||_detail$schoolDetail2===void 0?void 0:_detail$schoolDetail2.address)),/*#__PURE__*/React.createElement(Avatar,{shape:\"square\",size:160,src:(_detail$schoolDetail3=detail.schoolDetail)===null||_detail$schoolDetail3===void 0?void 0:_detail$schoolDetail3.media,style:{marginBottom:'2px'}})));};export default connect(function(_ref2){var users=_ref2.users,global=_ref2.global,loading=_ref2.loading;return{users:users,global:global};})(AddEditStudent);","map":{"version":3,"sources":["/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/src/pages/students/action/addEdit.jsx"],"names":["React","useState","useEffect","useRef","Fragment","Row","Col","Empty","Modal","Card","Typography","InputNumber","Form","Input","Checkbox","Button","Switch","Upload","Dropdown","Menu","Select","notification","Transfer","DatePicker","Avatar","message","Descriptions","LeftOutlined","LoadingOutlined","EditOutlined","CloseOutlined","section","semester","moment","connect","styles","Text","TextArea","timestemp","Date","getTime","RangePicker","formItemLayout","labelCol","xs","span","sm","dateFormat","AddEditStudent","props","useForm","form","form_class","dispatch","category","visible","setVisible","detail","setDetail","classDetail","setclassDetail","stream","setStream","year_list","setYearList","class_list","setClassList","itemId","setItemId","imageUrl","setImageUrl","picModel","setPicModel","loading","setLoading","InquiryData","setInquiryData","Inquiry","setInquiry","count","setCount","ecount","setECount","dcount","setDCount","btnDis","setBtnDis","stream_list","unmounted","window","scroll","match","params","id","DetailFun","resetFields","type","payload","_id","profile_id","onFinish","val","meal","setFieldsValue","onFinishClass","stream_id","year","class_name","edit","users","status","cancelFun","console","log","data","profile","username","email","mobile_number","isEmailVerified","isMobileVerified","roles","dob","gender","name","phone","photo","history","push","onStreamChange","e","Map","filter","item","map","values","onYearChange","marginTop","avatar","marginBottom","create","format","required","getFieldValue","validator","rule","value","Promise","reject","resolve","submit","index","stream_name","schoolDetail","school_name","address","media","global"],"mappings":"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","sourcesContent":["import React, { useState,useEffect,useRef, Fragment} from 'react';\r\nimport {Row, Col, Empty, Modal, Card, Typography, InputNumber,Form,Input, Checkbox,Button,Switch, Upload, Dropdown, Menu, Select, notification, Transfer, DatePicker, Avatar, message, Descriptions } from 'antd';\r\nimport { LeftOutlined, LoadingOutlined, EditOutlined, CloseOutlined} from '@ant-design/icons';\r\nimport {section , semester} from '../../../utils/section'\r\nimport moment from 'moment';\r\nimport { connect } from 'dva';\r\nimport styles from './style.less';\r\n\r\nconst { Text } = Typography;\r\nconst { TextArea } = Input;\r\nconst timestemp = (new Date()).getTime();\r\nconst { RangePicker } = DatePicker;\r\nconst formItemLayout = { labelCol: {xs: { span: 24, },  sm: { span: 24, },}};\r\nconst dateFormat = 'YYYY/MM/DD';\r\n\r\nconst AddEditStudent =props => {\r\n\tconst [form] = Form.useForm();\r\n\tconst [form_class] = Form.useForm();\r\n\r\n\tconst { dispatch, category } = props;\r\n\tconst [visible, setVisible] = useState(false);\r\n\tconst [detail, setDetail] = useState({});\r\n\tconst [classDetail,setclassDetail] = useState([]);\r\n\tconst [stream, setStream] = useState('');\r\n\tconst [year_list,setYearList] = useState([]);\r\n\tconst [class_list,setClassList] = useState([]);\r\n\tconst [itemId, setItemId] = useState()\r\n\tconst [imageUrl, setImageUrl] = useState('');\r\n\tconst [picModel, setPicModel] = useState(false);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [InquiryData, setInquiryData] = useState(''); \r\n\tconst [Inquiry, setInquiry] = useState('');\r\n\tconst [count, setCount] = useState(0)\r\n\tconst [ecount, setECount] = useState(0)\r\n\tconst [dcount, setDCount] = useState(0)\r\n\tconst [btnDis, setBtnDis] = useState(false)\r\n    const stream_list = classDetail?.stream_list\r\nuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\twindow.scroll(0, 0);\r\n\t\tif(props.match && props.match.params.id)\r\n\t\t{\r\n\t\t\tsetItemId(props.match.params.id)\r\n\t\t\tDetailFun(props.match.params.id)\r\n\r\n\t\t}else {\r\n\t\t\tform.resetFields();\r\n\t\t\tsetImageUrl('');\r\n\t\t}\r\n\t\treturn () => { unmounted = true; }\r\n    },[dispatch])\r\n\t\r\n\t\r\n\tconst DetailFun=(id)=>{\r\n\t\tprops.dispatch({type: 'users/getDetail', payload: { _id: id, profile_id: id }});\r\n\t}\r\n\t\r\n\r\n\r\n\tconst onFinish= val=>{\r\n\t\tprops.dispatch({type: 'users/updateMeal', payload: { _id: props.match.params.id, meal  : val.meal  }});\r\n\t\tform.setFieldsValue({\r\n\t\t\t ['meal']: val.meal , \r\n\t\t  });\r\n\r\n\t}\r\n\r\n\r\n\tconst onFinishClass= val=>{\r\n\t\tval._id = props.match.params.id\r\n\t\tprops.dispatch({type: 'users/updateSection', payload:val});\r\n\t\tform.setFieldsValue({\r\n\t\t\t ['stream_id']: val.stream_id , \r\n\t\t\t ['year']: val.year , \r\n\t\t\t ['class_name']: val.class_name , \r\n\r\n\t\t  });\r\n\r\n\t}\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\t// Edit\r\n\t\tlet edit = props.users.edit\r\n\t\tif(!unmounted && edit.count > ecount && edit.status){\r\n\t\t  setECount(edit.count);\r\n\t\t  setBtnDis(false);\r\n\t\t  setImageUrl('');\r\n\t\t  cancelFun();\r\n\t\t}else if(!unmounted && edit.count > ecount && !edit.status){\r\n\t\t  setBtnDis(false);\r\n\t\t  setECount(edit.count);\r\n\t\t}\r\n\r\n\t\t\r\n\t\t\r\n\t\t// detail\r\n\t\tif(props.match && props.match.params.id)\r\n\t\t{\r\n\t\t\t\r\n\t\t\tlet detail = props.users.detail;\r\n\t\t\tconsole.log(\"detail : \", detail);\r\n\t\t\tif(!unmounted &&  detail && detail.status){\r\n\t\t\t  setDCount(detail.count);\r\n\t\t\t  let data = detail.profile;\r\n\t\t\t  setclassDetail(detail)\r\n\r\n\t\t\t\tsetDetail({\r\n\t\t\t\t\t...data,\r\n\t\t\t\t\tusername: data.username,\r\n\t\t\t\t\temail: data.email,\r\n\t\t\t\t\tmobile_number: data.mobile_number,\r\n\t\t\t\t\tisEmailVerified: data.isEmailVerified,\r\n\t\t\t\t\tisMobileVerified: data.isMobileVerified,\r\n\t\t\t\t\troles: data.roles,\r\n\t\t\t\t})\r\n\t\t\t\tform.setFieldsValue({\r\n\t\t\t\t  ['dob']: moment(new Date(data.dob), 'YYYY/MM/DD'),  ['email']: data.email, ['gender']: data.gender, ['name']: data.name, ['phone']: data.phone, ['photo']: data.photo  ,['meal']: data.meal\t});\r\n\t\t\t\t\r\n\t\t\t\t  form_class.setFieldsValue({\r\n\t\t\t\t\t['stream_id']: data.stream_id, \r\n\t\t\t\t\t['year']: data.year, \r\n\t\t\t\t\t['class_name']: data.class_name, \r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\r\n\t\t\t\tsetImageUrl(data.photo);\r\n\t\t\t}else if(!unmounted && detail && !detail.status){\r\n\t\t\t  setBtnDis(false);\r\n\t\t\t  setDCount(detail.count);\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\r\n\t\treturn () => {unmounted = true;\t}\r\n\r\n    },[props.users])\r\n\t\r\n\tconst cancelFun = ()=>{\r\n\t\tform.resetFields();\r\n\t\tsetImageUrl('');\r\n\t\tprops.history.push('/students');\r\n\t}\r\n\r\n\r\n\tconst onStreamChange = (e) => {\r\n\t\tform_class.setFieldsValue({['year']:[], })\r\n\t\tform_class.setFieldsValue({['class_name']:[], })\r\n\t\tconst year_list = [...new Map(classDetail?.class_list && classDetail?.class_list.filter((item) => item.stream_id === e).map((item) => [item[\"year\"], item])).values(),];\r\n\t\tsetYearList(year_list)\r\n\t\tsetStream(e)\r\n\t}\r\n\r\n\tconst onYearChange = (e) => {\r\n\t\tform_class.setFieldsValue({['class_name']:[], })\r\n\t\tconst class_list = [...new Map(classDetail?.class_list && classDetail?.class_list.filter((item) => item.year === e && item.stream_id === stream).map((item) => [item[\"class_name\"], item])).values(),];\r\n\t\tconsole.log('class_list' ,class_list)\r\n\t\tsetClassList(class_list)\r\n\r\n\t}\r\n\t\r\nreturn (\r\n\t<> \r\n\t<Card title={<span><LeftOutlined onClick={()=> props.history.push('/students')}/> User Details</span>} style={{marginTop:\"0\"}}>\r\n\t<Row gutter={15} className='mb-4'>\r\n\t\t\t\t<Col flex=\"auto\">\r\n\t\t\t\t\t\t<Row gutter={100}>\r\n\t\t\t\t\t\t<Col sm={12} md={12}>\r\n\t\t\t\t\t\t<h4><span class=\"label label-default\">Profile Image</span></h4>\r\n\t\t\t\t\t\t<Avatar shape=\"round\" size={160} src={detail.avatar} style={{marginBottom: '2px'}} />\r\n\r\n\t\t\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t\t\t<Col sm={12} md={12}>\r\n\t\t\t\t\t\t\t<h4><span class=\"label label-default\">ID Card</span></h4>\r\n\r\n\r\n\t\t\t\t\t\t\t{/* <Avatar shape=\"square\" size={160} src={detail.id_card} style={{marginBottom: '2px'}} /> */}\r\n\r\n\t\t\t\t\t\t\t</Col>\r\n                           \r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\r\n\r\n\r\n\t\t<Descriptions size={'middle'} bordered>\t\t\t\t\t\r\n          <Descriptions.Item label=\"Name\">{detail.username}</Descriptions.Item>\r\n\t\t  <Descriptions.Item label=\"Email\">{detail.email}</Descriptions.Item>\r\n\t\t  <Descriptions.Item label=\"Is Email Verified\">{detail.isEmailVerified ? 'true' : 'false'}</Descriptions.Item>\r\n\t\t  <Descriptions.Item label=\"Role\">{detail.roles}</Descriptions.Item>\r\n          <Descriptions.Item label=\"Profile Created On\">{moment(detail.create).format(dateFormat)}</Descriptions.Item>\r\n\t\t  <Descriptions.Item label=\"DOB\">{detail.dob}</Descriptions.Item>\r\n\t\t  <Descriptions.Item label=\"Mobile No\">{detail.mobile_number}</Descriptions.Item>\r\n\r\n\r\n\t\t  \r\n        </Descriptions>\r\n\t</Card>\r\n\r\n\t<Card title={<span> Meal Details</span>} style={{marginTop:\"30px\"}}>\r\n\t<Form {...formItemLayout} form={form} name=\"loc_info\" layout=\"vertical\" onFinish={onFinish} className=\"innerFields\">\r\n\r\n\t\t\t\t<Row gutter={15}>\r\n\t\t\t\t<Col flex=\"auto\">\r\n\t\t\t\t\t\t<Row gutter={15}>\r\n\t\t\t\t\t\t<Col sm={12} md={12}>\r\n\t\t\t\t\t\t\t\t<Form.Item name=\"meal\" label=\"Meal\"    rules={[{ required: true, message: 'This field is required.' } ,\r\n\t\t  ({ getFieldValue }) => ({\r\n\t\t\tvalidator(rule, value) {\r\n\t\t\t  if (!value) {\r\n\t\t\t\treturn Promise.reject('');\r\n\t\t\t  }\r\n\t\t\t  if (value > 999) {\r\n\t\t\t\t  return Promise.reject('meal can not be greater than 999');\r\n\t\t\t\t}\r\n\t\t\t\treturn Promise.resolve();\r\n  \r\n\t\t\t},\r\n\t\t  }),\r\n\t\t  \r\n          ]}  >\r\n\t\t\t\t\t\t\t\t<InputNumber type={'number'} placeholder=\"Enter Meal\"\r\n         \r\n           \r\n           \r\n\t\t />\r\n\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</Col>\r\n                           \r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\r\n\t\t\t\t\r\n\t\t\r\n\t\t\t\t<Form.Item className=\"mb-0\">\r\n\t\t\t\t\t\r\n\t\t\t\t<Button type=\"primary\" disabled={btnDis} className=\"btn-w25 btn-primary-light\" onClick={() => form.submit()}>Update Meal</Button>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t</Form>\r\n\t</Card>\r\n\t\r\n\r\n\t<Card title={<span> Class Details</span>} style={{marginTop:\"30px\"}}>\r\n\t<Form {...formItemLayout} form={form_class} name=\"loc_info\" layout=\"vertical\" onFinish={onFinishClass} className=\"innerFields\">\r\n\r\n\t\t\t\t<Row gutter={15}>\r\n\t\t\t\t<Col flex=\"auto\">\r\n\t\t\t\t\t\t<Row gutter={15}>\r\n\t\t\t\t\t\t<Col sm={12} md={8}>\r\n\t\t\t\t\t\t<Form.Item name=\"stream_id\" label=\"Stream\"  rules={[{ required: true, message: 'Field required!' },]} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Select placeholder=\"Select Stream\" onChange={(e) => onStreamChange(e)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{stream_list && stream_list.map((item, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn <Select.Option key={index} value={item?.stream_id}>{item?.stream_name}</Select.Option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Select>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t\t\t<Col sm={12} md={8}>\r\n\t\t\t\t\t\t\t<Form.Item name=\"year\" label=\"Year\"   rules={[{ required: true, message: 'Field required!' },]} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Select placeholder=\"Select Year\" onChange={(e) => onYearChange(e)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{year_list && year_list.map((item, index) => <Select.Option key={index} value={item?.year}>{item?.year}</Select.Option>)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t\t\t<Col sm={12} md={8}>\r\n\t\t\t\t\t\t\t<Form.Item name=\"class_name\" label=\"Class\"  rules={[{ required: true, message: 'Field required!' },]}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Select placeholder=\"Select Class\" >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{class_list && class_list.map((item, index) => <Select.Option key={index} value={item?.class_name}>{item?.class_name}</Select.Option>)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</Col>\r\n                           \r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\r\n\t\t\t\t\r\n\t\t\r\n\t\t\t\t<Form.Item className=\"mb-0\">\r\n\t\t\t\t\t\r\n\t\t\t\t<Button type=\"primary\" disabled={btnDis} className=\"btn-w25 btn-primary-light\" onClick={() => form_class.submit()}>Update Class</Button>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t</Form>\r\n\t</Card> \r\n\r\n\t<Card title={<span> School Details</span>} style={{marginTop:\"30px\" ,marginBottom:\"30px\"}}>\r\n     \t\t<Descriptions size={'middle'} bordered>\t\t\t\t\t\t\r\n          <Descriptions.Item label=\"School Name\">{detail.schoolDetail?.school_name}</Descriptions.Item><br />\r\n\t\t  <Descriptions.Item label=\"School Address\">{detail.schoolDetail?.address}</Descriptions.Item>\r\n\r\n\r\n\t\t  \r\n        </Descriptions>\r\n\t <Avatar shape=\"square\" size={160} src={detail.schoolDetail?.media} style={{marginBottom: '2px'}} />\r\n\r\n\t</Card>\r\n\r\n\t\r\n\r\n\t\r\n\t</>\r\n\r\n\t\r\n\r\n)};\r\n\r\nexport default connect(({ users, global, loading }) => ({\r\n  users:users,\r\n  global: global\r\n}))(AddEditStudent);"]},"metadata":{},"sourceType":"module"}