{"ast":null,"code":"import _classCallCheck from\"/Users/kalyansingh/Desktop/Project/cicd/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kalyansingh/Desktop/Project/cicd/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/kalyansingh/Desktop/Project/cicd/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/kalyansingh/Desktop/Project/cicd/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'dva';import{Empty,Card,Typography,Alert,Input,Button,Table,Radio,Divider,Switch,Row,Col,Avatar,Pagination,Tabs,Modal,Popconfirm}from'antd';import{UserOutlined,LockOutlined,DeleteOutlined,ExclamationCircleOutlined}from'@ant-design/icons';import jwt_decode from\"jwt-decode\";import fetch from'dva/fetch';import Moment from'react-moment';import AddEdit from'./action/addEdit';var Search=Input.Search;var Text=Typography.Text;var TabPane=Tabs.TabPane;var baseUrl=process.env.REACT_APP_ApiUrl;var SubjectList=/*#__PURE__*/function(_React$Component){_inherits(SubjectList,_React$Component);var _super=_createSuper(SubjectList);function SubjectList(props){var _this;_classCallCheck(this,SubjectList);_this=_super.call(this,props);_this.ListFun=function(){var user=jwt_decode(localStorage.getItem('token'));if(user.role===\"ADMIN\"){var search='page='+(_this.state.current-1)+\"&limit=\"+_this.state.limit+\"&inactive=\"+_this.state.inactive+\"&searchText=\"+_this.state.searchText+\"&sortBy=\"+_this.state.sortBy;localStorage.setItem('newsSearch',JSON.stringify(_this.state));var searchval={page:_this.state.current-1,limit:_this.state.limit,inactive:_this.state.inactive,searchText:_this.state.searchText,sortBy:_this.state.sortBy};_this.props.dispatch({type:'subjects/subjectAllList',payload:searchval});}else{var _search='page='+(_this.state.current-1)+\"&limit=\"+_this.state.limit+\"&inactive=\"+_this.state.inactive+\"&searchText=\"+_this.state.searchText+\"&sortBy=\"+_this.state.sortBy;localStorage.setItem('newsSearch',JSON.stringify(_this.state));var _searchval={page:_this.state.current-1,limit:_this.state.limit,inactive:_this.state.inactive,searchText:_this.state.searchText,sortBy:_this.state.sortBy,_id:user._id};_this.props.dispatch({type:'subjects/subjectAllList',payload:_searchval});}};_this.ShowSizeChange=function(current,size){return _this.setState({limit:size},function(){return _this.ListFun();});};_this.switchFun=function(val){return _this.setState({inactive:val},function(){return _this.ListFun();});};_this.ChangeOrder=function(val){return _this.setState({sortBy:_this.state.sortBy==='asc'?'desc':'asc'},function(){return _this.ListFun();});};_this.paginationFun=function(val){return _this.setState({current:val.current},function(){return _this.ListFun();});};_this.searchVal=function(val){_this.state.searchText=val;var resultAutos=_this.props.subjects.list.data.filter(function(auto){return auto.subject_name.toLowerCase().includes(val.toLowerCase());});_this.setState({listData:resultAutos});};_this.createCat=function(val){console.log(val);if(val){_this.ListFun();}_this.setState({detail:'',addModel:false});};_this.deleteCat=function(id){_this.props.dispatch({type:'subjects/subjectDelete',payload:{_id:id}});};_this.state={count:0,Addcount:0,limit:25,current:1,searchText:'',loader:false,detail:'',addModel:false,listData:[],data:[],pagination:{current:1,pageSize:10},loading:false,sortBy:'asc',inactive:false};setTimeout(function(){return document.title='Subject List';},100);return _this;}_createClass(SubjectList,[{key:\"componentDidMount\",value:function componentDidMount(){this.ListFun();this.props.dispatch({type:'subjects/clearAction'});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState,snapshot){if(snapshot){this.ListFun();}}},{key:\"getSnapshotBeforeUpdate\",value:function getSnapshotBeforeUpdate(prevProps,prevState){if(this.props.subjects.del&&this.props.subjects.del.count>this.state.count&&this.props.subjects.del.status){this.setState({count:this.props.subjects.del.count});return true;}if(this.props.subjects.add&&this.props.subjects.add.count>this.state.Addcount&&this.props.subjects.add.status){this.setState({Addcount:this.props.subjects.add.count,addModel:false});return true;}return null;}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,loading=_this$state.loading,addModel=_this$state.addModel,detail=_this$state.detail,searchText=_this$state.searchText;var subjects=this.props.subjects;var total=0;var totalActive=0;if(this.state.searchText==''){this.state.listData=subjects.list?subjects.list.data:[];}var productsAvilabilityColumns=[{title:/*#__PURE__*/React.createElement(\"strong\",null,\"Subject Name\"),dataIndex:'subject_name',render:function render(val,data){return data.subject_name?/*#__PURE__*/React.createElement(\"span\",{className:\"text-info cursor-pointer\\t\"},data.subject_name):'-';}},{title:/*#__PURE__*/React.createElement(\"strong\",null,\"Created Date\"),dataIndex:'created_at',render:function render(val,data){return data.created_at?/*#__PURE__*/React.createElement(Moment,{format:\"MM- DD-YYYY\"},data.created_at):'-';}},{title:/*#__PURE__*/React.createElement(\"strong\",null,\"Action\"),width:100,align:'center',render:function render(val,data){return/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(e){return e.stopPropagation();}},/*#__PURE__*/React.createElement(Popconfirm,{title:\"Are you sure delete subjects?\",onConfirm:function onConfirm(e){_this2.deleteCat(data._id);e.stopPropagation();},okText:\"Yes\",cancelText:\"No\"},/*#__PURE__*/React.createElement(Button,{type:\"danger\"},/*#__PURE__*/React.createElement(DeleteOutlined,null))));}}];return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Row,{style:{marginBottom:\"0.625rem\"},className:\"TopActionBar\",gutter:[16,0],justify:\"space-between\",align:\"middle\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Search,{placeholder:\"Search...\",loading:this.props.submitting,onChange:function onChange(e){return _this2.searchVal(e.target.value);},value:searchText})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Button,{type:\"primary\",onClick:function onClick(){return _this2.setState({addModel:true});}},\"Add\"))),/*#__PURE__*/React.createElement(Table,{columns:productsAvilabilityColumns,loading:this.props.loading.global,rowKey:function rowKey(record){return record._id;},dataSource:this.state.listData,onChange:this.paginationFun,onRow:function onRow(record,rowIndex){return{onClick:function onClick(subjects){return _this2.setState({addModel:true,detail:record});}};},pagination:{position:['bottomLeft'],showTotal:function showTotal(total,range){return/*#__PURE__*/React.createElement(Text,{type:\"secondary\"},\"Showing \".concat(range[0],\"-\").concat(range[1],\" of \").concat(total));},showSizeChanger:true,responsive:true,onShowSizeChange:function onShowSizeChange(current,size){return _this2.ShowSizeChange(current,size);},pageSizeOptions:['10','25','50','100','250','500']}})),/*#__PURE__*/React.createElement(AddEdit,{visible:addModel,returnData:this.createCat,closeModel:function closeModel(){return _this2.setState({addModel:false,detail:''});},detail:detail}));}}]);return SubjectList;}(React.Component);;export default connect(function(_ref){var subjects=_ref.subjects,loading=_ref.loading;return{subjects:subjects,loading:loading};})(SubjectList);","map":{"version":3,"sources":["/Users/kalyansingh/Desktop/Project/cicd/admin-vivaquad/src/pages/subject/list.js"],"names":["React","connect","Empty","Card","Typography","Alert","Input","Button","Table","Radio","Divider","Switch","Row","Col","Avatar","Pagination","Tabs","Modal","Popconfirm","UserOutlined","LockOutlined","DeleteOutlined","ExclamationCircleOutlined","jwt_decode","fetch","Moment","AddEdit","Search","Text","TabPane","baseUrl","process","env","REACT_APP_ApiUrl","SubjectList","props","ListFun","user","localStorage","getItem","role","search","state","current","limit","inactive","searchText","sortBy","setItem","JSON","stringify","searchval","page","dispatch","type","payload","_id","ShowSizeChange","size","setState","switchFun","val","ChangeOrder","paginationFun","searchVal","resultAutos","subjects","list","data","filter","auto","subject_name","toLowerCase","includes","listData","createCat","console","log","detail","addModel","deleteCat","id","count","Addcount","loader","pagination","pageSize","loading","setTimeout","document","title","prevProps","prevState","snapshot","del","status","add","total","totalActive","productsAvilabilityColumns","dataIndex","render","created_at","width","align","e","stopPropagation","marginBottom","submitting","target","value","global","record","rowIndex","onClick","position","showTotal","range","showSizeChanger","responsive","onShowSizeChange","pageSizeOptions","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { connect } from 'dva';\r\nimport { Empty, Card, Typography, Alert, Input, Button, Table, Radio, Divider, Switch, Row, Col, Avatar, Pagination, Tabs, Modal, Popconfirm } from 'antd';\r\nimport { UserOutlined, LockOutlined, DeleteOutlined, ExclamationCircleOutlined } from '@ant-design/icons';\r\nimport jwt_decode from \"jwt-decode\";\r\nimport fetch from 'dva/fetch';\r\nimport Moment from 'react-moment';\r\nimport AddEdit from './action/addEdit';\r\n\r\nconst { Search } = Input;\r\nconst { Text } = Typography;\r\nconst { TabPane } = Tabs;\r\nconst baseUrl = process.env.REACT_APP_ApiUrl\r\n\r\nclass SubjectList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { count: 0, Addcount: 0, limit: 25, current: 1, searchText: '', loader: false, detail: '', addModel: false, listData: [], data: [], pagination: { current: 1, pageSize: 10 }, loading: false, sortBy: 'asc', inactive: false }\r\n    setTimeout(() => document.title = 'Subject List', 100);\r\n  }\r\n  componentDidMount() {\r\n    this.ListFun();\r\n    this.props.dispatch({ type: 'subjects/clearAction' });\r\n  }\r\n\r\n  ListFun = () => {\r\n    const user = jwt_decode(localStorage.getItem('token'));\r\nif (user.role === \"ADMIN\") {\r\n  let search = 'page=' + (this.state.current - 1) + \"&limit=\" + this.state.limit + \"&inactive=\" + this.state.inactive + \"&searchText=\" + this.state.searchText + \"&sortBy=\" + this.state.sortBy;\r\n  localStorage.setItem('newsSearch', JSON.stringify(this.state));\r\n  let searchval = { page: this.state.current - 1, limit: this.state.limit, inactive: this.state.inactive, searchText: this.state.searchText, sortBy: this.state.sortBy }\r\n  this.props.dispatch({ type: 'subjects/subjectAllList', payload: searchval, });\r\n} else {\r\n  let search = 'page=' + (this.state.current - 1) + \"&limit=\" + this.state.limit + \"&inactive=\" + this.state.inactive + \"&searchText=\" + this.state.searchText + \"&sortBy=\" + this.state.sortBy;\r\n  localStorage.setItem('newsSearch', JSON.stringify(this.state))\r\n\r\n  let searchval = { page: this.state.current - 1, limit: this.state.limit, inactive: this.state.inactive, searchText: this.state.searchText, sortBy: this.state.sortBy, _id: user._id }\r\n  this.props.dispatch({ type: 'subjects/subjectAllList', payload: searchval, });\r\n}\r\n\r\n}\r\nShowSizeChange = (current, size) => this.setState({ limit: size }, () => this.ListFun());\r\nswitchFun = (val) => this.setState({ inactive: val }, () => this.ListFun());\r\nChangeOrder = (val) => this.setState({ sortBy: this.state.sortBy === 'asc' ? 'desc' : 'asc' }, () => this.ListFun());\r\npaginationFun = (val) => this.setState({ current: val.current }, () => this.ListFun());\r\n\r\n  searchVal = (val) => {\r\n    this.state.searchText = val\r\n    const resultAutos = this.props.subjects.list.data.filter((auto) => auto.subject_name.toLowerCase().includes(val.toLowerCase()))\r\n\r\n    this.setState({ listData: resultAutos })\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n\t\tif (snapshot) {\r\n\t\t\tthis.ListFun()\r\n\t\t}\r\n  }\r\n  \r\n  createCat = (val) => {\r\n\t\tconsole.log(val)\r\n\t\tif (val) { this.ListFun() }\r\n\t\tthis.setState({ detail: '', addModel: false })\r\n  }\r\n  \r\n  deleteCat = id => {\r\n\t\tthis.props.dispatch({ type: 'subjects/subjectDelete', payload: { _id: id }, });\r\n  }\r\n  \r\n  getSnapshotBeforeUpdate(prevProps, prevState) {\r\n\r\n\t\tif (this.props.subjects.del && this.props.subjects.del.count > this.state.count && this.props.subjects.del.status) {\r\n\t\t\tthis.setState({ count: this.props.subjects.del.count })\r\n\t\t\treturn true\r\n\t\t}\r\n\t\tif (this.props.subjects.add && this.props.subjects.add.count > this.state.Addcount && this.props.subjects.add.status) {\r\n\t\t\tthis.setState({ Addcount: this.props.subjects.add.count, addModel: false })\r\n\t\t\treturn true\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n \r\n  render() {\r\n    const {loading, addModel, detail, searchText} = this.state;\r\n    const { subjects } = this.props;\r\n    const total = 0; \r\n    const totalActive = 0;\r\n    if (this.state.searchText == '') {\r\n      this.state.listData = subjects.list ? subjects.list.data : [];\r\n    }\r\n\r\n\r\n\r\n    const productsAvilabilityColumns = [\r\n      {\r\n        title: <strong>Subject Name</strong>,\r\n        dataIndex: 'subject_name',\r\n        render:(val,data) => {\r\n          return (data.subject_name? <span className=\"text-info cursor-pointer\t\" >{data.subject_name}</span>:'-')\r\n        }\r\n      },\r\n      {\r\n        title: <strong>Created Date</strong>,\r\n        dataIndex: 'created_at',  \r\n        render:(val,data) => {\r\n          return (data.created_at? <Moment format=\"MM- DD-YYYY\" >{data.created_at}</Moment>:'-')\r\n        }\r\n      },\r\n      {\r\n        title: <strong>Action</strong>, width: 100, align: 'center',\r\n        render: (val, data) => <div onClick={e => e.stopPropagation()}>\r\n          <Popconfirm title=\"Are you sure delete subjects?\" onConfirm={e => { this.deleteCat(data._id); e.stopPropagation() }} okText=\"Yes\" cancelText=\"No\" >\r\n            <Button type=\"danger\" ><DeleteOutlined /></Button>\r\n          </Popconfirm>\r\n        </div>\r\n      },\r\n    ];\r\n\r\n    return (\r\n      <>\r\n      <Card>\r\n        <Row style={{ marginBottom: \"0.625rem\" }} className=\"TopActionBar\" gutter={[16, 0]} justify=\"space-between\" align=\"middle\">\r\n          <Col>\r\n            <Search placeholder=\"Search...\" loading={this.props.submitting} onChange={(e) => this.searchVal(e.target.value)} value={searchText} />\r\n          </Col>\r\n          <Col>\r\n            <Button type=\"primary\" onClick={() => this.setState({ addModel: true })}>Add</Button>\r\n          </Col>\r\n        </Row>\r\n        <Table\r\n          columns={productsAvilabilityColumns}\r\n          loading={this.props.loading.global}\r\n          rowKey={record => record._id}\r\n          dataSource={this.state.listData}\r\n          onChange={this.paginationFun}\r\n          onRow={(record, rowIndex) => {\r\n            return {\r\n              onClick: subjects => this.setState({ addModel: true, detail: record })\r\n            };\r\n          }}\r\n          pagination={{\r\n\t\t\t\t\t\t\t\tposition: ['bottomLeft'],\r\n\t\t\t\t\t\t\t\tshowTotal: (total, range) => <Text type=\"secondary\">{`Showing ${range[0]}-${range[1]} of ${total}`}</Text>, showSizeChanger: true,\r\n\t\t\t\t\t\t\t\tresponsive: true,\r\n\t\t\t\t\t\t\t\tonShowSizeChange: (current, size) => this.ShowSizeChange(current, size),\r\n\t\t\t\t\t\t\t\tpageSizeOptions: ['10','25', '50', '100', '250', '500'],\r\n\t\t\t\t\t\t\t}}\r\n        />\r\n      </Card>\r\n      <AddEdit visible={addModel} returnData={this.createCat} closeModel={() => this.setState({ addModel: false, detail: '' })} detail={detail} />\r\n      </>\r\n\r\n    );\r\n  }\r\n};\r\n\r\n\r\nexport default connect(({ subjects, loading }) => ({\r\n  subjects, \r\n  loading\r\n}))(SubjectList);\r\n"]},"metadata":{},"sourceType":"module"}