{"ast":null,"code":"import _defineProperty from\"/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef,Fragment}from'react';import{Empty,Modal,Form,Input,Button,Switch,Upload,Dropdown,Menu,Select,notification,Transfer,DatePicker}from'antd';import{connect}from'dva';var formItemLayout={labelCol:{xs:{span:24},sm:{span:24}}};var AddEdit=function AddEdit(props){var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var dispatch=props.dispatch;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),catlist=_useState2[0],setCatlist=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),count=_useState4[0],setCount=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),dcount=_useState6[0],setDCount=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),btnDis=_useState8[0],setBtnDis=_useState8[1];useEffect(function(){var unmounted=false;return function(){unmounted=true;};},[dispatch]);useEffect(function(){var unmounted=false;var data=props.detail;if(props.detail){form.setFieldsValue(_defineProperty({},'plan_price',data.plan_price));}else{form.resetFields();}return function(){unmounted=true;};},[props.visible]);useEffect(function(){var unmounted=false;var plans=props.plans;setCatlist(plans.list?plans.list.data:[]);return function(){unmounted=true;};},[props.plans.list]);var onFinish=function onFinish(val){setBtnDis(true);if(props.detail){val._id=props.detail._id;dispatch({type:'plans/planEdit',payload:val});}else{dispatch({type:'plans/planAdd',payload:val});}};useEffect(function(){var unmounted=false;var add=props.plans.add;if(!unmounted&&add.count>count&&add.status){setBtnDis(false);setCount(add.count);props.returnData('success');}else if(!unmounted&&add.count>count&&!add.status){setBtnDis(false);setCount(add.count);}// Edit\nvar edit=props.plans.edit;if(!unmounted&&edit.count>dcount&&edit.status){setBtnDis(false);setDCount(edit.count);props.returnData('success');}else if(!unmounted&&edit.count>dcount&&!edit.status){setBtnDis(false);setDCount(edit.count);}return function(){unmounted=true;};},[props.plans]);var cancelFun=function cancelFun(){if(!props.detail)form.resetFields();props.closeModel();};return/*#__PURE__*/React.createElement(Modal,{visible:props.visible,title:props.detail?'Edit Plan':'Add Plan',onCancel:cancelFun,footer:/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(Button,{onClick:cancelFun},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{type:\"primary\",disabled:btnDis,className:\"btn-w25 btn-primary-light\",onClick:function onClick(){return form.submit();}},props.detail?'Edit Plan':'Add Plan'))},/*#__PURE__*/React.createElement(Form,Object.assign({},formItemLayout,{form:form,name:\"loc_info\",layout:\"vertical\",onFinish:onFinish,className:\"innerFields\"}),/*#__PURE__*/React.createElement(Form.Item,{name:\"plan_price\",rules:[{required:true,message:'This field is required!'}]},/*#__PURE__*/React.createElement(Input,{type:\"number\",placeholder:\"Enter Price\"}))));};export default connect(function(_ref){var plans=_ref.plans,global=_ref.global,loading=_ref.loading;return{plans:plans,global:global,loading:loading};})(AddEdit);","map":{"version":3,"sources":["/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/src/pages/plan/action/addEdit.jsx"],"names":["React","useState","useEffect","useRef","Fragment","Empty","Modal","Form","Input","Button","Switch","Upload","Dropdown","Menu","Select","notification","Transfer","DatePicker","connect","formItemLayout","labelCol","xs","span","sm","AddEdit","props","useForm","form","dispatch","catlist","setCatlist","count","setCount","dcount","setDCount","btnDis","setBtnDis","unmounted","data","detail","setFieldsValue","plan_price","resetFields","visible","plans","list","onFinish","val","_id","type","payload","add","status","returnData","edit","cancelFun","closeModel","submit","required","message","global","loading"],"mappings":"gYAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAAyBC,SAAzB,CAAmCC,MAAnC,CAA2CC,QAA3C,KAA0D,OAA1D,CACA,OAAQC,KAAR,CAAeC,KAAf,CAAqBC,IAArB,CAA0BC,KAA1B,CAAgCC,MAAhC,CAAuCC,MAAvC,CAA+CC,MAA/C,CAAuDC,QAAvD,CAAiEC,IAAjE,CAAuEC,MAAvE,CAA+EC,YAA/E,CAA6FC,QAA7F,CAAuGC,UAAvG,KAAyH,MAAzH,CAEA,OAASC,OAAT,KAAwB,KAAxB,CAEA,GAAMC,CAAAA,cAAc,CAAG,CAAEC,QAAQ,CAAE,CAACC,EAAE,CAAE,CAAEC,IAAI,CAAE,EAAR,CAAL,CAAqBC,EAAE,CAAE,CAAED,IAAI,CAAE,EAAR,CAAzB,CAAZ,CAAvB,CAEA,GAAME,CAAAA,OAAO,CAAE,QAATA,CAAAA,OAAS,CAAAC,KAAK,CAAI,CACvB,kBAAelB,IAAI,CAACmB,OAAL,EAAf,gDAAOC,IAAP,mBACA,GAAQC,CAAAA,QAAR,CAAoBH,KAApB,CAAQG,QAAR,CACA,cAA8B3B,QAAQ,CAAC,EAAD,CAAtC,wCAAO4B,OAAP,eAAgBC,UAAhB,eACA,eAA0B7B,QAAQ,CAAC,CAAD,CAAlC,yCAAO8B,KAAP,eAAcC,QAAd,eACA,eAA4B/B,QAAQ,CAAC,CAAD,CAApC,yCAAOgC,MAAP,eAAeC,SAAf,eACA,eAA4BjC,QAAQ,CAAC,KAAD,CAApC,yCAAOkC,MAAP,eAAeC,SAAf,eAEAlC,SAAS,CAAC,UAAM,CACf,GAAImC,CAAAA,SAAS,CAAG,KAAhB,CACA,MAAO,WAAM,CAACA,SAAS,CAAG,IAAZ,CAAkB,CAAhC,CACG,CAHK,CAGJ,CAACT,QAAD,CAHI,CAAT,CAMA1B,SAAS,CAAC,UAAM,CACf,GAAImC,CAAAA,SAAS,CAAG,KAAhB,CAEA,GAAIC,CAAAA,IAAI,CAAGb,KAAK,CAACc,MAAjB,CACA,GAAGd,KAAK,CAACc,MAAT,CAAgB,CACfZ,IAAI,CAACa,cAAL,oBACG,YADH,CACkBF,IAAI,CAACG,UADvB,GAEI,CAHL,IAII,CAAEd,IAAI,CAACe,WAAL,GAAqB,CAE3B,MAAO,WAAM,CAACL,SAAS,CAAG,IAAZ,CAAkB,CAAhC,CACG,CAXK,CAWJ,CAACZ,KAAK,CAACkB,OAAP,CAXI,CAAT,CAaAzC,SAAS,CAAC,UAAM,CACf,GAAImC,CAAAA,SAAS,CAAG,KAAhB,CACA,GAAKO,CAAAA,KAAL,CAAcnB,KAAd,CAAKmB,KAAL,CACAd,UAAU,CAACc,KAAK,CAACC,IAAN,CAAaD,KAAK,CAACC,IAAN,CAAWP,IAAxB,CAA6B,EAA9B,CAAV,CACA,MAAO,WAAM,CAACD,SAAS,CAAG,IAAZ,CAAkB,CAAhC,CACG,CALK,CAKJ,CAACZ,KAAK,CAACmB,KAAN,CAAYC,IAAb,CALI,CAAT,CAOA,GAAMC,CAAAA,QAAQ,CAAE,QAAVA,CAAAA,QAAU,CAAAC,GAAG,CAAE,CAIpBX,SAAS,CAAC,IAAD,CAAT,CACA,GAAGX,KAAK,CAACc,MAAT,CAAgB,CACfQ,GAAG,CAACC,GAAJ,CAAUvB,KAAK,CAACc,MAAN,CAAaS,GAAvB,CACApB,QAAQ,CAAC,CAACqB,IAAI,CAAE,gBAAP,CAA0BC,OAAO,CAAEH,GAAnC,CAAD,CAAR,CACA,CAHD,IAII,CAEHnB,QAAQ,CAAC,CAACqB,IAAI,CAAE,eAAP,CAAyBC,OAAO,CAAEH,GAAlC,CAAD,CAAR,CACA,CACD,CAbD,CAeA7C,SAAS,CAAC,UAAM,CACf,GAAImC,CAAAA,SAAS,CAAG,KAAhB,CACA,GAAIc,CAAAA,GAAG,CAAG1B,KAAK,CAACmB,KAAN,CAAYO,GAAtB,CACA,GAAG,CAACd,SAAD,EAAcc,GAAG,CAACpB,KAAJ,CAAYA,KAA1B,EAAmCoB,GAAG,CAACC,MAA1C,CAAiD,CAChDhB,SAAS,CAAC,KAAD,CAAT,CACCJ,QAAQ,CAACmB,GAAG,CAACpB,KAAL,CAAR,CACAN,KAAK,CAAC4B,UAAN,CAAiB,SAAjB,EACD,CAJD,IAIM,IAAG,CAAChB,SAAD,EAAcc,GAAG,CAACpB,KAAJ,CAAYA,KAA1B,EAAmC,CAACoB,GAAG,CAACC,MAA3C,CAAkD,CACtDhB,SAAS,CAAC,KAAD,CAAT,CACAJ,QAAQ,CAACmB,GAAG,CAACpB,KAAL,CAAR,CACD,CAED;AACA,GAAIuB,CAAAA,IAAI,CAAG7B,KAAK,CAACmB,KAAN,CAAYU,IAAvB,CACA,GAAG,CAACjB,SAAD,EAAciB,IAAI,CAACvB,KAAL,CAAaE,MAA3B,EAAqCqB,IAAI,CAACF,MAA7C,CAAoD,CAClDhB,SAAS,CAAC,KAAD,CAAT,CACAF,SAAS,CAACoB,IAAI,CAACvB,KAAN,CAAT,CAEAN,KAAK,CAAC4B,UAAN,CAAiB,SAAjB,EACD,CALD,IAKM,IAAG,CAAChB,SAAD,EAAciB,IAAI,CAACvB,KAAL,CAAaE,MAA3B,EAAqC,CAACqB,IAAI,CAACF,MAA9C,CAAqD,CACzDhB,SAAS,CAAC,KAAD,CAAT,CACAF,SAAS,CAACoB,IAAI,CAACvB,KAAN,CAAT,CACD,CACD,MAAO,WAAM,CACZM,SAAS,CAAG,IAAZ,CACA,CAFD,CAGA,CA1BQ,CA0BP,CAACZ,KAAK,CAACmB,KAAP,CA1BO,CAAT,CA4BA,GAAMW,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAI,CACrB,GAAG,CAAC9B,KAAK,CAACc,MAAV,CACCZ,IAAI,CAACe,WAAL,GACDjB,KAAK,CAAC+B,UAAN,GACA,CAJD,CAOD,mBACC,oBAAC,KAAD,EAAO,OAAO,CAAE/B,KAAK,CAACkB,OAAtB,CAA+B,KAAK,CAAElB,KAAK,CAACc,MAAN,CAAa,WAAb,CAAyB,UAA/D,CAA2E,QAAQ,CAAEgB,SAArF,CAAgG,MAAM,cAAE,oBAAC,QAAD,mBACrG,oBAAC,MAAD,EAAQ,OAAO,CAAEA,SAAjB,WADqG,cAErG,oBAAC,MAAD,EAAQ,IAAI,CAAC,SAAb,CAAuB,QAAQ,CAAEpB,MAAjC,CAAyC,SAAS,CAAC,2BAAnD,CAA+E,OAAO,CAAE,yBAAIR,CAAAA,IAAI,CAAC8B,MAAL,EAAJ,EAAxF,EAA4GhC,KAAK,CAACc,MAAN,CAAa,WAAb,CAAyB,UAArI,CAFqG,CAAxG,eAIC,oBAAC,IAAD,kBAAUpB,cAAV,EAA0B,IAAI,CAAEQ,IAAhC,CAAsC,IAAI,CAAC,UAA3C,CAAsD,MAAM,CAAC,UAA7D,CAAwE,QAAQ,CAAEmB,QAAlF,CAA4F,SAAS,CAAC,aAAtG,gBACC,oBAAC,IAAD,CAAM,IAAN,EAAW,IAAI,CAAC,YAAhB,CAA8B,KAAK,CAAE,CAAC,CAAEY,QAAQ,CAAE,IAAZ,CAAkBC,OAAO,CAAE,yBAA3B,CAAD,CAArC,eACC,oBAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,WAAW,CAAC,aAAjC,EADD,CADD,CAJD,CADD,CAYE,CAhGF,CAkGA,cAAezC,CAAAA,OAAO,CAAC,kBAAG0B,CAAAA,KAAH,MAAGA,KAAH,CAAUgB,MAAV,MAAUA,MAAV,CAAkBC,OAAlB,MAAkBA,OAAlB,OAAiC,CACtDjB,KAAK,CAACA,KADgD,CAEtDgB,MAAM,CAAEA,MAF8C,CAGtDC,OAAO,CAAEA,OAH6C,CAAjC,EAAD,CAAP,CAIXrC,OAJW,CAAf","sourcesContent":["import React, { useState,useEffect,useRef, Fragment} from 'react';\r\nimport {Empty, Modal,Form,Input,Button,Switch, Upload, Dropdown, Menu, Select, notification, Transfer, DatePicker } from 'antd';\r\n\r\nimport { connect } from 'dva';\r\n\r\nconst formItemLayout = { labelCol: {xs: { span: 24, },  sm: { span: 24, },}};\r\n\r\nconst AddEdit =props => {\r\n\tconst [form] = Form.useForm();\r\n\tconst { dispatch} = props;\r\n\tconst [catlist, setCatlist] = useState([])\r\n\tconst [count, setCount] = useState(0)\r\n\tconst [dcount, setDCount] = useState(0)\r\n\tconst [btnDis, setBtnDis] = useState(false)\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\treturn () => {unmounted = true;}\r\n    },[dispatch])\r\n\t\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\r\n\t\tlet data = props.detail;\t\t\r\n\t\tif(props.detail){\r\n\t\t\tform.setFieldsValue({\r\n\t\t\t  ['plan_price']: data.plan_price, \r\n\t\t\t});}\r\n\t\telse{ form.resetFields(); }\r\n\t\t\r\n\t\treturn () => {unmounted = true;}\r\n    },[props.visible])\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\tlet {plans} = props;\r\n\t\tsetCatlist(plans.list ? plans.list.data:[]);\r\n\t\treturn () => {unmounted = true;}\r\n    },[props.plans.list])\r\n\t\r\n\tconst onFinish= val=>{\r\n\r\n\r\n\t\t\r\n\t\tsetBtnDis(true);\r\n\t\tif(props.detail){\r\n\t\t\tval._id = props.detail._id\r\n\t\t\tdispatch({type: 'plans/planEdit',  payload: val,});\r\n\t\t}\r\n\t\telse{\r\n\t\t\t\r\n\t\t\tdispatch({type: 'plans/planAdd',  payload: val,});\r\n\t\t}\r\n\t}\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\tlet add = props.plans.add\r\n\t\tif(!unmounted && add.count > count && add.status){\r\n\t\t\tsetBtnDis(false);\r\n\t\t  setCount(add.count);\t\t  \r\n\t\t  props.returnData('success');\r\n\t\t}else if(!unmounted && add.count > count && !add.status){\r\n\t\t  setBtnDis(false);\r\n\t\t  setCount(add.count);\r\n\t\t}\r\n\t\t\r\n\t\t// Edit\r\n\t\tlet edit = props.plans.edit\r\n\t\tif(!unmounted && edit.count > dcount && edit.status){\r\n\t\t  setBtnDis(false);\r\n\t\t  setDCount(edit.count);\r\n\t\t  \r\n\t\t  props.returnData('success');\r\n\t\t}else if(!unmounted && edit.count > dcount && !edit.status){\r\n\t\t  setBtnDis(false);\r\n\t\t  setDCount(edit.count);\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\tunmounted = true;\r\n\t\t}\r\n\t},[props.plans])\r\n\t\r\n\tconst cancelFun = ()=>{\r\n\t\tif(!props.detail)\r\n\t\t\tform.resetFields();\r\n\t\tprops.closeModel()\r\n\t}\r\n\r\n\t\r\nreturn (\r\n\t<Modal visible={props.visible} title={props.detail?'Edit Plan':'Add Plan'} onCancel={cancelFun} footer={<Fragment>\r\n\t\t\t\t<Button onClick={cancelFun}>Cancel</Button>\r\n\t\t\t\t<Button type=\"primary\" disabled={btnDis} className=\"btn-w25 btn-primary-light\" onClick={()=>form.submit()}>{props.detail?'Edit Plan':'Add Plan'}</Button>\r\n\t\t\t</Fragment>} >\r\n\t\t<Form {...formItemLayout} form={form} name=\"loc_info\" layout=\"vertical\" onFinish={onFinish} className=\"innerFields\">\r\n\t\t\t<Form.Item name=\"plan_price\"  rules={[{ required: true, message: 'This field is required!' }]} >\r\n\t\t\t\t<Input type=\"number\" placeholder=\"Enter Price\" />\r\n\t\t\t</Form.Item>\r\n\t\t</Form>\r\n\t\t\r\n\t</Modal>\r\n)};\r\n\r\nexport default connect(({ plans, global, loading }) => ({\r\n  plans:plans,\r\n  global: global,\r\n  loading: loading \r\n}))(AddEdit);"]},"metadata":{},"sourceType":"module"}