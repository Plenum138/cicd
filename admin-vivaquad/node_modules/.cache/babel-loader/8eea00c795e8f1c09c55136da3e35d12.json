{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useState,useEffect}from'react';// import CheckoutForm from './CheckoutForm';\nimport StripeCheckout from'react-stripe-checkout';import axios from'axios';// import { Alert } from 'antd';\nvar baseUrl=process.env.REACT_APP_ApiUrl;var PaymentPage=function PaymentPage(props){useEffect(function(){localStorage.removeItem(\"stripe_screen\",\"true\");},[]);var handleToken=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(token,addresses){var user,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:user=JSON.parse(localStorage.getItem(\"user\"));_context.next=3;return axios.post(\"\".concat(baseUrl,\"/api/stripe-pay\"),{token:token,addresses:addresses,user:user});case 3:res=_context.sent;if(res.data.status){alert(res.data.message);props.history.push('/login');}else{alert(\"Something Weny Wrong\");}case 5:case\"end\":return _context.stop();}}},_callee);}));return function handleToken(_x,_x2){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"py-5 text-center\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Stripe Payment \")),/*#__PURE__*/React.createElement(\"div\",{className:\"row s-box\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-5 order-md-2 mb-4\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-7 order-md-1\"},/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h4\",{className:\"d-flex justify-content-between align-items-center mb-3\"},/*#__PURE__*/React.createElement(\"span\",{className:\"text-muted\"},\"Pay with card\")),/*#__PURE__*/React.createElement(StripeCheckout,{stripeKey:\"pk_test_51Iug0ySBeksr324AnMsGUjac2svTFYwB40ldkaFwrNbn88BX5cK4cjgzTTWE9jVjP6OSEfRMcdyGDePVCmVKPYOC00wh7XcBk7\",token:handleToken,billingAddress:true,shippingAddress:true,amount:20*100})))));};export default PaymentPage;","map":{"version":3,"sources":["/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/src/pages/payments/payment.js"],"names":["React","useState","useEffect","StripeCheckout","axios","baseUrl","process","env","REACT_APP_ApiUrl","PaymentPage","props","localStorage","removeItem","handleToken","token","addresses","user","JSON","parse","getItem","post","res","data","status","alert","message","history","push"],"mappings":"2XAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA;AACA,MAAOC,CAAAA,cAAP,KAA2B,uBAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA;AAEA,GAAMC,CAAAA,OAAO,CAAGC,OAAO,CAACC,GAAR,CAAYC,gBAA5B,CAIA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAW,CAG9BR,SAAS,CAAC,UAAM,CAEfS,YAAY,CAACC,UAAb,CAAwB,eAAxB,CAAyC,MAAzC,EAEA,CAJQ,CAIN,EAJM,CAAT,CAMA,GAAMC,CAAAA,WAAW,0FAAG,iBAAOC,KAAP,CAAcC,SAAd,+HACTC,IADS,CACFC,IAAI,CAACC,KAAL,CAAWP,YAAY,CAACQ,OAAb,CAAqB,MAArB,CAAX,CADE,uBAEKf,CAAAA,KAAK,CAACgB,IAAN,WAAcf,OAAd,oBAAwC,CAAES,KAAK,CAALA,KAAF,CAASC,SAAS,CAATA,SAAT,CAAoBC,IAAI,CAAJA,IAApB,CAAxC,CAFL,QAEPK,GAFO,eAGb,GAAGA,GAAG,CAACC,IAAJ,CAASC,MAAZ,CAAoB,CAChBC,KAAK,CAACH,GAAG,CAACC,IAAJ,CAASG,OAAV,CAAL,CACAf,KAAK,CAACgB,OAAN,CAAcC,IAAd,CAAmB,QAAnB,EACH,CAHD,IAGM,CACFH,KAAK,CAAC,sBAAD,CAAL,CACH,CARY,sDAAH,kBAAXX,CAAAA,WAAW,gDAAjB,CAYA,mBAEC,2BAAK,SAAS,CAAC,WAAf,eACC,2BAAK,SAAS,CAAC,kBAAf,eACC,gDADD,CADD,cAKC,2BAAK,SAAS,CAAC,WAAf,eAEC,2BAAK,SAAS,CAAC,0BAAf,EAFD,cAKC,2BAAK,SAAS,CAAC,qBAAf,eAIC,oBAAC,KAAD,CAAO,QAAP,mBACC,0BAAI,SAAS,CAAC,wDAAd,eACC,4BAAM,SAAS,CAAC,YAAhB,kBADD,CADD,cAIC,oBAAC,cAAD,EACC,SAAS,CAAC,6GADX,CAEC,KAAK,CAAEA,WAFR,CAGC,cAAc,KAHf,CAIC,eAAe,KAJhB,CAKC,MAAM,CAAE,GAAK,GALd,EAJD,CAJD,CALD,CALD,CAFD,CAsCA,CA3DD,CA8DA,cAAeJ,CAAAA,WAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\n// import CheckoutForm from './CheckoutForm';\nimport StripeCheckout from 'react-stripe-checkout';\nimport axios from 'axios';\n// import { Alert } from 'antd';\n\nconst baseUrl = process.env.REACT_APP_ApiUrl;\n\n\n\nconst PaymentPage = (props) => {\n\n\n\tuseEffect(() => {\n\t\t\n\t\tlocalStorage.removeItem(\"stripe_screen\", \"true\");\n\n\t}, [])\n\n\tconst handleToken = async (token, addresses) => {\n        let user = JSON.parse(localStorage.getItem(\"user\"))\n        const res = await axios.post(`${baseUrl}/api/stripe-pay`, { token, addresses, user });\n        if(res.data.status) {\n            alert(res.data.message)\n            props.history.push('/login');\n        }else {\n            alert(\"Something Weny Wrong\")\n        }\n    }\n\n\n\treturn (\n\n\t\t<div className=\"container\">\n\t\t\t<div className=\"py-5 text-center\">\n\t\t\t\t<h4>Stripe Payment </h4>\n\t\t\t</div>\n\n\t\t\t<div className=\"row s-box\">\n\n\t\t\t\t<div className=\"col-md-5 order-md-2 mb-4\">\n\n\t\t\t\t</div>\n\t\t\t\t<div className=\"col-md-7 order-md-1\">\n\n\t\t\t\t\t{/* <CheckoutForm amount={2000} setPaymentCompleted={setPaymentCompleted} /> */}\n\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<h4 className=\"d-flex justify-content-between align-items-center mb-3\">\n\t\t\t\t\t\t\t<span className=\"text-muted\">Pay with card</span>\n\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t<StripeCheckout\n\t\t\t\t\t\t\tstripeKey='pk_test_51Iug0ySBeksr324AnMsGUjac2svTFYwB40ldkaFwrNbn88BX5cK4cjgzTTWE9jVjP6OSEfRMcdyGDePVCmVKPYOC00wh7XcBk7'\n\t\t\t\t\t\t\ttoken={handleToken}\n\t\t\t\t\t\t\tbillingAddress\n\t\t\t\t\t\t\tshippingAddress\n\t\t\t\t\t\t\tamount={20 * 100}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t</React.Fragment>\n\n\t\t\t\t</div>\n\n\t\t\t</div>\n\n\t\t</div>\n\n\n\t)\n}\n\n\nexport default PaymentPage;"]},"metadata":{},"sourceType":"module"}