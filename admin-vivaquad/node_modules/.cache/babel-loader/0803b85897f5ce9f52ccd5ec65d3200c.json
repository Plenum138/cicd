{"ast":null,"code":"import _objectSpread from\"/Users/kalyansingh/Desktop/Project/cicd/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"/Users/kalyansingh/Desktop/Project/cicd/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/kalyansingh/Desktop/Project/cicd/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,Component,useEffect}from'react';import Apploader from'./../../components/loader/loader';import{Redirect,Route}from'react-router';import{UserOutlined,LockOutlined,MailOutlined,MobileOutlined,EyeInvisibleOutlined,EyeTwoTone}from'@ant-design/icons';import{connect}from'dva';import{Link}from'react-router-dom';import Logo from'../../assets/img/logo.png';import UploadImages from'./../../components/upload-images/index';//import styles from './login.less';\nimport{Modal,Row,Col,Form,Input,Button,Avatar,message,Select,Checkbox,Radio}from'antd';var FormItem=Form.Item;var Option=Select.Option;var formRef=React.createRef();var AppRegister=function AppRegister(props){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),count=_useState2[0],setCount=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),visible=_useState4[0],setVisible=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showPassword=_useState6[0],setShowPassword=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),imagesList=_useState8[0],setImagesList=_useState8[1];var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var handelPassword=function handelPassword(){setShowPassword(!showPassword);};var updateImageData=function updateImageData(val){setImagesList(val);form.setFieldsValue({images:[]});};var onFinish=function onFinish(values){if(imagesList.length===0){return message.error(\"please upload logo\");}values.images=imagesList;values.roleType=\"SUBADMIN\";localStorage.setItem(\"flow\",'reg');localStorage.setItem(\"user_email\",values.email);var formData=new FormData();formData.append(\"school_name\",values.school_name);formData.append(\"roleType\",values.roleType);formData.append(\"password\",values.password);formData.append(\"owner_name\",values.owner_name);formData.append(\"mobile_number\",values.mobile_number);formData.append(\"images\",values.images[0].file);formData.append(\"email\",values.email);formData.append(\"address\",values.address);props.dispatch({type:'auth/register',payload:formData});};useEffect(function(){var unmounted=false;setTimeout(function(){return document.title='register';},100);var register=props.auth.reg;if(!unmounted&&register.action&&register.action.status===true&&register.action.count>count){var _formRef$current$setF;setCount(register.action.count);props.dispatch({type:'auth/registerSuccess'});formRef.current.setFieldsValue((_formRef$current$setF={},_defineProperty(_formRef$current$setF,'name',''),_defineProperty(_formRef$current$setF,'email',''),_defineProperty(_formRef$current$setF,'mobile_number',''),_defineProperty(_formRef$current$setF,'username',''),_defineProperty(_formRef$current$setF,'password',''),_defineProperty(_formRef$current$setF,'gstin',''),_defineProperty(_formRef$current$setF,'fssai',''),_formRef$current$setF));setTimeout(function(){Modal.success({content:'Registered Successfully! Vivaquad team will contact you soon',onOk:function onOk(){props.history.push('/verify');}});},300);}return function(){unmounted=true;};},[props.auth.reg]);useEffect(function(){var unmounted=false;var response=[];var alrdreg=props.auth.alrdreg;if(alrdreg.action&&alrdreg.action.status===false){props.dispatch({type:'auth/alrdregisterSuccess'});props.dispatch(_objectSpread({type:'auth/alrdreg'},response));props.history.push('/login');}return function(){unmounted=true;};},[props.auth.alrdreg]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Apploader,{show:props.loading.global}),/*#__PURE__*/React.createElement(Row,{type:\"flex\",className:\"basicpage\",justify:\"space-around\",align:\"middle\",style:{minHeight:'100vh'}},/*#__PURE__*/React.createElement(Col,{className:\"basicbox \"},/*#__PURE__*/React.createElement(\"div\",{className:\"mainimg registerimg basicbox_height\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"mainform mobile_mainform\"},/*#__PURE__*/React.createElement(Form,{ref:formRef,layout:'vertical',name:\"normal_login\",className:\"login-form\",initialValues:{remember:true},onFinish:onFinish},/*#__PURE__*/React.createElement(Form.Item,{name:\"owner_name\",rules:[{required:true,message:'Please input owner name!'},{pattern:/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/,message:'letters and digits, with hyphens, underscores and spaces as internal separator'},{max:25,message:'owner name must not be greater than 25 characters.'}]},/*#__PURE__*/React.createElement(Input,{prefix:/*#__PURE__*/React.createElement(UserOutlined,{className:\"site-form-item-icon\"}),placeholder:\"Enter owner name\"})),/*#__PURE__*/React.createElement(Form.Item,{name:\"school_name\",rules:[{required:true,message:'Please input school name!'},{max:50,message:'school name must not be greater than 50 characters.'}]},/*#__PURE__*/React.createElement(Input,{prefix:/*#__PURE__*/React.createElement(UserOutlined,{className:\"site-form-item-icon\"}),placeholder:\"Enter school name\"})),/*#__PURE__*/React.createElement(Form.Item,{name:\"email\",rules:[{required:true,message:'Please input your Email!'},{type:'email',message:'The input is not valid E-mail!'}]},/*#__PURE__*/React.createElement(Input,{prefix:/*#__PURE__*/React.createElement(MailOutlined,{className:\"site-form-item-icon\"}),placeholder:\"Email\"})),/*#__PURE__*/React.createElement(Form.Item,{name:\"mobile_number\",rules:[{required:true,message:'Please input your Phone Number!'},{pattern:/^[0-9]+$/,message:'Need to enter number'},{len:10,message:'Phone number should be 10 digits long.'}]},/*#__PURE__*/React.createElement(Input,{type:\"tel\",prefix:/*#__PURE__*/React.createElement(MobileOutlined,{className:\"site-form-item-icon\"}),placeholder:\"Phone Number\"})),/*#__PURE__*/React.createElement(Form.Item,{name:\"address\",rules:[{required:true,message:'Please input address!'},{max:100,message:'address must not be greater than 100 characters.'}]},/*#__PURE__*/React.createElement(Input,{prefix:/*#__PURE__*/React.createElement(UserOutlined,{className:\"site-form-item-icon\"}),placeholder:\"Enter school address\"})),/*#__PURE__*/React.createElement(Form.Item,{name:\"password\",rules:[{required:true,message:'Please input your Password!'},{pattern:/^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$/,message:'Minimum eight characters, at least one letter, one number and one special character:'}]},/*#__PURE__*/React.createElement(Input,{prefix:/*#__PURE__*/React.createElement(LockOutlined,{className:\"site-form-item-icon\"}),type:showPassword?'text':'password',placeholder:\"Password\",suffix:showPassword?/*#__PURE__*/React.createElement(EyeTwoTone,{onClick:handelPassword}):/*#__PURE__*/React.createElement(EyeInvisibleOutlined,{onClick:handelPassword})})),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3\"},imagesList.map(function(item,index){console.log(item);return/*#__PURE__*/React.createElement(Avatar,{key:index,shape:\"square\",size:80,src:item.urls||item,style:{marginBottom:'2px'}});}),imagesList.length>0?/*#__PURE__*/React.createElement(\"br\",null):'',imagesList.length>0?/*#__PURE__*/React.createElement(Button,{className:\"upload_logo\",onClick:function onClick(){return setVisible(true);}},\" Edit Logo \"):/*#__PURE__*/React.createElement(Button,{className:\"upload_logo\",onClick:function onClick(){return setVisible(true);}},\" Upload Logo \")),/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(Button,{type:\"primary\",htmlType:\"submit\",className:\"login-form-button mobile-register-form-button\"},\" Sign Up \"),\" \",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"Or \",/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return props.history.push('/');}},/*#__PURE__*/React.createElement(\"a\",{href:\"#\",className:\"mobile-register-already\"},\"Already have a account!\")))),/*#__PURE__*/React.createElement(UploadImages,{visible:visible,closeFun:function closeFun(){return setVisible(false);},returnImg:function returnImg(val){return updateImageData(val);},resetVal:imagesList,aspect:9/12})))));};export default connect(function(_ref){var auth=_ref.auth,loading=_ref.loading;return{auth:auth,loading:loading};})(AppRegister);","map":{"version":3,"sources":["/Users/kalyansingh/Desktop/Project/cicd/admin-vivaquad/src/pages/auth/register.js"],"names":["React","useState","Component","useEffect","Apploader","Redirect","Route","UserOutlined","LockOutlined","MailOutlined","MobileOutlined","EyeInvisibleOutlined","EyeTwoTone","connect","Link","Logo","UploadImages","Modal","Row","Col","Form","Input","Button","Avatar","message","Select","Checkbox","Radio","FormItem","Item","Option","formRef","createRef","AppRegister","props","count","setCount","visible","setVisible","showPassword","setShowPassword","imagesList","setImagesList","useForm","form","handelPassword","updateImageData","val","setFieldsValue","images","onFinish","values","length","error","roleType","localStorage","setItem","email","formData","FormData","append","school_name","password","owner_name","mobile_number","file","address","dispatch","type","payload","unmounted","setTimeout","document","title","register","auth","reg","action","status","current","success","content","onOk","history","push","response","alrdreg","loading","global","minHeight","remember","required","pattern","max","len","map","item","index","console","log","urls","marginBottom"],"mappings":"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","sourcesContent":["import React, { useState, Component, useEffect } from 'react';\r\nimport Apploader from './../../components/loader/loader'\r\nimport { Redirect, Route } from 'react-router';\r\nimport { UserOutlined, LockOutlined, MailOutlined, MobileOutlined, EyeInvisibleOutlined, EyeTwoTone } from '@ant-design/icons';\r\nimport { connect } from 'dva';\r\nimport { Link } from 'react-router-dom';\r\nimport Logo from '../../assets/img/logo.png';\r\nimport UploadImages from './../../components/upload-images/index'\r\n\r\n\r\n//import styles from './login.less';\r\n\r\nimport { Modal, Row, Col, Form, Input, Button, Avatar, message, Select, Checkbox, Radio } from 'antd';\r\nconst FormItem = Form.Item;\r\nconst Option = Select.Option;\r\nconst formRef = React.createRef();\r\n\r\n\r\nconst AppRegister = (props) => {\r\n\tconst [count, setCount] = useState(0);\r\n\tconst [visible, setVisible] = useState(false);\r\n\tconst [showPassword, setShowPassword] = useState(false);\r\n\tconst [imagesList, setImagesList] = useState([]);\r\n\tconst [form] = Form.useForm();\r\n\r\n\r\n\tconst handelPassword = () => {\r\n\t\tsetShowPassword(!showPassword);\r\n\r\n\t}\r\n\r\n\tconst updateImageData = val => {\r\n\t\tsetImagesList(val);\r\n\t\tform.setFieldsValue({ images: [] });\r\n\r\n\t}\r\n\tconst onFinish = values => {\r\n\r\n\t\tif (imagesList.length === 0) {\r\n\t\t\treturn message.error(\"please upload logo\");\r\n\t\t}\r\n\t\tvalues.images = imagesList;\r\n\t\tvalues.roleType = \"SUBADMIN\";\r\n\t\tlocalStorage.setItem(\"flow\", 'reg');\r\n\t\tlocalStorage.setItem(\"user_email\", values.email);\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append(\"school_name\", values.school_name)\r\n\t\tformData.append(\"roleType\", values.roleType)\r\n\t\tformData.append(\"password\", values.password)\r\n\t\tformData.append(\"owner_name\", values.owner_name)\r\n\t\tformData.append(\"mobile_number\", values.mobile_number)\r\n\t\tformData.append(\"images\", values.images[0].file)\r\n\t\tformData.append(\"email\", values.email)\r\n\t\tformData.append(\"address\", values.address)\r\n\t\tprops.dispatch({ type: 'auth/register', payload: formData, });\r\n\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\tsetTimeout(() => document.title = 'register', 100);\r\n\t\tlet register = props.auth.reg;\r\n\t\tif (!unmounted && register.action && register.action.status === true && register.action.count > count) {\r\n\t\t\tsetCount(register.action.count)\r\n\t\t\tprops.dispatch({ type: 'auth/registerSuccess' });\r\n\t\t\tformRef.current.setFieldsValue({ ['name']: '', ['email']: '', ['mobile_number']: '', ['username']: '', ['password']: '', ['gstin']: '', ['fssai']: '' });\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tModal.success({\r\n\t\t\t\t\tcontent: ('Registered Successfully! Vivaquad team will contact you soon'),\r\n\t\t\t\t\tonOk() {\r\n\t\t\t\t\t\tprops.history.push('/verify')\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}, 300)\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\tunmounted = true;\r\n\t\t}\r\n\t}, [props.auth.reg])\r\n\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\tlet response = [];\r\n\t\tlet alrdreg = props.auth.alrdreg;\r\n\t\tif (alrdreg.action && alrdreg.action.status === false) {\r\n\t\t\tprops.dispatch({ type: 'auth/alrdregisterSuccess' });\r\n\t\t\tprops.dispatch({ type: 'auth/alrdreg', ...response });\r\n\t\t\tprops.history.push('/login');\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\tunmounted = true;\r\n\t\t}\r\n\t}, [props.auth.alrdreg])\r\n\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Apploader show={props.loading.global} />\r\n\t\t\t<Row type=\"flex\" className={\"basicpage\"} justify=\"space-around\" align=\"middle\" style={{ minHeight: '100vh' }}>\r\n\t\t\t\t<Col className=\"basicbox \">\r\n\t\t\t\t\t<div className=\"mainimg registerimg basicbox_height\"></div>\r\n\t\t\t\t\t<div className=\"mainform mobile_mainform\">\r\n\r\n\t\t\t\t\t\t<Form ref={formRef} layout={'vertical'} name=\"normal_login\" className=\"login-form\" initialValues={{ remember: true, }} onFinish={onFinish} >\r\n\t\t\t\t\t\t\t<Form.Item name=\"owner_name\" rules={[\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\tmessage: 'Please input owner name!'\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tpattern: /^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/,\r\n\t\t\t\t\t\t\t\t\tmessage: 'letters and digits, with hyphens, underscores and spaces as internal separator'\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{ max: 25, message: 'owner name must not be greater than 25 characters.' },\r\n\r\n\t\t\t\t\t\t\t]} >\r\n\t\t\t\t\t\t\t\t<Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Enter owner name\" />\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t<Form.Item name=\"school_name\" rules={[\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\tmessage: 'Please input school name!'\r\n\t\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\t\t{ max: 50, message: 'school name must not be greater than 50 characters.' },\r\n\r\n\t\t\t\t\t\t\t]} >\r\n\t\t\t\t\t\t\t\t<Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Enter school name\" />\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t<Form.Item name=\"email\" rules={[\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\tmessage: 'Please input your Email!'\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\ttype: 'email',\r\n\t\t\t\t\t\t\t\t\tmessage: 'The input is not valid E-mail!',\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t]} >\r\n\t\t\t\t\t\t\t\t<Input prefix={<MailOutlined className=\"site-form-item-icon\" />} placeholder=\"Email\" />\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t<Form.Item name=\"mobile_number\" rules={[\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\tmessage: 'Please input your Phone Number!',\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tpattern: /^[0-9]+$/,\r\n\t\t\t\t\t\t\t\t\tmessage: 'Need to enter number'\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tlen: 10,\r\n\t\t\t\t\t\t\t\t\tmessage: 'Phone number should be 10 digits long.'\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t]} >\r\n\t\t\t\t\t\t\t\t<Input type=\"tel\" prefix={<MobileOutlined className=\"site-form-item-icon\" />} placeholder=\"Phone Number\" />\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t<Form.Item name=\"address\" rules={[\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\tmessage: 'Please input address!'\r\n\t\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\t\t{ max: 100, message: 'address must not be greater than 100 characters.' },\r\n\r\n\t\t\t\t\t\t\t]} >\r\n\t\t\t\t\t\t\t\t<Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Enter school address\" />\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t\t\t<Form.Item name=\"password\" rules={[\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\tmessage: 'Please input your Password!',\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tpattern: /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$/,\r\n\t\t\t\t\t\t\t\t\tmessage: 'Minimum eight characters, at least one letter, one number and one special character:'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]} >\r\n\t\t\t\t\t\t\t\t<Input prefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n\t\t\t\t\t\t\t\t\ttype={showPassword ? 'text' : 'password'}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\t\t\t\tsuffix={showPassword ? <EyeTwoTone onClick={handelPassword} /> : <EyeInvisibleOutlined onClick={handelPassword} />}\r\n\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t\t\t{/* <Form.Item name=\"images\" label={<span><span style={{color:'#ff4d4f'}}>* </span>Upload Logo</span>} rules={[{ required: false, message: 'Field required!', }, ]}  >\r\n\t\t\t{imagesList.map((item,index)=>\r\n\t\t\t{\r\n\t\t\t\tconsole.log(item)\r\n\t\t\treturn <Avatar key={index} shape=\"square\" size={150} src={item.urls || item} style={{margin:5}} />\r\n\t\t\t }\r\n\t\t\t )}\r\n\t\t\t{imagesList.length>0?<br/>:''}\r\n\t\t\t<Button onClick={()=>setVisible(true)}> Upload Logo </Button>\r\n\t\t</Form.Item>\t\t */}\r\n\t\t\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t\t\t{imagesList.map((item, index) => {\r\n\t\t\t\t\t\t\t\t\tconsole.log(item)\r\n\t\t\t\t\t\t\t\t\treturn <Avatar key={index} shape=\"square\" size={80} src={item.urls || item} style={{ marginBottom: '2px' }} />\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{imagesList.length > 0 ? <br /> : ''}\r\n\t\t\t\t\t\t\t\t{imagesList.length > 0 ? <Button className=\"upload_logo\" onClick={() => setVisible(true)}> Edit Logo </Button> : <Button className=\"upload_logo\" onClick={() => setVisible(true)}> Upload Logo </Button>}\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<Form.Item>\r\n\t\t\t\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button mobile-register-form-button\"> Sign Up </Button> <br /><br />\r\n\t\t\t\t\t\t\t\tOr <span onClick={() => props.history.push('/')}><a href=\"#\" className=\"mobile-register-already\">Already have a account!</a></span>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t<UploadImages visible={visible} closeFun={() => setVisible(false)} returnImg={val => updateImageData(val)} resetVal={imagesList} aspect={9 / 12} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default connect(({ auth, loading }) => ({\r\n\tauth, loading\r\n}))(AppRegister);\r\n"]},"metadata":{},"sourceType":"module"}