{"ast":null,"code":"var _jsxFileName = \"/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/src/pages/account/index.js\";\nimport React, { useState, Component, useEffect } from 'react';\nimport Apploader from './../../components/loader/loader';\nimport { connect } from 'dva';\nimport moment from 'moment';\nimport { Row, Col, Form, Input, Button, DatePicker, Card, Radio, Modal, Upload, message, Avatar, Image } from 'antd';\nimport UploadImages from '../../components/sharing/upload-images';\nimport { LoadingOutlined, PlusOutlined, UserOutlined } from '@ant-design/icons';\nimport axios from 'axios';\nconst baseUrl = process.env.REACT_APP_ApiUrl;\nconst dateFormat = 'MM/DD/YYYY';\n\nconst Account = props => {\n  const [count, setCount] = useState(0);\n  const [dcount, setDcount] = useState(0);\n  const [imagesList, setImagesList] = useState([]);\n  const [visible, setVisible] = useState(false);\n  const [userId, setUserId] = useState('');\n  const [avatar, setAvatar] = useState('');\n  const [detailData, setDetailData] = useState({});\n  const role = useState(localStorage.getItem('role'));\n  const {\n    dispatch\n  } = props;\n  const [form] = Form.useForm();\n  const [myMobileNoOTP, setMyMobileNoOTP] = useState('');\n  const [modalVisible, setModalVisible] = useState(false);\n  let user_data = JSON.parse(localStorage.getItem('user'));\n  const [myMobileNo, setMyMobileNo] = useState('');\n  const [isMobileVerify, setIsMobileVerified] = useState(false);\n  const [modalVerifyVisible, setModalVerifyVisible] = useState(false);\n\n  const openModalForVerify = () => {\n    let val = {\n      mobile_number: myMobileNo\n    };\n    dispatch({\n      type: 'setting/resendOTPTOUser',\n      payload: val\n    });\n    setModalVerifyVisible(true);\n  };\n\n  const convertToFormData = val => {\n    const formData = new FormData();\n\n    for (const key in val) {\n      formData.append(key, val[key]);\n    }\n\n    if (imagesList.length > 0 && imagesList[0].file) {\n      formData.append(\"file\", imagesList[0].file);\n    }\n\n    return formData;\n  };\n\n  useEffect(() => {\n    let mobile_verified = localStorage.getItem('isMobileVerified');\n\n    if (mobile_verified == 'false' || mobile_verified == false) {\n      setIsMobileVerified(false);\n    } else {\n      setIsMobileVerified(true);\n    }\n  }, []);\n\n  const handleCancel = () => {\n    setModalVisible(false);\n    setModalVerifyVisible(false);\n  };\n\n  const changeMobileOTP = event => {\n    setMyMobileNoOTP(event.target.value);\n  };\n\n  const addMobileVerify = async () => {\n    let data = {\n      otp: myMobileNoOTP,\n      mobile: myMobileNo\n    };\n    const res = await axios.post(`${baseUrl}/is-mobile/verified`, data);\n\n    if (res.data.status === true) {\n      alert(res.data.message);\n      localStorage.setItem('isMobileVerified', true);\n      setModalVerifyVisible(false);\n      setIsMobileVerified(true);\n    } else {\n      alert(res.data.message);\n      return;\n    } // console.log(res);\t\n\n  };\n\n  useEffect(() => {\n    let myMobileNo = user_data.mobile;\n    setMyMobileNo(myMobileNo);\n    let unmounted = false;\n    setTimeout(() => document.title = 'Setting', 100);\n    dispatch({\n      type: 'account/clearAction'\n    });\n    setUserId(localStorage.getItem('userId'));\n    getDetail(localStorage.getItem('userId'));\n    return () => {\n      unmounted = true;\n    };\n  }, [dispatch]);\n\n  const getDetail = id => dispatch({\n    type: 'account/getDetail',\n    payload: {\n      _id: id,\n      profile_id: id\n    }\n  });\n\n  useEffect(() => {\n    let unmounted = false;\n    let detail = props.account.detail;\n\n    if (!unmounted && detail.count > dcount && detail.status) {\n      setDcount(detail.count);\n      let profile_data = props.account.detail ? props.account.detail.profile : {};\n      let userLoginData = props.account.detail ? props.account.detail.userLogin : {};\n      setDetailData(userLoginData);\n\n      if (userLoginData.roles === 'SUBADMIN') {\n        var _profile_data$schoolD, _profile_data$schoolD2, _profile_data$schoolD3;\n\n        setAvatar(profile_data === null || profile_data === void 0 ? void 0 : (_profile_data$schoolD = profile_data.schoolDetail) === null || _profile_data$schoolD === void 0 ? void 0 : _profile_data$schoolD.media);\n        form.setFieldsValue({\n          ['school_name']: profile_data === null || profile_data === void 0 ? void 0 : (_profile_data$schoolD2 = profile_data.schoolDetail) === null || _profile_data$schoolD2 === void 0 ? void 0 : _profile_data$schoolD2.school_name,\n          ['address']: profile_data === null || profile_data === void 0 ? void 0 : (_profile_data$schoolD3 = profile_data.schoolDetail) === null || _profile_data$schoolD3 === void 0 ? void 0 : _profile_data$schoolD3.address //   ['mobile_number']: profile_data.mobile_number, \n\n        });\n      } else {\n        setAvatar(userLoginData.avatar);\n      }\n\n      console.log(profile_data);\n      form.setFieldsValue({\n        ['name']: userLoginData.username,\n        ['email']: userLoginData.email,\n        ['mobile_number']: profile_data.mobile_number\n      });\n    }\n\n    let edit = props.account.edit;\n\n    if (!unmounted && edit.count > count && edit.status) {\n      setCount(edit.count);\n      getDetail(userId);\n    } else if (!unmounted && edit.count > count && !edit.status) {\n      setCount(edit.count);\n    }\n\n    return () => {\n      unmounted = true;\n    };\n  }, [props.account]);\n\n  const verifyFormFun = val => {\n    getDetail(userId);\n  };\n\n  const onFinish = val => {\n    console.log('onFinish', val);\n    let date = val.dob;\n    let values = {\n      \"name\": val.name,\n      \"email\": val.email,\n      \"phone\": val.phone,\n      \"gender\": val.gender,\n      \"dob\": date,\n      \"add1\": val.add1,\n      \"add2\": val.add2,\n      \"postal\": val.postal,\n      \"state\": val.state,\n      \"city\": val.city\n    };\n    const formData = convertToFormData(values);\n    console.log(\"formData\", formData);\n    dispatch({\n      type: 'account/editItem',\n      payload: formData,\n      history: props\n    });\n  };\n\n  const handlePostal = async e => {\n    let value = e.target.value;\n\n    if (value.length === 6) {\n      const res = await axios.get(`https://api.postalpincode.in/pincode/${value}`);\n\n      if (res.data[0].PostOffice != null && res.data[0].PostOffice != undefined && res.data[0].PostOffice != \"\") {\n        let pincode_data = res.data[0].PostOffice[0];\n        form.setFieldsValue({\n          city: pincode_data.District,\n          state: pincode_data.State\n        });\n      }\n    }\n  };\n\n  console.log('detailData', (detailData === null || detailData === void 0 ? void 0 : detailData.roles) === \"SUBADMIN\");\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 2\n    }\n  }, /*#__PURE__*/React.createElement(Apploader, {\n    show: props.loading.global,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 3\n    }\n  }), /*#__PURE__*/React.createElement(Card, {\n    style: {\n      width: '100%'\n    },\n    title: \"Account\",\n    bodyStyle: {\n      padding: '20px 20px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    width: 200,\n    height: 200,\n    src: avatar === null || avatar === undefined ? 'https://upload.wikimedia.org/wikipedia/commons/9/99/Sample_User_Icon.png' : avatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 3\n    }\n  }), /*#__PURE__*/React.createElement(Form, {\n    name: \"normal_login\",\n    form: form,\n    className: \"full-width-form\",\n    initialValues: {\n      remember: true\n    },\n    onFinish: onFinish,\n    layout: 'vertical',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    gutter: 16,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 24,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"name\",\n    label: \"Name\",\n    rules: [{\n      required: true,\n      message: 'Please input your Name!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 7\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 24,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"email\",\n    label: \"Email\",\n    rules: [{\n      required: true,\n      message: 'Field required!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Email\",\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 24,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Mobile Number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    gutter: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    span: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"mobile_number\",\n    rules: [{\n      required: true,\n      message: 'Field required!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    disabled: true,\n    placeholder: \"mobile_number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 12\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    span: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 10\n    }\n  }, isMobileVerify === true ? '' : /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    className: \"btn-w25 mobile_verify_btn\",\n    onClick: openModalForVerify,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 11\n    }\n  }, \"Verify\"))))), (detailData === null || detailData === void 0 ? void 0 : detailData.roles) === \"SUBADMIN\" && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 24,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 1\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"school_name\",\n    label: \"School Name\",\n    rules: [{\n      required: true,\n      message: 'Please input your school name!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Enter School Name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 24,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"address\",\n    label: \"School Address\",\n    rules: [{\n      required: true,\n      message: 'Please input your school address!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Enter School Address\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 24,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"thumbnail\",\n    label: /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 16\n      }\n    }, \" School Logo \"), \" \"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }\n  }, imagesList.length > 0 && imagesList.map((item, index) => item.urls ? /*#__PURE__*/React.createElement(Avatar, {\n    key: index,\n    shape: \"square\",\n    size: 150,\n    src: item.urls,\n    style: {\n      margin: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 21\n    }\n  }) : /*#__PURE__*/React.createElement(Avatar, {\n    key: index,\n    shape: \"square\",\n    size: 150,\n    src: process.env.REACT_APP_ApiUrl + '/' + item.url,\n    style: {\n      margin: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 9\n    }\n  })), imagesList.length > 0 ? /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 39\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: () => setImagesList([]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 45\n    }\n  }, \"Remove\"), \"\\xA0\\xA0\") : '', imagesList.length < 0 && /*#__PURE__*/React.createElement(Button, {\n    onClick: () => setVisible(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 34\n    }\n  }, \" Upload Logo \"))))), /*#__PURE__*/React.createElement(Form.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    className: \"login-form-button bg-success border-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 6\n    }\n  }, \"Update\")))), /*#__PURE__*/React.createElement(Modal, {\n    width: 400,\n    visible: modalVerifyVisible,\n    title: \"Verify Your Mobile\",\n    footer: null,\n    onCancel: handleCancel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: 'center',\n      marginBottom: '1rem'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 5\n    }\n  }, \"A OTP ( One Time Password ) has been sent to \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 62\n    }\n  }, myMobileNo), \" . Please enter the OTP in the field below to verify.\"), /*#__PURE__*/React.createElement(Form, {\n    className: \"login-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"otp\",\n    rules: [{\n      required: true,\n      message: 'Please input your Otp!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    prefix: /*#__PURE__*/React.createElement(UserOutlined, {\n      className: \"site-form-item-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 22\n      }\n    }),\n    onChange: e => changeMobileOTP(e),\n    placeholder: \"OTP Enter Here!\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    className: \"login-form-button\",\n    onClick: () => addMobileVerify(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 7\n    }\n  }, \" Verify \")))), visible && /*#__PURE__*/React.createElement(UploadImages, {\n    visible: visible,\n    closeFun: () => setVisible(false),\n    returnImg: val => {\n      setImagesList(val);\n    },\n    resetVal: imagesList,\n    limit: 5 - imagesList.length,\n    aspect: 9 / 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 4\n    }\n  }));\n};\n\nexport default connect(_ref => {\n  let {\n    account,\n    loading\n  } = _ref;\n  return {\n    account,\n    loading\n  };\n})(Account);","map":{"version":3,"sources":["/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/src/pages/account/index.js"],"names":["React","useState","Component","useEffect","Apploader","connect","moment","Row","Col","Form","Input","Button","DatePicker","Card","Radio","Modal","Upload","message","Avatar","Image","UploadImages","LoadingOutlined","PlusOutlined","UserOutlined","axios","baseUrl","process","env","REACT_APP_ApiUrl","dateFormat","Account","props","count","setCount","dcount","setDcount","imagesList","setImagesList","visible","setVisible","userId","setUserId","avatar","setAvatar","detailData","setDetailData","role","localStorage","getItem","dispatch","form","useForm","myMobileNoOTP","setMyMobileNoOTP","modalVisible","setModalVisible","user_data","JSON","parse","myMobileNo","setMyMobileNo","isMobileVerify","setIsMobileVerified","modalVerifyVisible","setModalVerifyVisible","openModalForVerify","val","mobile_number","type","payload","convertToFormData","formData","FormData","key","append","length","file","mobile_verified","handleCancel","changeMobileOTP","event","target","value","addMobileVerify","data","otp","mobile","res","post","status","alert","setItem","unmounted","setTimeout","document","title","getDetail","id","_id","profile_id","detail","account","profile_data","profile","userLoginData","userLogin","roles","schoolDetail","media","setFieldsValue","school_name","address","console","log","username","email","edit","verifyFormFun","onFinish","date","dob","values","name","phone","gender","add1","add2","postal","state","city","history","handlePostal","e","get","PostOffice","undefined","pincode_data","District","State","loading","global","width","padding","remember","required","map","item","index","urls","margin","url","textAlign","marginBottom"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,EAAoCC,SAApC,QAAqD,OAArD;AACA,OAAOC,SAAP,MAAsB,kCAAtB;AACA,SAASC,OAAT,QAAwB,KAAxB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAAQC,GAAR,EAAaC,GAAb,EAAkBC,IAAlB,EAAwBC,KAAxB,EAA+BC,MAA/B,EAAsCC,UAAtC,EAAkDC,IAAlD,EAAwDC,KAAxD,EAA+DC,KAA/D,EAAsEC,MAAtE,EAA8EC,OAA9E,EAAuFC,MAAvF,EAA+FC,KAA/F,QAA6G,MAA7G;AACA,OAAOC,YAAP,MAAyB,wCAAzB;AACA,SAASC,eAAT,EAA0BC,YAA1B,EAAwCC,YAAxC,QAA4D,mBAA5D;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,gBAA5B;AAEA,MAAMC,UAAU,GAAG,YAAnB;;AAEA,MAAMC,OAAO,GAAGC,KAAK,IAAI;AACxB,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBhC,QAAQ,CAAC,CAAD,CAAlC;AACA,QAAM,CAACiC,MAAD,EAASC,SAAT,IAAsBlC,QAAQ,CAAC,CAAD,CAApC;AACA,QAAM,CAACmC,UAAD,EAAaC,aAAb,IAA8BpC,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACqC,OAAD,EAAUC,UAAV,IAAwBtC,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAACuC,MAAD,EAASC,SAAT,IAAsBxC,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACyC,MAAD,EAASC,SAAT,IAAsB1C,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAAC2C,UAAD,EAAaC,aAAb,IAA8B5C,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM6C,IAAI,GAAG7C,QAAQ,CAAC8C,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAD,CAArB;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAelB,KAArB;AACA,QAAM,CAACmB,IAAD,IAASzC,IAAI,CAAC0C,OAAL,EAAf;AACA,QAAM,CAACC,aAAD,EAAgBC,gBAAhB,IAAoCpD,QAAQ,CAAC,EAAD,CAAlD;AAEA,QAAM,CAACqD,YAAD,EAAeC,eAAf,IAAkCtD,QAAQ,CAAC,KAAD,CAAhD;AACA,MAAIuD,SAAS,GAAGC,IAAI,CAACC,KAAL,CAAWX,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAhB;AACA,QAAM,CAACW,UAAD,EAAaC,aAAb,IAA8B3D,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAAC4D,cAAD,EAAiBC,mBAAjB,IAAwC7D,QAAQ,CAAC,KAAD,CAAtD;AACA,QAAM,CAAC8D,kBAAD,EAAqBC,qBAArB,IAA8C/D,QAAQ,CAAC,KAAD,CAA5D;;AAEA,QAAMgE,kBAAkB,GAAG,MAAM;AAChC,QAAIC,GAAG,GAAG;AAAEC,MAAAA,aAAa,EAACR;AAAhB,KAAV;AACAV,IAAAA,QAAQ,CAAC;AAAEmB,MAAAA,IAAI,EAAE,yBAAR;AAAmCC,MAAAA,OAAO,EAAEH;AAA5C,KAAD,CAAR;AACAF,IAAAA,qBAAqB,CAAC,IAAD,CAArB;AACA,GAJD;;AAOA,QAAMM,iBAAiB,GAAIJ,GAAD,IAAS;AAClC,UAAMK,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;;AAEA,SAAI,MAAMC,GAAV,IAAiBP,GAAjB,EAAsB;AAEpBK,MAAAA,QAAQ,CAACG,MAAT,CAAgBD,GAAhB,EAAoBP,GAAG,CAACO,GAAD,CAAvB;AAED;;AACD,QAAGrC,UAAU,CAACuC,MAAX,GAAoB,CAApB,IAAyBvC,UAAU,CAAC,CAAD,CAAV,CAAcwC,IAA1C,EAAgD;AAE/CL,MAAAA,QAAQ,CAACG,MAAT,CAAgB,MAAhB,EAAuBtC,UAAU,CAAC,CAAD,CAAV,CAAcwC,IAArC;AACA;;AAED,WAAOL,QAAP;AACA,GAdD;;AAiBApE,EAAAA,SAAS,CAAC,MAAM;AACf,QAAI0E,eAAe,GAAG9B,YAAY,CAACC,OAAb,CAAqB,kBAArB,CAAtB;;AACA,QAAG6B,eAAe,IAAI,OAAnB,IAA8BA,eAAe,IAAI,KAApD,EAA2D;AAC1Df,MAAAA,mBAAmB,CAAC,KAAD,CAAnB;AACA,KAFD,MAEM;AACLA,MAAAA,mBAAmB,CAAC,IAAD,CAAnB;AACA;AACD,GAPQ,EAON,EAPM,CAAT;;AAUA,QAAMgB,YAAY,GAAG,MAAM;AAC1BvB,IAAAA,eAAe,CAAC,KAAD,CAAf;AACAS,IAAAA,qBAAqB,CAAC,KAAD,CAArB;AACA,GAHD;;AAKA,QAAMe,eAAe,GAAIC,KAAD,IAAU;AACjC3B,IAAAA,gBAAgB,CAAC2B,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAhB;AACA,GAFD;;AAIA,QAAMC,eAAe,GAAG,YAAY;AAEnC,QAAIC,IAAI,GAAG;AACVC,MAAAA,GAAG,EAAGjC,aADI;AAEVkC,MAAAA,MAAM,EAAE3B;AAFE,KAAX;AAKA,UAAM4B,GAAG,GAAG,MAAM/D,KAAK,CAACgE,IAAN,CAAY,GAAE/D,OAAQ,qBAAtB,EAA6C2D,IAA7C,CAAlB;;AACA,QAAGG,GAAG,CAACH,IAAJ,CAASK,MAAT,KAAoB,IAAvB,EAA6B;AAC5BC,MAAAA,KAAK,CAACH,GAAG,CAACH,IAAJ,CAASnE,OAAV,CAAL;AACA8B,MAAAA,YAAY,CAAC4C,OAAb,CAAqB,kBAArB,EAAyC,IAAzC;AACA3B,MAAAA,qBAAqB,CAAC,KAAD,CAArB;AACAF,MAAAA,mBAAmB,CAAC,IAAD,CAAnB;AACA,KALD,MAKM;AACL4B,MAAAA,KAAK,CAACH,GAAG,CAACH,IAAJ,CAASnE,OAAV,CAAL;AACA;AACA,KAhBkC,CAiBnC;;AACA,GAlBD;;AAqBAd,EAAAA,SAAS,CAAC,MAAM;AACf,QAAIwD,UAAU,GAAGH,SAAS,CAAC8B,MAA3B;AACA1B,IAAAA,aAAa,CAACD,UAAD,CAAb;AAEA,QAAIiC,SAAS,GAAG,KAAhB;AACAC,IAAAA,UAAU,CAAC,MAAIC,QAAQ,CAACC,KAAT,GAAiB,SAAtB,EAAiC,GAAjC,CAAV;AACA9C,IAAAA,QAAQ,CAAC;AAACmB,MAAAA,IAAI,EAAE;AAAP,KAAD,CAAR;AACA3B,IAAAA,SAAS,CAACM,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAD,CAAT;AACAgD,IAAAA,SAAS,CAACjD,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAD,CAAT;AACA,WAAO,MAAM;AACZ4C,MAAAA,SAAS,GAAG,IAAZ;AACA,KAFD;AAGG,GAZK,EAYJ,CAAC3C,QAAD,CAZI,CAAT;;AAcA,QAAM+C,SAAS,GAAEC,EAAD,IAAOhD,QAAQ,CAAC;AAAEmB,IAAAA,IAAI,EAAE,mBAAR;AAA8BC,IAAAA,OAAO,EAAE;AAAE6B,MAAAA,GAAG,EAACD,EAAN;AAAUE,MAAAA,UAAU,EAAEF;AAAtB;AAAvC,GAAD,CAA/B;;AAEA9F,EAAAA,SAAS,CAAC,MAAM;AAEf,QAAIyF,SAAS,GAAG,KAAhB;AACA,QAAIQ,MAAM,GAAGrE,KAAK,CAACsE,OAAN,CAAcD,MAA3B;;AACA,QAAG,CAACR,SAAD,IAAcQ,MAAM,CAACpE,KAAP,GAAeE,MAA7B,IAAuCkE,MAAM,CAACX,MAAjD,EAAwD;AACvDtD,MAAAA,SAAS,CAACiE,MAAM,CAACpE,KAAR,CAAT;AACA,UAAIsE,YAAY,GAAGvE,KAAK,CAACsE,OAAN,CAAcD,MAAd,GAAuBrE,KAAK,CAACsE,OAAN,CAAcD,MAAd,CAAqBG,OAA5C,GAAsD,EAAzE;AACA,UAAIC,aAAa,GAAGzE,KAAK,CAACsE,OAAN,CAAcD,MAAd,GAAuBrE,KAAK,CAACsE,OAAN,CAAcD,MAAd,CAAqBK,SAA5C,GAAwD,EAA5E;AACA5D,MAAAA,aAAa,CAAC2D,aAAD,CAAb;;AACA,UAAGA,aAAa,CAACE,KAAd,KAAwB,UAA3B,EAAsC;AAAA;;AACrC/D,QAAAA,SAAS,CAAC2D,YAAD,aAACA,YAAD,gDAACA,YAAY,CAAEK,YAAf,0DAAC,sBAA4BC,KAA7B,CAAT;AACC1D,QAAAA,IAAI,CAAC2D,cAAL,CAAoB;AACnB,WAAC,aAAD,GAAgBP,YAAhB,aAAgBA,YAAhB,iDAAgBA,YAAY,CAAEK,YAA9B,2DAAgB,uBAA4BG,WADzB;AAEnB,WAAC,SAAD,GAAaR,YAAb,aAAaA,YAAb,iDAAaA,YAAY,CAAEK,YAA3B,2DAAa,uBAA4BI,OAFtB,CAGrB;;AAHqB,SAApB;AAWD,OAbD,MAaK;AACJpE,QAAAA,SAAS,CAAC6D,aAAa,CAAC9D,MAAf,CAAT;AAEA;;AACFsE,MAAAA,OAAO,CAACC,GAAR,CAAYX,YAAZ;AAGCpD,MAAAA,IAAI,CAAC2D,cAAL,CAAoB;AACjB,SAAC,MAAD,GAAUL,aAAa,CAACU,QADP;AAEjB,SAAC,OAAD,GAAWV,aAAa,CAACW,KAFR;AAGjB,SAAC,eAAD,GAAmBb,YAAY,CAACnC;AAHf,OAApB;AAMA;;AAED,QAAIiD,IAAI,GAAGrF,KAAK,CAACsE,OAAN,CAAce,IAAzB;;AACA,QAAG,CAACxB,SAAD,IAAcwB,IAAI,CAACpF,KAAL,GAAaA,KAA3B,IAAoCoF,IAAI,CAAC3B,MAA5C,EAAmD;AAClDxD,MAAAA,QAAQ,CAACmF,IAAI,CAACpF,KAAN,CAAR;AACAgE,MAAAA,SAAS,CAACxD,MAAD,CAAT;AACA,KAHD,MAGM,IAAG,CAACoD,SAAD,IAAcwB,IAAI,CAACpF,KAAL,GAAaA,KAA3B,IAAoC,CAACoF,IAAI,CAAC3B,MAA7C,EAAoD;AACzDxD,MAAAA,QAAQ,CAACmF,IAAI,CAACpF,KAAN,CAAR;AACA;;AAED,WAAO,MAAM;AACZ4D,MAAAA,SAAS,GAAG,IAAZ;AACA,KAFD;AAGG,GAhDK,EAgDJ,CAAC7D,KAAK,CAACsE,OAAP,CAhDI,CAAT;;AAmDA,QAAMgB,aAAa,GAAGnD,GAAG,IAAG;AAC3B8B,IAAAA,SAAS,CAACxD,MAAD,CAAT;AACA,GAFD;;AAMA,QAAM8E,QAAQ,GAAGpD,GAAG,IAAG;AACtB8C,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAuB/C,GAAvB;AAEA,QAAIqD,IAAI,GAAGrD,GAAG,CAACsD,GAAf;AAIA,QAAIC,MAAM,GAAG;AACZ,cAAQvD,GAAG,CAACwD,IADA;AAEZ,eAASxD,GAAG,CAACiD,KAFD;AAGZ,eAASjD,GAAG,CAACyD,KAHD;AAIZ,gBAAUzD,GAAG,CAAC0D,MAJF;AAKZ,aAAQL,IALI;AAMZ,cAASrD,GAAG,CAAC2D,IAND;AAOZ,cAAS3D,GAAG,CAAC4D,IAPD;AAQZ,gBAAW5D,GAAG,CAAC6D,MARH;AASZ,eAAU7D,GAAG,CAAC8D,KATF;AAUZ,cAAS9D,GAAG,CAAC+D;AAVD,KAAb;AAaA,UAAM1D,QAAQ,GAAGD,iBAAiB,CAACmD,MAAD,CAAlC;AACAT,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAyB1C,QAAzB;AACAtB,IAAAA,QAAQ,CAAC;AAAEmB,MAAAA,IAAI,EAAE,kBAAR;AAA6BC,MAAAA,OAAO,EAAEE,QAAtC;AAAiD2D,MAAAA,OAAO,EAAGnG;AAA3D,KAAD,CAAR;AACA,GAvBD;;AAyBA,QAAMoG,YAAY,GAAG,MAAOC,CAAP,IAAY;AAChC,QAAIlD,KAAK,GAAGkD,CAAC,CAACnD,MAAF,CAASC,KAArB;;AAIA,QAAGA,KAAK,CAACP,MAAN,KAAiB,CAApB,EAAuB;AAEtB,YAAMY,GAAG,GAAG,MAAM/D,KAAK,CAAC6G,GAAN,CAAW,wCAAuCnD,KAAM,EAAxD,CAAlB;;AAGA,UAAGK,GAAG,CAACH,IAAJ,CAAS,CAAT,EAAYkD,UAAZ,IAA0B,IAA1B,IAAkC/C,GAAG,CAACH,IAAJ,CAAS,CAAT,EAAYkD,UAAZ,IAA0BC,SAA5D,IAAyEhD,GAAG,CAACH,IAAJ,CAAS,CAAT,EAAYkD,UAAZ,IAA0B,EAAtG,EAA0G;AAEzG,YAAIE,YAAY,GAAGjD,GAAG,CAACH,IAAJ,CAAS,CAAT,EAAYkD,UAAZ,CAAuB,CAAvB,CAAnB;AACApF,QAAAA,IAAI,CAAC2D,cAAL,CAAoB;AACnBoB,UAAAA,IAAI,EAACO,YAAY,CAACC,QADC;AAEnBT,UAAAA,KAAK,EAAEQ,YAAY,CAACE;AAFD,SAApB;AAIA;AACD;AACC,GAnBH;;AAsBE1B,EAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAAyB,CAAArE,UAAU,SAAV,IAAAA,UAAU,WAAV,YAAAA,UAAU,CAAE8D,KAAZ,MAAsB,UAA/C;AAED,sBACD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,SAAD;AAAW,IAAA,IAAI,EAAE3E,KAAK,CAAC4G,OAAN,CAAcC,MAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,eAEC,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEC,MAAAA,KAAK,EAAE;AAAT,KAAb;AAAgC,IAAA,KAAK,EAAC,SAAtC;AAAgD,IAAA,SAAS,EAAE;AAACC,MAAAA,OAAO,EAAC;AAAT,KAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,KAAD;AACC,IAAA,KAAK,EAAE,GADR;AAEC,IAAA,MAAM,EAAE,GAFT;AAGC,IAAA,GAAG,EAAEpG,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK6F,SAA9B,GAA0C,0EAA1C,GAAuH7F,MAH7H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,eAMC,oBAAC,IAAD;AAAM,IAAA,IAAI,EAAC,cAAX;AAA0B,IAAA,IAAI,EAAEQ,IAAhC;AAAsC,IAAA,SAAS,EAAC,iBAAhD;AAAkE,IAAA,aAAa,EAAE;AAAE6F,MAAAA,QAAQ,EAAE;AAAZ,KAAjF;AAAsG,IAAA,QAAQ,EAAEzB,QAAhH;AAA0H,IAAA,MAAM,EAAE,UAAlI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,GAAD;AAAK,IAAA,MAAM,EAAE,EAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEC,oBAAC,GAAD;AAAM,IAAA,EAAE,EAAE,EAAV;AAAc,IAAA,EAAE,EAAE,EAAlB;AAAsB,IAAA,EAAE,EAAE,EAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,IAAD,CAAM,IAAN;AAAW,IAAA,IAAI,EAAC,MAAhB;AAAuB,IAAA,KAAK,EAAC,MAA7B;AAAoC,IAAA,KAAK,EAAE,CAAE;AAAE0B,MAAAA,QAAQ,EAAE,IAAZ;AAAkB/H,MAAAA,OAAO,EAAE;AAA3B,KAAF,CAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,KAAD;AAAO,IAAA,WAAW,EAAC,MAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,CADD,CAFD,eAOC,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE,EAAT;AAAa,IAAA,EAAE,EAAE,EAAjB;AAAqB,IAAA,EAAE,EAAE,EAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,IAAD,CAAM,IAAN;AAAW,IAAA,IAAI,EAAC,OAAhB;AAAwB,IAAA,KAAK,EAAC,OAA9B;AAAsC,IAAA,KAAK,EAAE,CAAE;AAAE+H,MAAAA,QAAQ,EAAE,IAAZ;AAAkB/H,MAAAA,OAAO,EAAE;AAA3B,KAAF,CAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,KAAD;AAAO,IAAA,WAAW,EAAC,OAAnB;AAA2B,IAAA,QAAQ,MAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,CADD,CAPD,eAYC,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE,EAAT;AAAa,IAAA,EAAE,EAAE,EAAjB;AAAqB,IAAA,EAAE,EAAE,EAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAGE,oBAAC,IAAD,CAAM,IAAN;AAAW,IAAA,KAAK,EAAC,eAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,GAAD;AAAK,IAAA,MAAM,EAAE,EAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE,EAAT;AAAa,IAAA,IAAI,EAAE,EAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,IAAD,CAAM,IAAN;AAAW,IAAA,IAAI,EAAC,eAAhB;AAAgC,IAAA,KAAK,EAAE,CAAC;AAAE+H,MAAAA,QAAQ,EAAE,IAAZ;AAAkB/H,MAAAA,OAAO,EAAE;AAA3B,KAAD,CAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,KAAD;AAAO,IAAA,QAAQ,MAAf;AAAgB,IAAA,WAAW,EAAC,eAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CADD,CADD,eAMC,oBAAC,GAAD;AAAM,IAAA,EAAE,EAAE,EAAV;AAAc,IAAA,IAAI,EAAE,EAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG4C,cAAc,KAAK,IAApB,GAA4B,EAA5B,gBACD,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,SAAb;AAAuB,IAAA,SAAS,EAAC,2BAAjC;AAA6D,IAAA,OAAO,EAAEI,kBAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFD,CAND,CADD,CAHF,CAZD,EA+BH,CAAArB,UAAU,SAAV,IAAAA,UAAU,WAAV,YAAAA,UAAU,CAAE8D,KAAZ,MAAsB,UAAtB,iBACD,uDACA,oBAAC,GAAD;AAAM,IAAA,EAAE,EAAE,EAAV;AAAc,IAAA,EAAE,EAAE,EAAlB;AAAsB,IAAA,EAAE,EAAE,EAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACM,oBAAC,IAAD,CAAM,IAAN;AAAW,IAAA,IAAI,EAAC,aAAhB;AAA8B,IAAA,KAAK,EAAC,aAApC;AAAkD,IAAA,KAAK,EAAE,CAAE;AAAEsC,MAAAA,QAAQ,EAAE,IAAZ;AAAkB/H,MAAAA,OAAO,EAAE;AAA3B,KAAF,CAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,KAAD;AAAO,IAAA,WAAW,EAAC,mBAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,CADN,CADA,eAaG,oBAAC,GAAD;AAAM,IAAA,EAAE,EAAE,EAAV;AAAc,IAAA,EAAE,EAAE,EAAlB;AAAsB,IAAA,EAAE,EAAE,EAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACG,oBAAC,IAAD,CAAM,IAAN;AAAW,IAAA,IAAI,EAAC,SAAhB;AAA0B,IAAA,KAAK,EAAC,gBAAhC;AAAiD,IAAA,KAAK,EAAE,CAAE;AAAE+H,MAAAA,QAAQ,EAAE,IAAZ;AAAkB/H,MAAAA,OAAO,EAAE;AAA3B,KAAF,CAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,KAAD;AAAO,IAAA,WAAW,EAAC,sBAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,CADH,CAbH,eAoBK,oBAAC,GAAD;AAAM,IAAA,EAAE,EAAE,EAAV;AAAc,IAAA,EAAE,EAAE,EAAlB;AAAsB,IAAA,EAAE,EAAE,EAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,IAAD,CAAM,IAAN;AAAW,IAAA,IAAI,EAAC,WAAhB;AACA,IAAA,KAAK,eAAE,uDAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAF,MADP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIEmB,UAAU,CAACuC,MAAX,GAAmB,CAAnB,IAAwBvC,UAAU,CAAC6G,GAAX,CAAe,CAACC,IAAD,EAAOC,KAAP,KACvCD,IAAI,CAACE,IAAL,gBAAY,oBAAC,MAAD;AAAQ,IAAA,GAAG,EAAED,KAAb;AAAoB,IAAA,KAAK,EAAC,QAA1B;AAAmC,IAAA,IAAI,EAAE,GAAzC;AAA8C,IAAA,GAAG,EAAED,IAAI,CAACE,IAAxD;AAA+D,IAAA,KAAK,EAAE;AAACC,MAAAA,MAAM,EAAC;AAAR,KAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAZ,gBACA,oBAAC,MAAD;AAAQ,IAAA,GAAG,EAAEF,KAAb;AAAoB,IAAA,KAAK,EAAC,QAA1B;AAAmC,IAAA,IAAI,EAAE,GAAzC;AAA8C,IAAA,GAAG,EAAEzH,OAAO,CAACC,GAAR,CAAYC,gBAAZ,GAA6B,GAA7B,GAAkCsH,IAAI,CAACI,GAA1F;AAA+F,IAAA,KAAK,EAAE;AAAED,MAAAA,MAAM,EAAE;AAAV,KAAtG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFwB,CAJ1B,EASEjH,UAAU,CAACuC,MAAX,GAAoB,CAApB,gBAAwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAN,eAAY,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAE,MAAMtC,aAAa,CAAC,EAAD,CAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAZ,aAAxB,GAAmH,EATrH,EAUED,UAAU,CAACuC,MAAX,GAAoB,CAApB,iBAAyB,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAE,MAAMpC,UAAU,CAAC,IAAD,CAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAV3B,CADD,CApBL,CAhCI,CADD,eA0EC,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,SAAb;AAAuB,IAAA,QAAQ,EAAC,QAAhC;AAAyC,IAAA,SAAS,EAAC,uCAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADD,CA1ED,CAND,CAFD,eA8FC,oBAAC,KAAD;AACC,IAAA,KAAK,EAAE,GADR;AAEC,IAAA,OAAO,EAAEwB,kBAFV;AAGC,IAAA,KAAK,EAAC,oBAHP;AAIC,IAAA,MAAM,EAAE,IAJT;AAKC,IAAA,QAAQ,EAAEe,YALX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAOE;AAAK,IAAA,KAAK,EAAE;AAAEyE,MAAAA,SAAS,EAAC,QAAZ;AAAqBC,MAAAA,YAAY,EAAE;AAAnC,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mEACyD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAK7F,UAAL,CADzD,0DAPF,eAUE,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAC,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,IAAD,CAAM,IAAN;AAAW,IAAA,IAAI,EAAC,KAAhB;AAAsB,IAAA,KAAK,EAAE,CAAE;AAAEqF,MAAAA,QAAQ,EAAE,IAAZ;AAAkB/H,MAAAA,OAAO,EAAE;AAA3B,KAAF,CAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,KAAD;AAAO,IAAA,MAAM,eAAE,oBAAC,YAAD;AAAc,MAAA,SAAS,EAAC,qBAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAf;AAAiE,IAAA,QAAQ,EAAGmH,CAAD,IAAOrD,eAAe,CAACqD,CAAD,CAAjG;AAAsG,IAAA,WAAW,EAAC,iBAAlH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CADD,eAIC,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,SAAb;AAAuB,IAAA,QAAQ,EAAC,QAAhC;AAAyC,IAAA,SAAS,EAAC,mBAAnD;AAAuE,IAAA,OAAO,EAAE,MAAMjD,eAAe,EAArG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADD,CAJD,CAVF,CA9FD,EAmHE7C,OAAO,iBACP,oBAAC,YAAD;AAAc,IAAA,OAAO,EAAEA,OAAvB;AAAgC,IAAA,QAAQ,EAAE,MAAMC,UAAU,CAAC,KAAD,CAA1D;AACA,IAAA,SAAS,EACR2B,GAAG,IACH;AACC7B,MAAAA,aAAa,CAAC6B,GAAD,CAAb;AACA,KALF;AAMC,IAAA,QAAQ,EAAE9B,UANX;AAMuB,IAAA,KAAK,EAAE,IAAIA,UAAU,CAACuC,MAN7C;AAMsD,IAAA,MAAM,EAAE,IAAE,EANhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IApHF,CADC;AA+HD,CA5UD;;AA8UA,eAAetE,OAAO,CAAC;AAAA,MAAC;AAACgG,IAAAA,OAAD;AAAUsC,IAAAA;AAAV,GAAD;AAAA,SAAyB;AAC/CtC,IAAAA,OAD+C;AACtCsC,IAAAA;AADsC,GAAzB;AAAA,CAAD,CAAP,CAEX7G,OAFW,CAAf","sourcesContent":["import React, {useState, Component, useEffect } from 'react';\r\nimport Apploader from './../../components/loader/loader'\r\nimport { connect } from 'dva';\r\nimport moment from 'moment';\r\nimport {Row, Col, Form, Input, Button,DatePicker, Card, Radio, Modal, Upload, message, Avatar, Image  } from 'antd';\r\nimport UploadImages from '../../components/sharing/upload-images'\r\nimport { LoadingOutlined, PlusOutlined, UserOutlined } from '@ant-design/icons';\r\nimport axios from 'axios';\r\nconst baseUrl = process.env.REACT_APP_ApiUrl;\r\n\r\nconst dateFormat = 'MM/DD/YYYY';\r\n\r\nconst Account = props => {\r\n\tconst [count, setCount] = useState(0)\r\n\tconst [dcount, setDcount] = useState(0)\r\n\tconst [imagesList, setImagesList] = useState([]);\r\n\tconst [visible, setVisible] = useState(false);\r\n\tconst [userId, setUserId] = useState('');\r\n\tconst [avatar, setAvatar] = useState('');\r\n\tconst [detailData, setDetailData] = useState({})\r\n\tconst role = useState(localStorage.getItem('role'))\r\n\tconst { dispatch } = props;\r\n\tconst [form] = Form.useForm();\r\n\tconst [myMobileNoOTP, setMyMobileNoOTP] = useState('');\r\n\r\n\tconst [modalVisible, setModalVisible] = useState(false);\r\n\tlet user_data = JSON.parse(localStorage.getItem('user'));\r\n\tconst [myMobileNo, setMyMobileNo] = useState('');\r\n\tconst [isMobileVerify, setIsMobileVerified] = useState(false);\r\n\tconst [modalVerifyVisible, setModalVerifyVisible] = useState(false);\r\n\r\n\tconst openModalForVerify = () => {\r\n\t\tlet val = { mobile_number:myMobileNo };\r\n\t\tdispatch({ type: 'setting/resendOTPTOUser', payload: val, });\r\n\t\tsetModalVerifyVisible(true);\r\n\t}\r\n\r\n\r\n\tconst convertToFormData = (val) => {\r\n\t\tconst formData = new FormData();\r\n\t\r\n\t\tfor(const key in val) {\r\n\r\n\t\t\t\tformData.append(key,val[key])\r\n\t\t\t\r\n\t\t}\r\n\t\tif(imagesList.length > 0 && imagesList[0].file) {\r\n\t\t\r\n\t\t\tformData.append(\"file\",imagesList[0].file);\r\n\t\t}  \r\n\t\r\n\t\treturn formData;\r\n\t}\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tlet mobile_verified = localStorage.getItem('isMobileVerified');\r\n\t\tif(mobile_verified == 'false' || mobile_verified == false) {\r\n\t\t\tsetIsMobileVerified(false);\r\n\t\t}else {\r\n\t\t\tsetIsMobileVerified(true);\r\n\t\t}\r\n\t}, [])\r\n\r\n\r\n\tconst handleCancel = () => {\r\n\t\tsetModalVisible(false);\r\n\t\tsetModalVerifyVisible(false);\r\n\t}\r\n\r\n\tconst changeMobileOTP = (event) =>{\r\n\t\tsetMyMobileNoOTP(event.target.value);\r\n\t}\r\n\r\n\tconst addMobileVerify = async () => {\r\n\r\n\t\tlet data = {\r\n\t\t\totp : myMobileNoOTP, \r\n\t\t\tmobile: myMobileNo,\r\n\t\t};\r\n\t\t\r\n\t\tconst res = await axios.post(`${baseUrl}/is-mobile/verified`,  data);\r\n\t\tif(res.data.status === true) {\r\n\t\t\talert(res.data.message);\r\n\t\t\tlocalStorage.setItem('isMobileVerified', true);\r\n\t\t\tsetModalVerifyVisible(false);\r\n\t\t\tsetIsMobileVerified(true);\r\n\t\t}else {\r\n\t\t\talert(res.data.message);\r\n\t\t\treturn; \r\n\t\t}\r\n\t\t// console.log(res);\t\r\n\t}\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tlet myMobileNo = user_data.mobile;\r\n\t\tsetMyMobileNo(myMobileNo);\r\n\r\n\t\tlet unmounted = false;\r\n\t\tsetTimeout(()=>document.title = 'Setting', 100);\r\n\t\tdispatch({type: 'account/clearAction'});\r\n\t\tsetUserId(localStorage.getItem('userId'))\r\n\t\tgetDetail(localStorage.getItem('userId'))\r\n\t\treturn () => {\r\n\t\t\tunmounted = true;\r\n\t\t}\r\n    },[dispatch])\r\n\r\n\tconst getDetail=(id)=> dispatch({ type: 'account/getDetail',  payload: { _id:id, profile_id: id },});\r\n\t\r\n\tuseEffect(() => {\r\n\r\n\t\tlet unmounted = false;\r\n\t\tlet detail = props.account.detail;\t\r\n\t\tif(!unmounted && detail.count > dcount && detail.status){\r\n\t\t\tsetDcount(detail.count);\r\n\t\t\tlet profile_data = props.account.detail ? props.account.detail.profile : {};\r\n\t\t\tlet userLoginData = props.account.detail ? props.account.detail.userLogin : {};\r\n\t\t\tsetDetailData(userLoginData);\r\n\t\t\tif(userLoginData.roles === 'SUBADMIN'){\r\n\t\t\t\tsetAvatar(profile_data?.schoolDetail?.media);\r\n\t\t\t\t\tform.setFieldsValue({\r\n\t\t\t\t  ['school_name']:profile_data?.schoolDetail?.school_name, \r\n\t\t\t\t  ['address']: profile_data?.schoolDetail?.address, \r\n\t\t\t\t//   ['mobile_number']: profile_data.mobile_number, \r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t\r\n\t\t\r\n\t\t\r\n\r\n\r\n\t\t\t}else{\r\n\t\t\t\tsetAvatar(userLoginData.avatar);\r\n\r\n\t\t\t}\r\n\t\tconsole.log(profile_data)\r\n\r\n\t\t\r\n\t\t\tform.setFieldsValue({\r\n\t\t\t\t  ['name']: userLoginData.username, \r\n\t\t\t\t  ['email']: userLoginData.email, \r\n\t\t\t\t  ['mobile_number']: profile_data.mobile_number, \r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tlet edit = props.account.edit;\t\t\r\n\t\tif(!unmounted && edit.count > count && edit.status){\r\n\t\t\tsetCount(edit.count);\r\n\t\t\tgetDetail(userId);\r\n\t\t}else if(!unmounted && edit.count > count && !edit.status){\r\n\t\t\tsetCount(edit.count);\r\n\t\t}\r\n\t\t\r\n\t\treturn () => {\r\n\t\t\tunmounted = true;\r\n\t\t}\r\n    },[props.account])\r\n\t\r\n\t\r\n\tconst verifyFormFun = val =>{\r\n\t\tgetDetail(userId);\r\n\t}\r\n\r\n\t\r\n\r\n\tconst onFinish = val =>{\r\n\t\tconsole.log('onFinish',val);\r\n\r\n\t\tlet date = val.dob\r\n\r\n\r\n\r\n\t\tlet values = {\r\n\t\t\t\"name\": val.name ,\r\n\t\t\t\"email\": val.email,\r\n\t\t\t\"phone\": val.phone,\r\n\t\t\t\"gender\": val.gender,\r\n\t\t\t\"dob\" : date, \r\n\t\t\t\"add1\" : val.add1, \r\n\t\t\t\"add2\" : val.add2, \r\n\t\t\t\"postal\" : val.postal, \r\n\t\t\t\"state\" : val.state, \r\n\t\t\t\"city\" : val.city, \r\n\t\t}\r\n\r\n\t\tconst formData = convertToFormData(values);\r\n\t\tconsole.log(\"formData\" , formData)\r\n\t\tdispatch({ type: 'account/editItem',  payload: formData , history : props});\r\n\t}\r\n\t\r\n\tconst handlePostal = async (e) =>{\r\n\t\tlet value = e.target.value;\r\n\r\n\t\t\r\n\r\n\t\tif(value.length === 6) {\r\n\t\t\t\r\n\t\t\tconst res = await axios.get(`https://api.postalpincode.in/pincode/${value}`)\r\n\r\n\r\n\t\t\tif(res.data[0].PostOffice != null && res.data[0].PostOffice != undefined && res.data[0].PostOffice != \"\") {\r\n\r\n\t\t\t\tlet pincode_data = res.data[0].PostOffice[0];\r\n\t\t\t\tform.setFieldsValue({\r\n\t\t\t\t\tcity:pincode_data.District,\r\n\t\t\t\t\tstate: pincode_data.State,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t  }\r\n\r\n\r\n\t  console.log('detailData',detailData?.roles === \"SUBADMIN\")\r\n\r\n  return (\r\n\t<div>\r\n\t\t<Apploader show={props.loading.global}/>\r\n\t\t<Card style={{ width: '100%' }} title=\"Account\" bodyStyle={{padding:'20px 20px'}}>\r\n\t\t<Image\r\n\t\t\twidth={200}\r\n\t\t\theight={200}\r\n\t\t\tsrc={avatar === null || avatar === undefined ? 'https://upload.wikimedia.org/wikipedia/commons/9/99/Sample_User_Icon.png' : avatar}\r\n\t\t\t/>\r\n\t\t\t<Form name=\"normal_login\" form={form} className=\"full-width-form\" initialValues={{ remember: true, }} onFinish={onFinish} layout={'vertical'}>\r\n\t\t\t\t<Row gutter={16}>\r\n\t\t\t\t\r\n\t\t\t\t\t<Col  xs={24} sm={24} md={12}>\r\n\t\t\t\t\t\t<Form.Item name=\"name\" label=\"Name\" rules={[ { required: true, message: 'Please input your Name!', }, ]} >\r\n\t\t\t\t\t\t<Input placeholder=\"Name\" />\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col xs={24} sm={24} md={12}>\r\n\t\t\t\t\t\t<Form.Item name=\"email\" label=\"Email\" rules={[ { required: true, message: 'Field required!', }, ]} >\r\n\t\t\t\t\t\t<Input placeholder=\"Email\" disabled/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col xs={24} sm={24} md={12}>\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t<Form.Item label=\"Mobile Number\">\r\n\t\t\t\t\t\t\t\t<Row gutter={12}>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} span={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item name=\"mobile_number\" rules={[{ required: true, message: 'Field required!', },]}  >\r\n\t\t\t\t\t\t\t\t\t\t\t<Input disabled placeholder=\"mobile_number\"  />\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col  xs={12} span={12}>\t\r\n\t\t\t\t\t\t\t\t\t{ (isMobileVerify === true) ? '' :\r\n\t\t\t\t\t\t\t\t\t\t<Button type=\"primary\" className=\"btn-w25 mobile_verify_btn\" onClick={openModalForVerify} >Verify</Button>\r\n\t\t\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t</Col>\r\n{detailData?.roles === \"SUBADMIN\" &&\r\n<>\r\n<Col  xs={24} sm={24} md={12}>\r\n\t\t\t\t\t\t<Form.Item name=\"school_name\" label=\"School Name\" rules={[ { required: true, message: 'Please input your school name!', }, ]} >\r\n\t\t\t\t\t\t<Input placeholder=\"Enter School Name\" />\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\r\n\r\n\t\t\t\t\r\n\r\n\t\t\t<Col  xs={24} sm={24} md={12}>\r\n\t\t\t\t\t\t<Form.Item name=\"address\" label=\"School Address\" rules={[ { required: true, message: 'Please input your school address!', }, ]} >\r\n\t\t\t\t\t\t<Input placeholder=\"Enter School Address\" />\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\r\n\r\n\t\t\t\t\t<Col  xs={24} sm={24} md={12}>\r\n\t\t\t\t\t\t<Form.Item name=\"thumbnail\" \r\n\t\t\t\t\t\tlabel={<><span> School Logo </span> </>} \r\n\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{imagesList.length >0 && imagesList.map((item, index) => \r\n\t\t\t\t\t\t\t\titem.urls ? <Avatar key={index} shape=\"square\" size={150} src={item.urls } style={{margin:5}} /> :\r\n\t\t\t\t\t\t\t\t<Avatar key={index} shape=\"square\" size={150} src={process.env.REACT_APP_ApiUrl+'/'+ item.url} style={{ margin: 5 }} />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t{imagesList.length > 0 ? <span><br /><Button onClick={() => setImagesList([])}>Remove</Button>&nbsp;&nbsp;</span> : ''}\r\n\t\t\t\t\t\t\t{imagesList.length < 0 && <Button onClick={() => setVisible(true)}> Upload Logo </Button>}\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col></>\r\n}\r\n\r\n\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t</Row>\r\n\t\t\t\t\r\n\t\t\t\t<Form.Item>\r\n\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button bg-success border-0\">Update</Button>\r\n\t\t\t\t\t\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t</Form>\r\n\t\t\t\r\n        </Card>\r\n\r\n\r\n\r\n\r\n\r\n\t\t<Modal\r\n\t\t\twidth={400}\r\n\t\t\tvisible={modalVerifyVisible}\r\n\t\t\ttitle='Verify Your Mobile'\r\n\t\t\tfooter={null}\r\n\t\t\tonCancel={handleCancel} >\r\n\t\t\t\t\r\n\t\t\t\t<div style={{ textAlign:'center',marginBottom: '1rem'}}>\r\n              \t\tA OTP ( One Time Password ) has been sent to <b>{ myMobileNo }</b> . Please enter the OTP in the field below to verify. \r\n\t\t\t\t</div>\r\n\t\t\t\t<Form className=\"login-form\" >\r\n\t\t\t\t\t<Form.Item name=\"otp\" rules={[ { required: true, message: 'Please input your Otp!', }, ]} >\r\n\t\t\t\t\t\t<Input prefix={<UserOutlined className=\"site-form-item-icon\" />} onChange={(e) => changeMobileOTP(e)} placeholder=\"OTP Enter Here!\" />\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item>\r\n\t\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\" onClick={() => addMobileVerify()}> Verify </Button>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t</Form>\r\n\t\t</Modal>\r\n\r\n\t\t{\r\n\t\t\tvisible && \r\n\t\t\t<UploadImages visible={visible} closeFun={() => setVisible(false)} \r\n\t\t\treturnImg={\r\n\t\t\t\tval => \r\n\t\t\t\t{ \r\n\t\t\t\t\tsetImagesList(val);\r\n\t\t\t\t}} \r\n\t\t\t\tresetVal={imagesList} limit={5 - imagesList.length}  aspect={9/12}\r\n\t\t\t />}\r\n\t</div>\r\n  );\r\n};\r\n\r\nexport default connect(({account, loading}) => ({\r\n\taccount, loading\r\n}))(Account);"]},"metadata":{},"sourceType":"module"}