{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kalyansingh/Desktop/Project/cicd/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kalyansingh/Desktop/Project/cicd/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/kalyansingh/Desktop/Project/cicd/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// import React, { useState, useEffect } from 'react';\n// // import CheckoutForm from './CheckoutForm';\n// import StripeCheckout from 'react-stripe-checkout';\n// import axios from 'axios';\n// // import { Alert } from 'antd';\n// const baseUrl = process.env.REACT_APP_ApiUrl;\n// const PaymentPage = (props) => {\n// \tuseEffect(() => {\n// \t\tlocalStorage.removeItem(\"stripe_screen\", \"true\");\n// \t}, [])\n// \tconst handleToken = async (token, addresses) => {\n//         let user = JSON.parse(localStorage.getItem(\"user\"))\n//         const res = await axios.post(`${baseUrl}/api/stripe-pay`, { token, addresses, user });\n//         if(res.data.status) {\n//             alert(res.data.message)\n//             props.history.push('/login');\n//         }else {\n//             alert(\"Something Weny Wrong\")\n//         }\n//     }\n// \treturn (\n// \t\t<div className=\"container\">\n// \t\t\t<div className=\"py-5 text-center\">\n// \t\t\t\t<h4>Stripe Payment </h4>\n// \t\t\t</div>\n// \t\t\t<div className=\"row s-box\">\n// \t\t\t\t<div className=\"col-md-5 order-md-2 mb-4\">\n// \t\t\t\t</div>\n// \t\t\t\t<div className=\"col-md-7 order-md-1\">\n// \t\t\t\t\t{/* <CheckoutForm amount={2000} setPaymentCompleted={setPaymentCompleted} /> */}\n// \t\t\t\t\t<React.Fragment>\n// \t\t\t\t\t\t<h4 className=\"d-flex justify-content-between align-items-center mb-3\">\n// \t\t\t\t\t\t\t<span className=\"text-muted\">Pay with card</span>\n// \t\t\t\t\t\t</h4>\n// \t\t\t\t\t\t<StripeCheckout\n// \t\t\t\t\t\t\tstripeKey='pk_test_51Iug0ySBeksr324AnMsGUjac2svTFYwB40ldkaFwrNbn88BX5cK4cjgzTTWE9jVjP6OSEfRMcdyGDePVCmVKPYOC00wh7XcBk7'\n// \t\t\t\t\t\t\ttoken={handleToken}\n// \t\t\t\t\t\t\tbillingAddress\n// \t\t\t\t\t\t\tshippingAddress\n// \t\t\t\t\t\t\tamount={20 * 100}\n// \t\t\t\t\t\t/>\n// \t\t\t\t\t</React.Fragment>\n// \t\t\t\t</div>\n// \t\t\t</div>\n// \t\t</div>\n// \t)\n// }\n// export default PaymentPage;\nimport React,{useState,useEffect,useRef}from'react';// import CheckoutForm from './CheckoutForm';\nimport StripeCheckout from'react-stripe-checkout';import axios from'axios';import Apploader from'../../components/loader/loader';// import { Alert } from 'antd';\nimport{message}from'antd';var baseUrl=process.env.REACT_APP_ApiUrl;var PaymentPage=function PaymentPage(props){var buttonClickRef=useRef();var _useState=useState(),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),price=_useState6[0],setPrice=_useState6[1];useEffect(function(){getToken();localStorage.removeItem(\"stripe_screen\",\"true\");},[]);var getToken=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _res$data,_res$data$price;var user,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:user=JSON.parse(localStorage.getItem(\"user\"));_context.next=3;return axios.get(\"\".concat(baseUrl,\"/api/stripe/price\"));case 3:res=_context.sent;setPrice(res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:(_res$data$price=_res$data.price)===null||_res$data$price===void 0?void 0:_res$data$price.plan_price);// buttonClickRef.current.onClick()\nsetUser(user);case 6:case\"end\":return _context.stop();}}},_callee);}));return function getToken(){return _ref.apply(this,arguments);};}();var handleToken=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(token,addresses){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(true);_context2.next=3;return axios.post(\"\".concat(baseUrl,\"/api/stripe-pay\"),{token:token,addresses:addresses,user:user});case 3:res=_context2.sent;if(res.data.status){setLoading(false);message.success(res.data.message,5);props.history.push('/login');}else{setLoading(false);message.error(\"Something Went Wrong\",5);}case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function handleToken(_x,_x2){return _ref2.apply(this,arguments);};}();var add_click=true;return/*#__PURE__*/React.createElement(\"div\",{style:{backgroundColor:\"#eef\",height:'100vh'}},/*#__PURE__*/React.createElement(Apploader,{show:loading}),/*#__PURE__*/React.createElement(\"div\",{className:\"py-5 text-center\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Stripe Payment\"),/*#__PURE__*/React.createElement(\"h4\",{className:\"text-success\"},\"$\",price)),/*#__PURE__*/React.createElement(\"div\",{className:\"row s-box\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(StripeCheckout,{stripeKey:\"pk_test_51Iug0ySBeksr324AnMsGUjac2svTFYwB40ldkaFwrNbn88BX5cK4cjgzTTWE9jVjP6OSEfRMcdyGDePVCmVKPYOC00wh7XcBk7\",token:handleToken,billingAddress:true,shippingAddress:true,email:user===null||user===void 0?void 0:user.email,amount:price*100,ref:buttonClickRef},/*#__PURE__*/React.createElement(\"center\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-lg btn-primary\"},\"Proceed To Pay\")))))));};export default PaymentPage;","map":{"version":3,"sources":["/Users/kalyansingh/Desktop/Project/cicd/admin-vivaquad/src/pages/payments/payment.js"],"names":["React","useState","useEffect","useRef","StripeCheckout","axios","Apploader","message","baseUrl","process","env","REACT_APP_ApiUrl","PaymentPage","props","buttonClickRef","user","setUser","loading","setLoading","price","setPrice","getToken","localStorage","removeItem","JSON","parse","getItem","get","res","data","plan_price","handleToken","token","addresses","post","status","success","history","push","error","add_click","backgroundColor","height","email"],"mappings":"ogBAAA;AACA;AACA;AACA;AACA;AAEA;AAIA;AAGA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AAEA;AAGA;AACA;AAGA;AAEA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,MAArC,KAAmD,OAAnD,CACA;AACA,MAAOC,CAAAA,cAAP,KAA2B,uBAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,gCAAtB,CACA;AACA,OAASC,OAAT,KAAwB,MAAxB,CAEA,GAAMC,CAAAA,OAAO,CAAGC,OAAO,CAACC,GAAR,CAAYC,gBAA5B,CAIA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAW,CAE9B,GAAMC,CAAAA,cAAc,CAAGX,MAAM,EAA7B,CACA,cAAwBF,QAAQ,EAAhC,wCAAOc,IAAP,eAAaC,OAAb,eACA,eAA8Bf,QAAQ,CAAC,KAAD,CAAtC,yCAAOgB,OAAP,eAAgBC,UAAhB,eACA,eAA0BjB,QAAQ,EAAlC,yCAAOkB,KAAP,eAAcC,QAAd,eAIAlB,SAAS,CAAC,UAAM,CAEfmB,QAAQ,GACRC,YAAY,CAACC,UAAb,CAAwB,eAAxB,CAAyC,MAAzC,EAEA,CALQ,CAKN,EALM,CAAT,CAOA,GAAMF,CAAAA,QAAQ,0FAAG,8KACZN,IADY,CACLS,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACI,OAAb,CAAqB,MAArB,CAAX,CADK,uBAGErB,CAAAA,KAAK,CAACsB,GAAN,WAAanB,OAAb,sBAHF,QAGVoB,GAHU,eAIhBR,QAAQ,CAACQ,GAAD,SAACA,GAAD,4BAACA,GAAG,CAAEC,IAAN,qDAAC,UAAWV,KAAZ,0CAAC,gBAAkBW,UAAnB,CAAR,CAEA;AAIAd,OAAO,CAACD,IAAD,CAAP,CAVgB,sDAAH,kBAARM,CAAAA,QAAQ,0CAAd,CAcA,GAAMU,CAAAA,WAAW,2FAAG,kBAAOC,KAAP,CAAcC,SAAd,8HACnBf,UAAU,CAAC,IAAD,CAAV,CADmB,uBAEDb,CAAAA,KAAK,CAAC6B,IAAN,WAAc1B,OAAd,oBAAwC,CAAEwB,KAAK,CAALA,KAAF,CAASC,SAAS,CAATA,SAAT,CAAoBlB,IAAI,CAAJA,IAApB,CAAxC,CAFC,QAEba,GAFa,gBAGnB,GAAIA,GAAG,CAACC,IAAJ,CAASM,MAAb,CAAqB,CACpBjB,UAAU,CAAC,KAAD,CAAV,CAEAX,OAAO,CAAC6B,OAAR,CAAgBR,GAAG,CAACC,IAAJ,CAAStB,OAAzB,CAAkC,CAAlC,EACAM,KAAK,CAACwB,OAAN,CAAcC,IAAd,CAAmB,QAAnB,EACA,CALD,IAKO,CACNpB,UAAU,CAAC,KAAD,CAAV,CAEAX,OAAO,CAACgC,KAAR,CAAc,sBAAd,CAAsC,CAAtC,EAEA,CAbkB,wDAAH,kBAAXR,CAAAA,WAAW,iDAAjB,CAkBA,GAAMS,CAAAA,SAAS,CAAG,IAAlB,CACA,mBACC,2BAAK,KAAK,CAAE,CAAEC,eAAe,CAAE,MAAnB,CAA2BC,MAAM,CAAE,OAAnC,CAAZ,eACC,oBAAC,SAAD,EAAW,IAAI,CAAEzB,OAAjB,EADD,cAEC,2BAAK,SAAS,CAAC,kBAAf,eACC,+CADD,cAEA,0BAAI,SAAS,CAAC,cAAd,MAA+BE,KAA/B,CAFA,CAFD,cAOC,2BAAK,SAAS,CAAC,WAAf,eACC,2BAAK,SAAS,CAAC,WAAf,eACC,oBAAC,KAAD,CAAO,QAAP,mBAKC,oBAAC,cAAD,EACC,SAAS,CAAC,6GADX,CAEC,KAAK,CAAEY,WAFR,CAGC,cAAc,KAHf,CAIC,eAAe,KAJhB,CAKC,KAAK,CAAEhB,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAE4B,KALd,CAMC,MAAM,CAAExB,KAAK,CAAG,GANjB,CAOC,GAAG,CAAEL,cAPN,eASC,+CACC,8BAAQ,SAAS,CAAC,wBAAlB,mBADD,CATD,CALD,CADD,CADD,CAPD,CADD,CAsCA,CAvFD,CA0FA,cAAeF,CAAAA,WAAf","sourcesContent":["// import React, { useState, useEffect } from 'react';\n// // import CheckoutForm from './CheckoutForm';\n// import StripeCheckout from 'react-stripe-checkout';\n// import axios from 'axios';\n// // import { Alert } from 'antd';\n\n// const baseUrl = process.env.REACT_APP_ApiUrl;\n\n\n\n// const PaymentPage = (props) => {\n\n\n// \tuseEffect(() => {\n\t\t\n// \t\tlocalStorage.removeItem(\"stripe_screen\", \"true\");\n\n// \t}, [])\n\n// \tconst handleToken = async (token, addresses) => {\n//         let user = JSON.parse(localStorage.getItem(\"user\"))\n//         const res = await axios.post(`${baseUrl}/api/stripe-pay`, { token, addresses, user });\n//         if(res.data.status) {\n//             alert(res.data.message)\n//             props.history.push('/login');\n//         }else {\n//             alert(\"Something Weny Wrong\")\n//         }\n//     }\n\n\n// \treturn (\n\n// \t\t<div className=\"container\">\n// \t\t\t<div className=\"py-5 text-center\">\n// \t\t\t\t<h4>Stripe Payment </h4>\n// \t\t\t</div>\n\n// \t\t\t<div className=\"row s-box\">\n\n// \t\t\t\t<div className=\"col-md-5 order-md-2 mb-4\">\n\n// \t\t\t\t</div>\n// \t\t\t\t<div className=\"col-md-7 order-md-1\">\n\n// \t\t\t\t\t{/* <CheckoutForm amount={2000} setPaymentCompleted={setPaymentCompleted} /> */}\n\n// \t\t\t\t\t<React.Fragment>\n// \t\t\t\t\t\t<h4 className=\"d-flex justify-content-between align-items-center mb-3\">\n// \t\t\t\t\t\t\t<span className=\"text-muted\">Pay with card</span>\n// \t\t\t\t\t\t</h4>\n// \t\t\t\t\t\t<StripeCheckout\n// \t\t\t\t\t\t\tstripeKey='pk_test_51Iug0ySBeksr324AnMsGUjac2svTFYwB40ldkaFwrNbn88BX5cK4cjgzTTWE9jVjP6OSEfRMcdyGDePVCmVKPYOC00wh7XcBk7'\n// \t\t\t\t\t\t\ttoken={handleToken}\n// \t\t\t\t\t\t\tbillingAddress\n// \t\t\t\t\t\t\tshippingAddress\n// \t\t\t\t\t\t\tamount={20 * 100}\n// \t\t\t\t\t\t/>\n\n// \t\t\t\t\t</React.Fragment>\n\n// \t\t\t\t</div>\n\n// \t\t\t</div>\n\n// \t\t</div>\n\n\n// \t)\n// }\n\n\n// export default PaymentPage;\n\nimport React, { useState, useEffect, useRef } from 'react';\n// import CheckoutForm from './CheckoutForm';\nimport StripeCheckout from 'react-stripe-checkout';\nimport axios from 'axios';\nimport Apploader from '../../components/loader/loader';\n// import { Alert } from 'antd';\nimport { message } from 'antd';\n\nconst baseUrl = process.env.REACT_APP_ApiUrl;\n\n\n\nconst PaymentPage = (props) => {\n\n\tconst buttonClickRef = useRef()\n\tconst [user, setUser] = useState();\n\tconst [loading, setLoading] = useState(false);\n\tconst [price, setPrice] = useState();\n\n\n\n\tuseEffect(() => {\n\t\n\t\tgetToken();\n\t\tlocalStorage.removeItem(\"stripe_screen\", \"true\")\n\t\t\n\t}, [])\n\n\tconst getToken = async () => {\n\t\tlet user = JSON.parse(localStorage.getItem(\"user\"))\n\n\t\tconst res = await axios.get(`${baseUrl}/api/stripe/price`);\n\t\tsetPrice(res?.data?.price?.plan_price)\n\n\t\t// buttonClickRef.current.onClick()\n\t\t\n\t\t\n\n\t\tsetUser(user)\n\t}\n\n\n\tconst handleToken = async (token, addresses) => {\n\t\tsetLoading(true)\n\t\tconst res = await axios.post(`${baseUrl}/api/stripe-pay`, { token, addresses, user });\n\t\tif (res.data.status) {\n\t\t\tsetLoading(false);\n\t\n\t\t\tmessage.success(res.data.message, 5);\n\t\t\tprops.history.push('/login');\n\t\t} else {\n\t\t\tsetLoading(false);\n\t\t\t\n\t\t\tmessage.error(\"Something Went Wrong\", 5);\n\n\t\t}\n\t}\n\n\n\n\tconst add_click = true;\n\treturn (\n\t\t<div style={{ backgroundColor: \"#eef\", height: '100vh' }}>\n\t\t\t<Apploader show={loading} /> \n\t\t\t<div className=\"py-5 text-center\">\n\t\t\t\t<h4>Stripe Payment</h4>\n\t\t\t<h4 className=\"text-success\">${price}</h4>\t\n\t\t\t</div>\n\n\t\t\t<div className=\"row s-box\">\n\t\t\t\t<div className=\"col-md-12\">\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t{/* <h4 className=\"d-flex justify-content-between align-items-center mb-3\">\n\t\t\t\t\t\t\t<span className=\"text-muted\">Pay with card</span>\n\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t{console.log({ user })} */}\n\t\t\t\t\t\t<StripeCheckout\n\t\t\t\t\t\t\tstripeKey='pk_test_51Iug0ySBeksr324AnMsGUjac2svTFYwB40ldkaFwrNbn88BX5cK4cjgzTTWE9jVjP6OSEfRMcdyGDePVCmVKPYOC00wh7XcBk7'\n\t\t\t\t\t\t\ttoken={handleToken}\n\t\t\t\t\t\t\tbillingAddress\n\t\t\t\t\t\t\tshippingAddress\n\t\t\t\t\t\t\temail={user?.email}\n\t\t\t\t\t\t\tamount={price * 100}\n\t\t\t\t\t\t\tref={buttonClickRef}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<center>\n\t\t\t\t\t\t\t\t<button className=\"btn btn-lg btn-primary\">\n\t\t\t\t\t\t\t\t\tProceed To Pay\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</center>\n\t\t\t\t\t\t</StripeCheckout>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\n\t\t</div>\n\n\t)\n}\n\n\nexport default PaymentPage;"]},"metadata":{},"sourceType":"module"}