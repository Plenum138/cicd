{"ast":null,"code":"var _jsxFileName = \"/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/src/pages/payments/payment.js\";\n// import React, { useState, useEffect } from 'react';\n// // import CheckoutForm from './CheckoutForm';\n// import StripeCheckout from 'react-stripe-checkout';\n// import axios from 'axios';\n// // import { Alert } from 'antd';\n// const baseUrl = process.env.REACT_APP_ApiUrl;\n// const PaymentPage = (props) => {\n// \tuseEffect(() => {\n// \t\tlocalStorage.removeItem(\"stripe_screen\", \"true\");\n// \t}, [])\n// \tconst handleToken = async (token, addresses) => {\n//         let user = JSON.parse(localStorage.getItem(\"user\"))\n//         const res = await axios.post(`${baseUrl}/api/stripe-pay`, { token, addresses, user });\n//         if(res.data.status) {\n//             alert(res.data.message)\n//             props.history.push('/login');\n//         }else {\n//             alert(\"Something Weny Wrong\")\n//         }\n//     }\n// \treturn (\n// \t\t<div className=\"container\">\n// \t\t\t<div className=\"py-5 text-center\">\n// \t\t\t\t<h4>Stripe Payment </h4>\n// \t\t\t</div>\n// \t\t\t<div className=\"row s-box\">\n// \t\t\t\t<div className=\"col-md-5 order-md-2 mb-4\">\n// \t\t\t\t</div>\n// \t\t\t\t<div className=\"col-md-7 order-md-1\">\n// \t\t\t\t\t{/* <CheckoutForm amount={2000} setPaymentCompleted={setPaymentCompleted} /> */}\n// \t\t\t\t\t<React.Fragment>\n// \t\t\t\t\t\t<h4 className=\"d-flex justify-content-between align-items-center mb-3\">\n// \t\t\t\t\t\t\t<span className=\"text-muted\">Pay with card</span>\n// \t\t\t\t\t\t</h4>\n// \t\t\t\t\t\t<StripeCheckout\n// \t\t\t\t\t\t\tstripeKey='pk_test_51Iug0ySBeksr324AnMsGUjac2svTFYwB40ldkaFwrNbn88BX5cK4cjgzTTWE9jVjP6OSEfRMcdyGDePVCmVKPYOC00wh7XcBk7'\n// \t\t\t\t\t\t\ttoken={handleToken}\n// \t\t\t\t\t\t\tbillingAddress\n// \t\t\t\t\t\t\tshippingAddress\n// \t\t\t\t\t\t\tamount={20 * 100}\n// \t\t\t\t\t\t/>\n// \t\t\t\t\t</React.Fragment>\n// \t\t\t\t</div>\n// \t\t\t</div>\n// \t\t</div>\n// \t)\n// }\n// export default PaymentPage;\nimport React, { useState, useEffect, useRef } from 'react'; // import CheckoutForm from './CheckoutForm';\n\nimport StripeCheckout from 'react-stripe-checkout';\nimport axios from 'axios';\nimport Apploader from '../../components/loader/loader'; // import { Alert } from 'antd';\n\nimport { message } from 'antd';\nconst baseUrl = process.env.REACT_APP_ApiUrl;\n\nconst PaymentPage = props => {\n  const buttonClickRef = useRef();\n  const [user, setUser] = useState();\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    localStorage.removeItem(\"stripe_screen\", \"true\");\n    getToken();\n  }, []);\n\n  const getToken = async () => {\n    // buttonClickRef.current.onClick()\n    let user = JSON.parse(localStorage.getItem(\"user\"));\n    const res = await axios.get(`${baseUrl}/api/stripe/price`);\n    setUser(user);\n  };\n\n  const handleToken = async (token, addresses) => {\n    const res = await axios.post(`${baseUrl}/api/stripe-pay`, {\n      token,\n      addresses,\n      user\n    });\n    setLoading(true);\n\n    if (res.data.status) {\n      setLoading(false);\n      message.success(res.data.message, 5);\n      props.history.push('/login');\n    } else {\n      setLoading(false);\n      message.error(\"Something Went Wrong\", 5);\n    }\n  };\n\n  const add_click = true;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      backgroundColor: \"#eef\",\n      height: '100vh'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"py-5 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 5\n    }\n  }, \"Stripe Payment\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row s-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(StripeCheckout, {\n    stripeKey: \"pk_test_51Iug0ySBeksr324AnMsGUjac2svTFYwB40ldkaFwrNbn88BX5cK4cjgzTTWE9jVjP6OSEfRMcdyGDePVCmVKPYOC00wh7XcBk7\",\n    token: handleToken,\n    billingAddress: true,\n    shippingAddress: true,\n    email: user === null || user === void 0 ? void 0 : user.email,\n    amount: 20 * 100,\n    ref: buttonClickRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"center\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-lg btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  }, \"Proceed To Pay\")))))));\n};\n\nexport default PaymentPage;","map":{"version":3,"sources":["/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/src/pages/payments/payment.js"],"names":["React","useState","useEffect","useRef","StripeCheckout","axios","Apploader","message","baseUrl","process","env","REACT_APP_ApiUrl","PaymentPage","props","buttonClickRef","user","setUser","loading","setLoading","localStorage","removeItem","getToken","JSON","parse","getItem","res","get","handleToken","token","addresses","post","data","status","success","history","push","error","add_click","backgroundColor","height","email"],"mappings":"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","sourcesContent":["// import React, { useState, useEffect } from 'react';\n// // import CheckoutForm from './CheckoutForm';\n// import StripeCheckout from 'react-stripe-checkout';\n// import axios from 'axios';\n// // import { Alert } from 'antd';\n\n// const baseUrl = process.env.REACT_APP_ApiUrl;\n\n\n\n// const PaymentPage = (props) => {\n\n\n// \tuseEffect(() => {\n\t\t\n// \t\tlocalStorage.removeItem(\"stripe_screen\", \"true\");\n\n// \t}, [])\n\n// \tconst handleToken = async (token, addresses) => {\n//         let user = JSON.parse(localStorage.getItem(\"user\"))\n//         const res = await axios.post(`${baseUrl}/api/stripe-pay`, { token, addresses, user });\n//         if(res.data.status) {\n//             alert(res.data.message)\n//             props.history.push('/login');\n//         }else {\n//             alert(\"Something Weny Wrong\")\n//         }\n//     }\n\n\n// \treturn (\n\n// \t\t<div className=\"container\">\n// \t\t\t<div className=\"py-5 text-center\">\n// \t\t\t\t<h4>Stripe Payment </h4>\n// \t\t\t</div>\n\n// \t\t\t<div className=\"row s-box\">\n\n// \t\t\t\t<div className=\"col-md-5 order-md-2 mb-4\">\n\n// \t\t\t\t</div>\n// \t\t\t\t<div className=\"col-md-7 order-md-1\">\n\n// \t\t\t\t\t{/* <CheckoutForm amount={2000} setPaymentCompleted={setPaymentCompleted} /> */}\n\n// \t\t\t\t\t<React.Fragment>\n// \t\t\t\t\t\t<h4 className=\"d-flex justify-content-between align-items-center mb-3\">\n// \t\t\t\t\t\t\t<span className=\"text-muted\">Pay with card</span>\n// \t\t\t\t\t\t</h4>\n// \t\t\t\t\t\t<StripeCheckout\n// \t\t\t\t\t\t\tstripeKey='pk_test_51Iug0ySBeksr324AnMsGUjac2svTFYwB40ldkaFwrNbn88BX5cK4cjgzTTWE9jVjP6OSEfRMcdyGDePVCmVKPYOC00wh7XcBk7'\n// \t\t\t\t\t\t\ttoken={handleToken}\n// \t\t\t\t\t\t\tbillingAddress\n// \t\t\t\t\t\t\tshippingAddress\n// \t\t\t\t\t\t\tamount={20 * 100}\n// \t\t\t\t\t\t/>\n\n// \t\t\t\t\t</React.Fragment>\n\n// \t\t\t\t</div>\n\n// \t\t\t</div>\n\n// \t\t</div>\n\n\n// \t)\n// }\n\n\n// export default PaymentPage;\n\nimport React, { useState, useEffect, useRef } from 'react';\n// import CheckoutForm from './CheckoutForm';\nimport StripeCheckout from 'react-stripe-checkout';\nimport axios from 'axios';\nimport Apploader from '../../components/loader/loader';\n// import { Alert } from 'antd';\nimport { message } from 'antd';\n\nconst baseUrl = process.env.REACT_APP_ApiUrl;\n\n\n\nconst PaymentPage = (props) => {\n\n\tconst buttonClickRef = useRef()\n\tconst [user, setUser] = useState();\n\tconst [loading, setLoading] = useState(false);\n\n\n\tuseEffect(() => {\n\t\tlocalStorage.removeItem(\"stripe_screen\", \"true\")\n\t\tgetToken();\n\t}, [])\n\n\tconst getToken = async () => {\n\n\t\t// buttonClickRef.current.onClick()\n\t\tlet user = JSON.parse(localStorage.getItem(\"user\"))\n\t\tconst res = await axios.get(`${baseUrl}/api/stripe/price`);\n\n\t\tsetUser(user)\n\t}\n\n\n\tconst handleToken = async (token, addresses) => {\n\n\n\t\tconst res = await axios.post(`${baseUrl}/api/stripe-pay`, { token, addresses, user });\n\t\tsetLoading(true)\n\n\t\tif (res.data.status) {\n\t\t\tsetLoading(false);\n\t\n\t\t\tmessage.success(res.data.message, 5);\n\t\t\tprops.history.push('/login');\n\t\t} else {\n\t\t\tsetLoading(false);\n\t\t\t\n\t\t\tmessage.error(\"Something Went Wrong\", 5);\n\n\t\t}\n\t}\n\n\tconst add_click = true;\n\treturn (\n\t\t<div style={{ backgroundColor: \"#eef\", height: '100vh' }}>\n\t\t\t{/* <Apploader show={true} />  */}\n\t\t\t<div className=\"py-5 text-center\">\n\t\t\t\t<h4>Stripe Payment</h4>\n\t\t\t</div>\n\n\t\t\t<div className=\"row s-box\">\n\t\t\t\t<div className=\"col-md-12\">\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t{/* <h4 className=\"d-flex justify-content-between align-items-center mb-3\">\n\t\t\t\t\t\t\t<span className=\"text-muted\">Pay with card</span>\n\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t{console.log({ user })} */}\n\t\t\t\t\t\t<StripeCheckout\n\t\t\t\t\t\t\tstripeKey='pk_test_51Iug0ySBeksr324AnMsGUjac2svTFYwB40ldkaFwrNbn88BX5cK4cjgzTTWE9jVjP6OSEfRMcdyGDePVCmVKPYOC00wh7XcBk7'\n\t\t\t\t\t\t\ttoken={handleToken}\n\t\t\t\t\t\t\tbillingAddress\n\t\t\t\t\t\t\tshippingAddress\n\t\t\t\t\t\t\temail={user?.email}\n\t\t\t\t\t\t\tamount={20 * 100}\n\t\t\t\t\t\t\tref={buttonClickRef}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<center>\n\t\t\t\t\t\t\t\t<button className=\"btn btn-lg btn-primary\">\n\t\t\t\t\t\t\t\t\tProceed To Pay\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</center>\n\t\t\t\t\t\t</StripeCheckout>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\n\t\t</div>\n\n\t)\n}\n\n\nexport default PaymentPage;"]},"metadata":{},"sourceType":"module"}