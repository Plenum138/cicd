{"ast":null,"code":"import _defineProperty from\"/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,Component,useEffect}from'react';import Apploader from'./../../components/loader/loader';import{connect}from'dva';import moment from'moment';import{Row,Col,Form,Input,Button,DatePicker,Card,Radio,Modal,Upload,message,Avatar,Image}from'antd';import UploadImages from'../../components/sharing/upload-images';import{LoadingOutlined,PlusOutlined,UserOutlined}from'@ant-design/icons';import axios from'axios';var baseUrl=process.env.REACT_APP_ApiUrl;var dateFormat='MM/DD/YYYY';var Account=function Account(props){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),count=_useState2[0],setCount=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),dcount=_useState4[0],setDcount=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),imagesList=_useState6[0],setImagesList=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),visible=_useState8[0],setVisible=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),userId=_useState10[0],setUserId=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),avatar=_useState12[0],setAvatar=_useState12[1];var _useState13=useState({}),_useState14=_slicedToArray(_useState13,2),detailData=_useState14[0],setDetailData=_useState14[1];var role=useState(localStorage.getItem('role'));var dispatch=props.dispatch;var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),myMobileNoOTP=_useState16[0],setMyMobileNoOTP=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),modalVisible=_useState18[0],setModalVisible=_useState18[1];var user_data=JSON.parse(localStorage.getItem('user'));var _useState19=useState(''),_useState20=_slicedToArray(_useState19,2),myMobileNo=_useState20[0],setMyMobileNo=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),isMobileVerify=_useState22[0],setIsMobileVerified=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),modalVerifyVisible=_useState24[0],setModalVerifyVisible=_useState24[1];var openModalForVerify=function openModalForVerify(){var val={mobile_number:myMobileNo};dispatch({type:'setting/resendOTPTOUser',payload:val});setModalVerifyVisible(true);};var convertToFormData=function convertToFormData(val){var formData=new FormData();for(var key in val){formData.append(key,val[key]);}if(imagesList.length>0&&imagesList[0].file){formData.append(\"file\",imagesList[0].file);}return formData;};useEffect(function(){var mobile_verified=localStorage.getItem('isMobileVerified');if(mobile_verified=='false'||mobile_verified==false){setIsMobileVerified(false);}else{setIsMobileVerified(true);}},[]);var handleCancel=function handleCancel(){setModalVisible(false);setModalVerifyVisible(false);};var changeMobileOTP=function changeMobileOTP(event){setMyMobileNoOTP(event.target.value);};var addMobileVerify=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data={otp:myMobileNoOTP,mobile:myMobileNo};_context.next=3;return axios.post(\"\".concat(baseUrl,\"/is-mobile/verified\"),data);case 3:res=_context.sent;if(!(res.data.status===true)){_context.next=11;break;}alert(res.data.message);localStorage.setItem('isMobileVerified',true);setModalVerifyVisible(false);setIsMobileVerified(true);_context.next=13;break;case 11:alert(res.data.message);return _context.abrupt(\"return\");case 13:case\"end\":return _context.stop();}}},_callee);}));return function addMobileVerify(){return _ref.apply(this,arguments);};}();useEffect(function(){var myMobileNo=user_data.mobile;setMyMobileNo(myMobileNo);var unmounted=false;setTimeout(function(){return document.title='Setting';},100);dispatch({type:'account/clearAction'});setUserId(localStorage.getItem('userId'));getDetail(localStorage.getItem('userId'));return function(){unmounted=true;};},[dispatch]);var getDetail=function getDetail(id){return dispatch({type:'account/getDetail',payload:{_id:id,profile_id:id}});};useEffect(function(){var unmounted=false;var detail=props.account.detail;if(!unmounted&&detail.count>dcount&&detail.status){var _form$setFieldsValue2;setDcount(detail.count);var profile_data=props.account.detail?props.account.detail.profile:{};var userLoginData=props.account.detail?props.account.detail.userLogin:{};setDetailData(userLoginData);if(userLoginData.roles==='SUBADMIN'){var _profile_data$schoolD,_profile_data$schoolD2,_profile_data$schoolD3,_form$setFieldsValue;setAvatar(profile_data===null||profile_data===void 0?void 0:(_profile_data$schoolD=profile_data.schoolDetail)===null||_profile_data$schoolD===void 0?void 0:_profile_data$schoolD.media);form.setFieldsValue((_form$setFieldsValue={},_defineProperty(_form$setFieldsValue,'school_name',profile_data===null||profile_data===void 0?void 0:(_profile_data$schoolD2=profile_data.schoolDetail)===null||_profile_data$schoolD2===void 0?void 0:_profile_data$schoolD2.school_name),_defineProperty(_form$setFieldsValue,'address',profile_data===null||profile_data===void 0?void 0:(_profile_data$schoolD3=profile_data.schoolDetail)===null||_profile_data$schoolD3===void 0?void 0:_profile_data$schoolD3.address),_form$setFieldsValue));}else{setAvatar(userLoginData.avatar);}console.log(profile_data);form.setFieldsValue((_form$setFieldsValue2={},_defineProperty(_form$setFieldsValue2,'name',userLoginData.username),_defineProperty(_form$setFieldsValue2,'email',userLoginData.email),_defineProperty(_form$setFieldsValue2,'mobile_number',profile_data.mobile_number),_form$setFieldsValue2));}var edit=props.account.edit;if(!unmounted&&edit.count>count&&edit.status){setCount(edit.count);getDetail(userId);}else if(!unmounted&&edit.count>count&&!edit.status){setCount(edit.count);}return function(){unmounted=true;};},[props.account]);var verifyFormFun=function verifyFormFun(val){getDetail(userId);};var onFinish=function onFinish(val){var values={\"name\":val.name,\"email\":val.email,\"phone\":val.mobile_number,\"school_name\":val.school_name,\"address\":val.address};console.log('onFinish',val);var formData=convertToFormData(values);console.log(\"formData\",formData);dispatch({type:'account/editItem',payload:formData,history:props});};var handlePostal=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var value,res,pincode_data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:value=e.target.value;if(!(value.length===6)){_context2.next=6;break;}_context2.next=4;return axios.get(\"https://api.postalpincode.in/pincode/\".concat(value));case 4:res=_context2.sent;if(res.data[0].PostOffice!=null&&res.data[0].PostOffice!=undefined&&res.data[0].PostOffice!=\"\"){pincode_data=res.data[0].PostOffice[0];form.setFieldsValue({city:pincode_data.District,state:pincode_data.State});}case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function handlePostal(_x){return _ref2.apply(this,arguments);};}();console.log('detailData',(detailData===null||detailData===void 0?void 0:detailData.roles)===\"SUBADMIN\");return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Apploader,{show:props.loading.global}),/*#__PURE__*/React.createElement(Card,{style:{width:'100%'},title:\"Account\",bodyStyle:{padding:'20px 20px'}},/*#__PURE__*/React.createElement(Image,{width:200,height:200,src:avatar===null||avatar===undefined?'https://upload.wikimedia.org/wikipedia/commons/9/99/Sample_User_Icon.png':avatar}),/*#__PURE__*/React.createElement(Form,{name:\"normal_login\",form:form,className:\"full-width-form\",initialValues:{remember:true},onFinish:onFinish,layout:'vertical'},/*#__PURE__*/React.createElement(Row,{gutter:16},/*#__PURE__*/React.createElement(Col,{xs:24,sm:24,md:12},/*#__PURE__*/React.createElement(Form.Item,{name:\"name\",label:\"Name\",rules:[{required:true,message:'Please input your Name!'}]},/*#__PURE__*/React.createElement(Input,{placeholder:\"Name\"}))),/*#__PURE__*/React.createElement(Col,{xs:24,sm:24,md:12},/*#__PURE__*/React.createElement(Form.Item,{name:\"email\",label:\"Email\",rules:[{required:true,message:'Field required!'}]},/*#__PURE__*/React.createElement(Input,{placeholder:\"Email\",disabled:true}))),/*#__PURE__*/React.createElement(Col,{xs:24,sm:24,md:12},/*#__PURE__*/React.createElement(Form.Item,{label:\"Mobile Number\"},/*#__PURE__*/React.createElement(Row,{gutter:12},/*#__PURE__*/React.createElement(Col,{xs:24,span:12},/*#__PURE__*/React.createElement(Form.Item,{name:\"mobile_number\",rules:[{required:true,message:'Field required!'}]},/*#__PURE__*/React.createElement(Input,{disabled:true,placeholder:\"mobile_number\"})))))),(detailData===null||detailData===void 0?void 0:detailData.roles)===\"SUBADMIN\"&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Col,{xs:24,sm:24,md:12},/*#__PURE__*/React.createElement(Form.Item,{name:\"school_name\",label:\"School Name\",rules:[{required:true,message:'Please input your school name!'}]},/*#__PURE__*/React.createElement(Input,{placeholder:\"Enter School Name\"}))),/*#__PURE__*/React.createElement(Col,{xs:24,sm:24,md:12},/*#__PURE__*/React.createElement(Form.Item,{name:\"address\",label:\"School Address\",rules:[{required:true,message:'Please input your school address!'}]},/*#__PURE__*/React.createElement(Input,{placeholder:\"Enter School Address\"}))),/*#__PURE__*/React.createElement(Col,{xs:24,sm:24,md:12},/*#__PURE__*/React.createElement(Form.Item,{name:\"thumbnail\",label:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"span\",null,\" School Logo \"),\" \")},imagesList.length>0&&imagesList.map(function(item,index){return item.urls?/*#__PURE__*/React.createElement(Avatar,{key:index,shape:\"square\",size:150,src:item.urls,style:{margin:5}}):/*#__PURE__*/React.createElement(Avatar,{key:index,shape:\"square\",size:150,src:process.env.REACT_APP_ApiUrl+'/'+item.url,style:{margin:5}});}),imagesList.length>0?/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return setImagesList([]);}},\"Remove\"),\"\\xA0\\xA0\"):'',imagesList.length===0&&/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return setVisible(true);}},\" Upload Logo \"))))),/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(Button,{type:\"primary\",htmlType:\"submit\",className:\"login-form-button bg-success border-0\"},\"Update\")))),/*#__PURE__*/React.createElement(Modal,{width:400,visible:modalVerifyVisible,title:\"Verify Your Mobile\",footer:null,onCancel:handleCancel},/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'center',marginBottom:'1rem'}},\"A OTP ( One Time Password ) has been sent to \",/*#__PURE__*/React.createElement(\"b\",null,myMobileNo),\" . Please enter the OTP in the field below to verify.\"),/*#__PURE__*/React.createElement(Form,{className:\"login-form\"},/*#__PURE__*/React.createElement(Form.Item,{name:\"otp\",rules:[{required:true,message:'Please input your Otp!'}]},/*#__PURE__*/React.createElement(Input,{prefix:/*#__PURE__*/React.createElement(UserOutlined,{className:\"site-form-item-icon\"}),onChange:function onChange(e){return changeMobileOTP(e);},placeholder:\"OTP Enter Here!\"})),/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(Button,{type:\"primary\",htmlType:\"submit\",className:\"login-form-button\",onClick:function onClick(){return addMobileVerify();}},\" Verify \")))),visible&&/*#__PURE__*/React.createElement(UploadImages,{visible:visible,closeFun:function closeFun(){return setVisible(false);},returnImg:function returnImg(val){setImagesList(val);},resetVal:imagesList,limit:5-imagesList.length,aspect:9/12}));};export default connect(function(_ref3){var account=_ref3.account,loading=_ref3.loading;return{account:account,loading:loading};})(Account);","map":{"version":3,"sources":["/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/src/pages/account/index.js"],"names":["React","useState","Component","useEffect","Apploader","connect","moment","Row","Col","Form","Input","Button","DatePicker","Card","Radio","Modal","Upload","message","Avatar","Image","UploadImages","LoadingOutlined","PlusOutlined","UserOutlined","axios","baseUrl","process","env","REACT_APP_ApiUrl","dateFormat","Account","props","count","setCount","dcount","setDcount","imagesList","setImagesList","visible","setVisible","userId","setUserId","avatar","setAvatar","detailData","setDetailData","role","localStorage","getItem","dispatch","useForm","form","myMobileNoOTP","setMyMobileNoOTP","modalVisible","setModalVisible","user_data","JSON","parse","myMobileNo","setMyMobileNo","isMobileVerify","setIsMobileVerified","modalVerifyVisible","setModalVerifyVisible","openModalForVerify","val","mobile_number","type","payload","convertToFormData","formData","FormData","key","append","length","file","mobile_verified","handleCancel","changeMobileOTP","event","target","value","addMobileVerify","data","otp","mobile","post","res","status","alert","setItem","unmounted","setTimeout","document","title","getDetail","id","_id","profile_id","detail","account","profile_data","profile","userLoginData","userLogin","roles","schoolDetail","media","setFieldsValue","school_name","address","console","log","username","email","edit","verifyFormFun","onFinish","values","name","history","handlePostal","e","get","PostOffice","undefined","pincode_data","city","District","state","State","loading","global","width","padding","remember","required","map","item","index","urls","margin","url","textAlign","marginBottom"],"mappings":"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","sourcesContent":["import React, {useState, Component, useEffect } from 'react';\r\nimport Apploader from './../../components/loader/loader'\r\nimport { connect } from 'dva';\r\nimport moment from 'moment';\r\nimport {Row, Col, Form, Input, Button,DatePicker, Card, Radio, Modal, Upload, message, Avatar, Image  } from 'antd';\r\nimport UploadImages from '../../components/sharing/upload-images'\r\nimport { LoadingOutlined, PlusOutlined, UserOutlined } from '@ant-design/icons';\r\nimport axios from 'axios';\r\nconst baseUrl = process.env.REACT_APP_ApiUrl;\r\n\r\nconst dateFormat = 'MM/DD/YYYY';\r\n\r\nconst Account = props => {\r\n\tconst [count, setCount] = useState(0)\r\n\tconst [dcount, setDcount] = useState(0)\r\n\tconst [imagesList, setImagesList] = useState([]);\r\n\tconst [visible, setVisible] = useState(false);\r\n\tconst [userId, setUserId] = useState('');\r\n\tconst [avatar, setAvatar] = useState('');\r\n\tconst [detailData, setDetailData] = useState({})\r\n\tconst role = useState(localStorage.getItem('role'))\r\n\tconst { dispatch } = props;\r\n\tconst [form] = Form.useForm();\r\n\tconst [myMobileNoOTP, setMyMobileNoOTP] = useState('');\r\n\r\n\tconst [modalVisible, setModalVisible] = useState(false);\r\n\tlet user_data = JSON.parse(localStorage.getItem('user'));\r\n\tconst [myMobileNo, setMyMobileNo] = useState('');\r\n\tconst [isMobileVerify, setIsMobileVerified] = useState(false);\r\n\tconst [modalVerifyVisible, setModalVerifyVisible] = useState(false);\r\n\r\n\tconst openModalForVerify = () => {\r\n\t\tlet val = { mobile_number:myMobileNo };\r\n\t\tdispatch({ type: 'setting/resendOTPTOUser', payload: val, });\r\n\t\tsetModalVerifyVisible(true);\r\n\t}\r\n\r\n\r\n\tconst convertToFormData = (val) => {\r\n\t\tconst formData = new FormData();\r\n\t\r\n\t\tfor(const key in val) {\r\n\r\n\t\t\t\tformData.append(key,val[key])\r\n\t\t\t\r\n\t\t}\r\n\t\tif(imagesList.length > 0 && imagesList[0].file) {\r\n\t\t\r\n\t\t\tformData.append(\"file\",imagesList[0].file);\r\n\t\t}  \r\n\t\r\n\t\treturn formData;\r\n\t}\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tlet mobile_verified = localStorage.getItem('isMobileVerified');\r\n\t\tif(mobile_verified == 'false' || mobile_verified == false) {\r\n\t\t\tsetIsMobileVerified(false);\r\n\t\t}else {\r\n\t\t\tsetIsMobileVerified(true);\r\n\t\t}\r\n\t}, [])\r\n\r\n\r\n\tconst handleCancel = () => {\r\n\t\tsetModalVisible(false);\r\n\t\tsetModalVerifyVisible(false);\r\n\t}\r\n\r\n\tconst changeMobileOTP = (event) =>{\r\n\t\tsetMyMobileNoOTP(event.target.value);\r\n\t}\r\n\r\n\tconst addMobileVerify = async () => {\r\n\r\n\t\tlet data = {\r\n\t\t\totp : myMobileNoOTP, \r\n\t\t\tmobile: myMobileNo,\r\n\t\t};\r\n\t\t\r\n\t\tconst res = await axios.post(`${baseUrl}/is-mobile/verified`,  data);\r\n\t\tif(res.data.status === true) {\r\n\t\t\talert(res.data.message);\r\n\t\t\tlocalStorage.setItem('isMobileVerified', true);\r\n\t\t\tsetModalVerifyVisible(false);\r\n\t\t\tsetIsMobileVerified(true);\r\n\t\t}else {\r\n\t\t\talert(res.data.message);\r\n\t\t\treturn; \r\n\t\t}\r\n\t\t// console.log(res);\t\r\n\t}\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tlet myMobileNo = user_data.mobile;\r\n\t\tsetMyMobileNo(myMobileNo);\r\n\r\n\t\tlet unmounted = false;\r\n\t\tsetTimeout(()=>document.title = 'Setting', 100);\r\n\t\tdispatch({type: 'account/clearAction'});\r\n\t\tsetUserId(localStorage.getItem('userId'))\r\n\t\tgetDetail(localStorage.getItem('userId'))\r\n\t\treturn () => {\r\n\t\t\tunmounted = true;\r\n\t\t}\r\n    },[dispatch])\r\n\r\n\tconst getDetail=(id)=> dispatch({ type: 'account/getDetail',  payload: { _id:id, profile_id: id },});\r\n\t\r\n\tuseEffect(() => {\r\n\r\n\t\tlet unmounted = false;\r\n\t\tlet detail = props.account.detail;\t\r\n\t\tif(!unmounted && detail.count > dcount && detail.status){\r\n\t\t\tsetDcount(detail.count);\r\n\t\t\tlet profile_data = props.account.detail ? props.account.detail.profile : {};\r\n\t\t\tlet userLoginData = props.account.detail ? props.account.detail.userLogin : {};\r\n\t\t\tsetDetailData(userLoginData);\r\n\t\t\tif(userLoginData.roles === 'SUBADMIN'){\r\n\t\t\t\tsetAvatar(profile_data?.schoolDetail?.media);\r\n\t\t\t\t\tform.setFieldsValue({\r\n\t\t\t\t  ['school_name']:profile_data?.schoolDetail?.school_name, \r\n\t\t\t\t  ['address']: profile_data?.schoolDetail?.address, \r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t\r\n\t\t\r\n\t\t\r\n\r\n\r\n\t\t\t}else{\r\n\t\t\t\tsetAvatar(userLoginData.avatar);\r\n\r\n\t\t\t}\r\n\t\tconsole.log(profile_data)\r\n\r\n\t\t\r\n\t\t\tform.setFieldsValue({\r\n\t\t\t\t  ['name']: userLoginData.username, \r\n\t\t\t\t  ['email']: userLoginData.email, \r\n\t\t\t\t  ['mobile_number']: profile_data.mobile_number, \r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tlet edit = props.account.edit;\t\t\r\n\t\tif(!unmounted && edit.count > count && edit.status){\r\n\t\t\tsetCount(edit.count);\r\n\t\t\tgetDetail(userId);\r\n\t\t}else if(!unmounted && edit.count > count && !edit.status){\r\n\t\t\tsetCount(edit.count);\r\n\t\t}\r\n\t\t\r\n\t\treturn () => {\r\n\t\t\tunmounted = true;\r\n\t\t}\r\n    },[props.account])\r\n\t\r\n\t\r\n\tconst verifyFormFun = val =>{\r\n\t\tgetDetail(userId);\r\n\t}\r\n\r\n\t\r\n\r\n\tconst onFinish = val =>{\r\n\t\t\r\n\r\n\t\r\n\r\n\r\n\r\n\t\tlet values = {\r\n\t\t\t\"name\": val.name ,\r\n\t\t\t\"email\": val.email,\r\n\t\t\t\"phone\": val.mobile_number,\r\n\t\t\t\"school_name\" : val.school_name, \r\n\t\t\t\"address\" : val.address, \r\n\t\t}\r\n\t\tconsole.log('onFinish',val);\r\n\t\tconst formData = convertToFormData(values);\r\n\t\tconsole.log(\"formData\" , formData)\r\n\r\n\t\r\n\t\tdispatch({ type: 'account/editItem',  payload: formData , history : props});\r\n\t}\r\n\t\r\n\tconst handlePostal = async (e) =>{\r\n\t\tlet value = e.target.value;\r\n\r\n\t\t\r\n\r\n\t\tif(value.length === 6) {\r\n\t\t\t\r\n\t\t\tconst res = await axios.get(`https://api.postalpincode.in/pincode/${value}`)\r\n\r\n\r\n\t\t\tif(res.data[0].PostOffice != null && res.data[0].PostOffice != undefined && res.data[0].PostOffice != \"\") {\r\n\r\n\t\t\t\tlet pincode_data = res.data[0].PostOffice[0];\r\n\t\t\t\tform.setFieldsValue({\r\n\t\t\t\t\tcity:pincode_data.District,\r\n\t\t\t\t\tstate: pincode_data.State,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t  }\r\n\r\n\r\n\t  console.log('detailData',detailData?.roles === \"SUBADMIN\")\r\n\r\n  return (\r\n\t<div>\r\n\t\t<Apploader show={props.loading.global}/>\r\n\t\t<Card style={{ width: '100%' }} title=\"Account\" bodyStyle={{padding:'20px 20px'}}>\r\n\t\t<Image\r\n\t\t\twidth={200}\r\n\t\t\theight={200}\r\n\t\t\tsrc={avatar === null || avatar === undefined ? 'https://upload.wikimedia.org/wikipedia/commons/9/99/Sample_User_Icon.png' : avatar}\r\n\t\t\t/>\r\n\t\t\t<Form name=\"normal_login\" form={form} className=\"full-width-form\" initialValues={{ remember: true, }} onFinish={onFinish} layout={'vertical'}>\r\n\t\t\t\t<Row gutter={16}>\r\n\t\t\t\t\r\n\t\t\t\t\t<Col  xs={24} sm={24} md={12}>\r\n\t\t\t\t\t\t<Form.Item name=\"name\" label=\"Name\" rules={[ { required: true, message: 'Please input your Name!', }, ]} >\r\n\t\t\t\t\t\t<Input placeholder=\"Name\" />\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col xs={24} sm={24} md={12}>\r\n\t\t\t\t\t\t<Form.Item name=\"email\" label=\"Email\" rules={[ { required: true, message: 'Field required!', }, ]} >\r\n\t\t\t\t\t\t<Input placeholder=\"Email\" disabled/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col xs={24} sm={24} md={12}>\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t<Form.Item label=\"Mobile Number\">\r\n\t\t\t\t\t\t\t\t<Row gutter={12}>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} span={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item name=\"mobile_number\" rules={[{ required: true, message: 'Field required!', },]}  >\r\n\t\t\t\t\t\t\t\t\t\t\t<Input disabled placeholder=\"mobile_number\"  />\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t{/* <Col  xs={12} span={12}>\t\r\n\t\t\t\t\t\t\t\t\t{ (isMobileVerify === true) ? '' :\r\n\t\t\t\t\t\t\t\t\t\t<Button type=\"primary\" className=\"btn-w25 mobile_verify_btn\" onClick={openModalForVerify} >Verify</Button>\r\n\t\t\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t\t\t\t</Col> */}\r\n\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t</Col>\r\n{detailData?.roles === \"SUBADMIN\" &&\r\n<>\r\n<Col  xs={24} sm={24} md={12}>\r\n\t\t\t\t\t\t<Form.Item name=\"school_name\" label=\"School Name\" rules={[ { required: true, message: 'Please input your school name!', }, ]} >\r\n\t\t\t\t\t\t<Input placeholder=\"Enter School Name\" />\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\r\n\r\n\t\t\t\t\r\n\r\n\t\t\t<Col  xs={24} sm={24} md={12}>\r\n\t\t\t\t\t\t<Form.Item name=\"address\" label=\"School Address\" rules={[ { required: true, message: 'Please input your school address!', }, ]} >\r\n\t\t\t\t\t\t<Input placeholder=\"Enter School Address\" />\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\r\n\r\n\t\t\t\t\t<Col  xs={24} sm={24} md={12}>\r\n\t\t\t\t\t\t<Form.Item name=\"thumbnail\" \r\n\t\t\t\t\t\tlabel={<><span> School Logo </span> </>} \r\n\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{imagesList.length >0 && imagesList.map((item, index) => \r\n\t\t\t\t\t\t\t\titem.urls ? <Avatar key={index} shape=\"square\" size={150} src={item.urls } style={{margin:5}} /> :\r\n\t\t\t\t\t\t\t\t<Avatar key={index} shape=\"square\" size={150} src={process.env.REACT_APP_ApiUrl+'/'+ item.url} style={{ margin: 5 }} />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t{imagesList.length > 0 ? <span><br /><Button onClick={() => setImagesList([])}>Remove</Button>&nbsp;&nbsp;</span> : ''}\r\n\t\t\t\t\t\t\t{imagesList.length === 0 && <Button onClick={() => setVisible(true)}> Upload Logo </Button>}\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col></>\r\n}\r\n\r\n\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t</Row>\r\n\t\t\t\t\r\n\t\t\t\t<Form.Item>\r\n\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button bg-success border-0\">Update</Button>\r\n\t\t\t\t\t\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t</Form>\r\n\t\t\t\r\n        </Card>\r\n\r\n\r\n\r\n\r\n\r\n\t\t<Modal\r\n\t\t\twidth={400}\r\n\t\t\tvisible={modalVerifyVisible}\r\n\t\t\ttitle='Verify Your Mobile'\r\n\t\t\tfooter={null}\r\n\t\t\tonCancel={handleCancel} >\r\n\t\t\t\t\r\n\t\t\t\t<div style={{ textAlign:'center',marginBottom: '1rem'}}>\r\n              \t\tA OTP ( One Time Password ) has been sent to <b>{ myMobileNo }</b> . Please enter the OTP in the field below to verify. \r\n\t\t\t\t</div>\r\n\t\t\t\t<Form className=\"login-form\" >\r\n\t\t\t\t\t<Form.Item name=\"otp\" rules={[ { required: true, message: 'Please input your Otp!', }, ]} >\r\n\t\t\t\t\t\t<Input prefix={<UserOutlined className=\"site-form-item-icon\" />} onChange={(e) => changeMobileOTP(e)} placeholder=\"OTP Enter Here!\" />\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item>\r\n\t\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\" onClick={() => addMobileVerify()}> Verify </Button>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t</Form>\r\n\t\t</Modal>\r\n\r\n\t\t{\r\n\t\t\tvisible && \r\n\t\t\t<UploadImages visible={visible} closeFun={() => setVisible(false)} \r\n\t\t\treturnImg={\r\n\t\t\t\tval => \r\n\t\t\t\t{ \r\n\t\t\t\t\tsetImagesList(val);\r\n\t\t\t\t}} \r\n\t\t\t\tresetVal={imagesList} limit={5 - imagesList.length}  aspect={9/12}\r\n\t\t\t />}\r\n\t</div>\r\n  );\r\n};\r\n\r\nexport default connect(({account, loading}) => ({\r\n\taccount, loading\r\n}))(Account);"]},"metadata":{},"sourceType":"module"}