{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef,Fragment}from'react';import{Row,Col,Empty,Modal,Card,Typography,Alert,Form,Input,Checkbox,Button,Space,Upload,Dropdown,Menu,Select,notification,Transfer,DatePicker,TimePicker,message,InputNumber}from'antd';import{LeftOutlined,LoadingOutlined,EditOutlined,CloseOutlined,PlusOutlined,MinusCircleOutlined}from'@ant-design/icons';import moment from'moment';import{connect}from'dva';var dateFormat='MM/DD/YYYY';var Option=Select.Option;var RangePicker=TimePicker.RangePicker;var days=[{value:0,day:'Sunday'},{value:1,day:'Monday'},{value:2,day:'Tuesday'},{value:3,day:'Wednesday'},{value:4,day:'Thursday'},{value:5,day:'Friday'},{value:6,day:'Saturday'}];var formItemLayout={labelCol:{xs:{span:24},sm:{span:24}}};var baseUrl=process.env.REACT_APP_ApiUrl;var AddEditTimeTable=function AddEditTimeTable(props){var _subjects$listData,_subjects$listData$da,_subjects$listData2,_subjects$listData2$d,_subjects$listData3,_subjects$listData3$d,_subjects$listData4,_subjects$listData4$d;var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var dispatch=props.dispatch,subjects=props.subjects;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),Inquiry=_useState2[0],setInquiry=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),PageId=_useState4[0],setPageId=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),count=_useState6[0],setCount=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),yearList=_useState8[0],setYearList=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),classList=_useState10[0],setClassList=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),stream=_useState12[0],setStream=_useState12[1];var classArray=subjects===null||subjects===void 0?void 0:(_subjects$listData=subjects.listData)===null||_subjects$listData===void 0?void 0:(_subjects$listData$da=_subjects$listData.data)===null||_subjects$listData$da===void 0?void 0:_subjects$listData$da.class_list;var teacherArray=subjects===null||subjects===void 0?void 0:(_subjects$listData2=subjects.listData)===null||_subjects$listData2===void 0?void 0:(_subjects$listData2$d=_subjects$listData2.data)===null||_subjects$listData2$d===void 0?void 0:_subjects$listData2$d.teacher_list;var subjectArray=subjects===null||subjects===void 0?void 0:(_subjects$listData3=subjects.listData)===null||_subjects$listData3===void 0?void 0:(_subjects$listData3$d=_subjects$listData3.data)===null||_subjects$listData3$d===void 0?void 0:_subjects$listData3$d.subject_list;var streamArray=subjects===null||subjects===void 0?void 0:(_subjects$listData4=subjects.listData)===null||_subjects$listData4===void 0?void 0:(_subjects$listData4$d=_subjects$listData4.data)===null||_subjects$listData4$d===void 0?void 0:_subjects$listData4$d.stream_list;useEffect(function(){var unmounted=false;var user_id=localStorage.getItem('userId');props.dispatch({type:'subjects/getsubjectList',payload:{user_id:user_id}});window.scroll(0,0);if(props.match.params.id){DetailFun(props.match.params.id);}else{form.resetFields();}return function(){unmounted=true;};},[dispatch]);var DetailFun=function DetailFun(id){props.dispatch({type:'time_tables/detailTimeTable',payload:id});};useEffect(function(){var unmounted=false;if(props.time_tables.add){dispatch({type:'time_tables/clearAction'});props.history.push('/time-tables');}if(props.time_tables.edit){dispatch({type:'time_tables/clearAction'});props.history.push('/time-tables');}if(props.time_tables&&props.time_tables.detail&&props.time_tables.detail.status){var _form$setFieldsValue;var data=props.time_tables.detail.data[0];console.log('data',data);setPageId(data._id);form.setFieldsValue((_form$setFieldsValue={},_defineProperty(_form$setFieldsValue,'stream_id',data.stream_id),_defineProperty(_form$setFieldsValue,'year',data.year),_defineProperty(_form$setFieldsValue,'class_name',data.class),_defineProperty(_form$setFieldsValue,'teacher_id',data.teacher_id),_defineProperty(_form$setFieldsValue,'subject_id',data.subject_id),_defineProperty(_form$setFieldsValue,'time_range',[moment(new Date(data.startTime)),moment(new Date(data.endTime))]),_defineProperty(_form$setFieldsValue,'date',[moment(new Date(data.startDate)),moment(new Date(data.endDate))]),_defineProperty(_form$setFieldsValue,'class_location',data.class_location),_defineProperty(_form$setFieldsValue,'days',data.days),_form$setFieldsValue));// {\n// \t\"_id\": \"629f48a0489d5e8266a0f043\",\n// \t\"teacher_id\": \"6299e9526543180bbd65b9ad\",\n// \t\"school_id\": \"625031af2eb80e5d5ad3d8e5\",\n// \t\"subject_id\": \"629a13eb423b8a4aefa2ed18\",\n// \t\"startTime\": \"2022-06-06T18:37:00.051Z\",\n// \t\"endTime\": \"2022-06-07T00:30:00.669Z\",\n// \t\"date\": \"2022-06-27T12:46:16.628Z\",\n// \t\"stream_id\": \"628c7826c70eff5ac08296b4\",\n// \t\"year\": \"1 Year\",\n// \t\"class\": \"101\",\n// \t\"created_at\": \"2022-06-07T12:46:24.059Z\",\n// \t\"updated_at\": \"2022-06-07T12:46:24.059Z\",\n// \t\"__v\": 0\n// }\n}return function(){unmounted=true;};},[props.time_tables]);var cancelFun=function cancelFun(){form.resetFields();props.history.push('/time_tables');};var handleChange=function handleChange(value){console.log(\"selected \".concat(value));};var onFinish=function onFinish(val){if(props.match.params.id){val._id=PageId;dispatch({type:'time_tables/editTimeTable',payload:val});}else{dispatch({type:'time_tables/AddTimeTable',payload:val});}};var onStreamChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var needUpdate_,year_list,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:needUpdate_=_args.length>1&&_args[1]!==undefined?_args[1]:false;form.setFieldsValue(_defineProperty({},'year',[]));form.setFieldsValue(_defineProperty({},'class_name',[]));form.setFieldsValue(_defineProperty({},'teacher_id',[]));form.setFieldsValue(_defineProperty({},'subject_id',[]));year_list=_toConsumableArray(new Map(classArray&&classArray.filter(function(item){return item.streamInfo._id===e;}).map(function(item){return[item[\"year\"],item];})).values());setYearList(year_list);setStream(e);case 8:case\"end\":return _context.stop();}}},_callee);}));return function onStreamChange(_x){return _ref.apply(this,arguments);};}();var onYearChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var needUpdate_,class_list,_args2=arguments;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:needUpdate_=_args2.length>1&&_args2[1]!==undefined?_args2[1]:false;form.setFieldsValue(_defineProperty({},'class_name',[]));form.setFieldsValue(_defineProperty({},'teacher_id',[]));form.setFieldsValue(_defineProperty({},'subject_id',[]));class_list=classArray&&classArray.filter(function(item){return item.year===e&&item.stream_id===stream;});setClassList(class_list);case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function onYearChange(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(Card,{title:/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(LeftOutlined,{onClick:function onClick(){return props.history.push('/time-tables');}}),props.detail?'Edit Time Table':'Add Time Table'),style:{marginTop:\"0\"}},/*#__PURE__*/React.createElement(Form,Object.assign({},formItemLayout,{form:form,name:\"loc_info\",layout:\"vertical\",onFinish:onFinish,className:\"innerFields\"}),/*#__PURE__*/React.createElement(Row,{gutter:15},/*#__PURE__*/React.createElement(Col,{sm:24,md:12},/*#__PURE__*/React.createElement(Form.Item,{name:\"stream_id\",label:\"Stream\",rules:[{required:true,message:'Field required!'}]},/*#__PURE__*/React.createElement(Select,{placeholder:\"Select Stream\",onChange:function onChange(e){return onStreamChange(e);}},streamArray&&streamArray.map(function(item,index){var _item$streamInfo,_item$streamInfo2;return/*#__PURE__*/React.createElement(Select.Option,{key:index,value:item===null||item===void 0?void 0:(_item$streamInfo=item.streamInfo)===null||_item$streamInfo===void 0?void 0:_item$streamInfo._id},item===null||item===void 0?void 0:(_item$streamInfo2=item.streamInfo)===null||_item$streamInfo2===void 0?void 0:_item$streamInfo2.name);})))),/*#__PURE__*/React.createElement(Col,{sm:24,md:12},/*#__PURE__*/React.createElement(Form.Item,{name:\"year\",label:\"Select Year\",rules:[{required:true,message:'Field required!'}]},/*#__PURE__*/React.createElement(Select,{placeholder:\"Select Year\",onChange:function onChange(e){return onYearChange(e);}},yearList&&yearList.map(function(item,index){return/*#__PURE__*/React.createElement(Select.Option,{key:index,value:item.year},item.year);}))))),/*#__PURE__*/React.createElement(Row,{gutter:15},/*#__PURE__*/React.createElement(Col,{sm:24,md:12},/*#__PURE__*/React.createElement(Form.Item,{name:\"class_name\",label:\"Select Class\",rules:[{required:true,message:'Field required!'}]},/*#__PURE__*/React.createElement(Select,{placeholder:\"Select Class\"},classList&&classList.map(function(item,index){return/*#__PURE__*/React.createElement(Select.Option,{key:index,value:item.class_name},item.class_name);})))),/*#__PURE__*/React.createElement(Col,{sm:24,md:12},/*#__PURE__*/React.createElement(Form.Item,{name:\"subject_id\",label:\"Select Subject\",rules:[{required:true,message:'Field required!'}]},/*#__PURE__*/React.createElement(Select,{placeholder:\"Select Subject\"},subjectArray&&subjectArray.map(function(item,index){return/*#__PURE__*/React.createElement(Select.Option,{key:index,value:item===null||item===void 0?void 0:item._id},item===null||item===void 0?void 0:item.subject_name);}))))),/*#__PURE__*/React.createElement(Row,{gutter:15},/*#__PURE__*/React.createElement(Col,{sm:24,md:12},/*#__PURE__*/React.createElement(Form.Item,{name:\"teacher_id\",label:\"Select Teacher\",rules:[{required:true,message:'Field required!'}]},/*#__PURE__*/React.createElement(Select,{placeholder:\"Select Teacher\"},teacherArray&&teacherArray.map(function(item,index){return/*#__PURE__*/React.createElement(Select.Option,{key:index,value:item===null||item===void 0?void 0:item._id},item===null||item===void 0?void 0:item.username);})))),/*#__PURE__*/React.createElement(Col,{sm:24,md:12},/*#__PURE__*/React.createElement(Form.Item,{name:\"class_location\",label:\"Class Location\",rules:[{required:true,message:'Field required!'},{max:20,message:'Class Location must not be greater than 20 characters.'}]},/*#__PURE__*/React.createElement(Input,{size:\"large\",placeholder:\"Enter Class Location\"})))),/*#__PURE__*/React.createElement(Row,{gutter:15},/*#__PURE__*/React.createElement(Col,{sm:24,md:6},/*#__PURE__*/React.createElement(Form.Item,{name:\"date\",label:\"Select Session\",rules:[{required:true,message:'Field required!'}]},/*#__PURE__*/React.createElement(DatePicker.RangePicker,{format:\"YYYY-MM-DD\"}))),/*#__PURE__*/React.createElement(Col,{sm:24,md:12},/*#__PURE__*/React.createElement(Form.Item,{name:\"days\",label:\"Select Days\",rules:[{required:true,message:'Field required!'}]},/*#__PURE__*/React.createElement(Select,{mode:\"multiple\",allowClear:true,style:{width:'100%'},placeholder:\"Please select days\",onChange:handleChange},days.map(function(item,index){return/*#__PURE__*/React.createElement(Option,{key:index,value:item.value,label:item.day},/*#__PURE__*/React.createElement(\"div\",{className:\"demo-option-label-item\"},item.day));})))),/*#__PURE__*/React.createElement(Col,{sm:24,md:6},/*#__PURE__*/React.createElement(Form.Item,{name:\"time_range\",label:\"Time Range\",rules:[{required:true,message:'Field required!'}]},/*#__PURE__*/React.createElement(RangePicker,{use12Hours:true,format:\"h:mm a\",bordered:true})))),/*#__PURE__*/React.createElement(Row,{gutter:15}),/*#__PURE__*/React.createElement(Form.Item,{className:\"mb-0\"},/*#__PURE__*/React.createElement(Button,{onClick:cancelFun},\"Cancel\"),\"\\xA0\\xA0\",/*#__PURE__*/React.createElement(Button,{type:\"primary\",className:\"btn-w25 btn-primary-light\",onClick:function onClick(){return form.submit();}},\"Save\"))));};export default connect(function(_ref3){var time_tables=_ref3.time_tables,global=_ref3.global,loading=_ref3.loading,subjects=_ref3.subjects;return{time_tables:time_tables,global:global,subjects:subjects};})(AddEditTimeTable);","map":{"version":3,"sources":["/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/src/pages/time_table/action/addEdit.jsx"],"names":["React","useState","useEffect","useRef","Fragment","Row","Col","Empty","Modal","Card","Typography","Alert","Form","Input","Checkbox","Button","Space","Upload","Dropdown","Menu","Select","notification","Transfer","DatePicker","TimePicker","message","InputNumber","LeftOutlined","LoadingOutlined","EditOutlined","CloseOutlined","PlusOutlined","MinusCircleOutlined","moment","connect","dateFormat","Option","RangePicker","days","value","day","formItemLayout","labelCol","xs","span","sm","baseUrl","process","env","REACT_APP_ApiUrl","AddEditTimeTable","props","useForm","form","dispatch","subjects","Inquiry","setInquiry","PageId","setPageId","count","setCount","yearList","setYearList","classList","setClassList","stream","setStream","classArray","listData","data","class_list","teacherArray","teacher_list","subjectArray","subject_list","streamArray","stream_list","unmounted","user_id","localStorage","getItem","type","payload","window","scroll","match","params","id","DetailFun","resetFields","time_tables","add","history","push","edit","detail","status","console","log","_id","setFieldsValue","stream_id","year","class","teacher_id","subject_id","Date","startTime","endTime","startDate","endDate","class_location","cancelFun","handleChange","onFinish","val","onStreamChange","e","needUpdate_","year_list","Map","filter","item","streamInfo","map","values","onYearChange","marginTop","required","index","name","class_name","subject_name","username","max","width","submit","global","loading"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, Fragment } from 'react';\r\nimport { Row, Col, Empty, Modal, Card, Typography, Alert, Form, Input, Checkbox, Button, Space, Upload, Dropdown, Menu, Select, notification, Transfer, DatePicker, TimePicker, message, InputNumber } from 'antd';\r\nimport { LeftOutlined, LoadingOutlined, EditOutlined, CloseOutlined, PlusOutlined, MinusCircleOutlined } from '@ant-design/icons';\r\nimport moment from 'moment';\r\nimport { connect } from 'dva';\r\nconst dateFormat = 'MM/DD/YYYY';\r\nconst { Option } = Select;\r\n\r\nconst { RangePicker } = TimePicker;\r\nconst days = [{ value: 0, day: 'Sunday' }, { value: 1, day: 'Monday' }, { value: 2, day: 'Tuesday' }, { value: 3, day: 'Wednesday' }, { value: 4, day: 'Thursday' }, { value: 5, day: 'Friday' }, { value: 6, day: 'Saturday' }]\r\n\r\nconst formItemLayout = { labelCol: { xs: { span: 24, }, sm: { span: 24, }, } };\r\nconst baseUrl = process.env.REACT_APP_ApiUrl\r\nconst AddEditTimeTable = props => {\r\n\tconst [form] = Form.useForm();\r\n\tconst { dispatch, subjects } = props;\r\n\tconst [Inquiry, setInquiry] = useState('');\r\n\tconst [PageId, setPageId] = useState('');\r\n\tconst [count, setCount] = useState(0)\r\n\tconst [yearList, setYearList] = useState([])\r\n\tconst [classList, setClassList] = useState([])\r\n\tconst [stream, setStream] = useState('');\r\n\tconst classArray = subjects?.listData?.data?.class_list;\r\n\tconst teacherArray = subjects?.listData?.data?.teacher_list;\r\n\tconst subjectArray = subjects?.listData?.data?.subject_list;\r\n\tconst streamArray = subjects?.listData?.data?.stream_list\r\n\r\n\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\tlet user_id = localStorage.getItem('userId');\r\n\t\tprops.dispatch({ type: 'subjects/getsubjectList', payload: { user_id: user_id } });\r\n\r\n\t\twindow.scroll(0, 0);\r\n\t\tif (props.match.params.id) {\r\n\t\t\tDetailFun(props.match.params.id)\r\n\t\t} else {\r\n\t\t\tform.resetFields();\r\n\t\t}\r\n\t\treturn () => { unmounted = true; }\r\n\t}, [dispatch])\r\n\r\n\tconst DetailFun = (id) => {\r\n\t\tprops.dispatch({ type: 'time_tables/detailTimeTable', payload: id });\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\r\n\t\tif (props.time_tables.add) {\r\n\t\t\tdispatch({ type: 'time_tables/clearAction' });\r\n\t\t\tprops.history.push('/time-tables');\r\n\t\t}\r\n\r\n\t\tif (props.time_tables.edit) {\r\n\t\t\tdispatch({ type: 'time_tables/clearAction' });\r\n\t\t\tprops.history.push('/time-tables');\r\n\t\t}\r\n\r\n\t\tif (props.time_tables && props.time_tables.detail && props.time_tables.detail.status) {\r\n\t\t\tlet data = props.time_tables.detail.data[0];\r\n\t\t\tconsole.log('data', data);\r\n\t\t\tsetPageId(data._id)\r\n\r\n\r\n\r\n\t\t\tform.setFieldsValue({\r\n\t\t\t\t['stream_id']: data.stream_id,\r\n\t\t\t\t['year']: data.year,\r\n\t\t\t\t['class_name']: data.class,\r\n\t\t\t\t['teacher_id']: data.teacher_id,\r\n\t\t\t\t['subject_id']: data.subject_id,\r\n\t\t\t\t['time_range']: [moment(new Date(data.startTime)), moment(new Date(data.endTime))],\r\n\t\t\t\t['date']: [moment(new Date(data.startDate)), moment(new Date(data.endDate))],\r\n\t\t\t\t['class_location']: data.class_location,\r\n\t\t\t\t['days']: data.days,\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t})\r\n\t\t\t// {\r\n\t\t\t// \t\"_id\": \"629f48a0489d5e8266a0f043\",\r\n\t\t\t// \t\"teacher_id\": \"6299e9526543180bbd65b9ad\",\r\n\t\t\t// \t\"school_id\": \"625031af2eb80e5d5ad3d8e5\",\r\n\t\t\t// \t\"subject_id\": \"629a13eb423b8a4aefa2ed18\",\r\n\t\t\t// \t\"startTime\": \"2022-06-06T18:37:00.051Z\",\r\n\t\t\t// \t\"endTime\": \"2022-06-07T00:30:00.669Z\",\r\n\t\t\t// \t\"date\": \"2022-06-27T12:46:16.628Z\",\r\n\t\t\t// \t\"stream_id\": \"628c7826c70eff5ac08296b4\",\r\n\t\t\t// \t\"year\": \"1 Year\",\r\n\t\t\t// \t\"class\": \"101\",\r\n\t\t\t// \t\"created_at\": \"2022-06-07T12:46:24.059Z\",\r\n\t\t\t// \t\"updated_at\": \"2022-06-07T12:46:24.059Z\",\r\n\t\t\t// \t\"__v\": 0\r\n\t\t\t// }\r\n\r\n\t\t}\r\n\r\n\t\treturn () => { unmounted = true; }\r\n\t}, [props.time_tables])\r\n\r\n\tconst cancelFun = () => {\r\n\t\tform.resetFields();\r\n\t\tprops.history.push('/time_tables');\r\n\t}\r\n\r\n\tconst handleChange = (value) => {\r\n\t\tconsole.log(`selected ${value}`);\r\n\t};\r\n\r\n\tconst onFinish = val => {\r\n\r\n\r\n\r\n\t\t\r\n\r\n\r\n\t\tif (props.match.params.id) {\r\n\t\t\tval._id = PageId;\r\n\r\n\t\t\tdispatch({ type: 'time_tables/editTimeTable', payload: val });\r\n\t\t} else {\r\n\t\t\tdispatch({ type: 'time_tables/AddTimeTable', payload: val });\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tconst onStreamChange = async (e, needUpdate_ = false) => {\r\n\t\tform.setFieldsValue({ ['year']: [], })\r\n\t\tform.setFieldsValue({ ['class_name']: [], })\r\n\t\tform.setFieldsValue({ ['teacher_id']: [], })\r\n\t\tform.setFieldsValue({ ['subject_id']: [], })\r\n\r\n\t\tconst year_list = [...new Map(classArray && classArray.filter((item) => item.streamInfo._id === e).map((item) => [item[\"year\"], item])).values(),];\r\n\t\tsetYearList(year_list)\r\n\t\tsetStream(e)\r\n\t}\r\n\tconst onYearChange = async (e, needUpdate_ = false) => {\r\n\t\tform.setFieldsValue({ ['class_name']: [], })\r\n\t\tform.setFieldsValue({ ['teacher_id']: [], })\r\n\t\tform.setFieldsValue({ ['subject_id']: [], })\r\n\t\tconst class_list = classArray && classArray.filter((item) => item.year === e && item.stream_id === stream)\r\n\t\tsetClassList(class_list)\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\treturn (\r\n\t\t<Card title={<span><LeftOutlined onClick={() => props.history.push('/time-tables')} />\r\n\t\t\t{props.detail ? 'Edit Time Table' : 'Add Time Table'}</span>} style={{ marginTop: \"0\" }}>\r\n\r\n\t\t\t<Form {...formItemLayout} form={form} name=\"loc_info\" layout=\"vertical\" onFinish={onFinish} className=\"innerFields\">\r\n\r\n\t\t\t\t<Row gutter={15}>\r\n\t\t\t\t\t<Col sm={24} md={12}>\r\n\t\t\t\t\t\t<Form.Item name=\"stream_id\" label=\"Stream\" rules={[{ required: true, message: 'Field required!' },]}  >\r\n\t\t\t\t\t\t\t<Select placeholder=\"Select Stream\" onChange={(e) => onStreamChange(e)}>\r\n\t\t\t\t\t\t\t\t{streamArray && streamArray.map((item, index) => <Select.Option key={index} value={item?.streamInfo?._id}>{item?.streamInfo?.name}</Select.Option>)}\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t<Col sm={24} md={12}>\r\n\t\t\t\t\t\t<Form.Item name=\"year\" label=\"Select Year\" rules={[{ required: true, message: 'Field required!' },]}  >\r\n\t\t\t\t\t\t\t<Select placeholder=\"Select Year\" onChange={(e) => onYearChange(e)}>\r\n\t\t\t\t\t\t\t\t{yearList && yearList.map((item, index) => <Select.Option key={index} value={item.year}>{item.year}</Select.Option>)}\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\r\n\r\n\t\t\t\t<Row gutter={15}>\r\n\t\t\t\t\t<Col sm={24} md={12}>\r\n\t\t\t\t\t\t<Form.Item name=\"class_name\" label=\"Select Class\" rules={[{ required: true, message: 'Field required!' },]}  >\r\n\t\t\t\t\t\t\t<Select placeholder=\"Select Class\" >\r\n\t\t\t\t\t\t\t\t{classList && classList.map((item, index) => <Select.Option key={index} value={item.class_name}>{item.class_name}</Select.Option>)}\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t<Col sm={24} md={12}>\r\n\t\t\t\t\t\t<Form.Item name=\"subject_id\" label=\"Select Subject\" rules={[{ required: true, message: 'Field required!' },]}  >\r\n\t\t\t\t\t\t\t<Select placeholder=\"Select Subject\" >\r\n\t\t\t\t\t\t\t\t{subjectArray && subjectArray.map((item, index) => <Select.Option key={index} value={item?._id}>{item?.subject_name}</Select.Option>)}\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\r\n\t\t\t\t<Row gutter={15}>\r\n\t\t\t\t\t<Col sm={24} md={12}>\r\n\t\t\t\t\t\t<Form.Item name=\"teacher_id\" label=\"Select Teacher\" rules={[{ required: true, message: 'Field required!' },]}  >\r\n\t\t\t\t\t\t\t<Select placeholder=\"Select Teacher\" >\r\n\t\t\t\t\t\t\t\t{teacherArray && teacherArray.map((item, index) => <Select.Option key={index} value={item?._id}>{item?.username}</Select.Option>)}\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t<Col sm={24} md={12}>\r\n\t\t\t\t\t\t<Form.Item name=\"class_location\" label=\"Class Location\" rules={[{ required: true, message: 'Field required!' },{ max: 20, message: 'Class Location must not be greater than 20 characters.' }]}  >\r\n\t\t\t\t\t\t\t<Input size=\"large\" placeholder=\"Enter Class Location\" />\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\r\n\r\n\t\t\t\t</Row>\r\n\r\n\r\n\t\t\t\t<Row gutter={15}>\r\n\t\t\t\t\t<Col sm={24} md={6}>\r\n\t\t\t\t\t\t<Form.Item name=\"date\" label=\"Select Session\" rules={[{ required: true, message: 'Field required!' },]}  >\r\n\t\t\t\t\t\t\t<DatePicker.RangePicker format=\"YYYY-MM-DD\" />\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\r\n\r\n\t\t\t\t\t<Col sm={24} md={12}>\r\n\t\t\t\t\t\t<Form.Item name=\"days\" label=\"Select Days\" rules={[{ required: true, message: 'Field required!' },]}  >\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tmode=\"multiple\"\r\n\t\t\t\t\t\t\t\tallowClear\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tplaceholder=\"Please select days\"\r\n\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{days.map((item, index) =>\r\n\t\t\t\t\t\t\t\t\t<Option key={index} value={item.value} label={item.day}>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"demo-option-label-item\">\r\n\t\t\t\t\t\t\t\t\t\t{item.day}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</Option>)}\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t<Col sm={24} md={6}>\r\n\t\t\t\t\t\t<Form.Item name=\"time_range\" label=\"Time Range\" rules={[{ required: true, message: 'Field required!' },]}  >\r\n\r\n\t\t\t\t\t\t\t<RangePicker \t use12Hours format=\"h:mm a\" bordered={true} />\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<Row gutter={15}>\r\n\r\n\t\t\t\t\r\n\r\n\r\n\t\t\t\t</Row>\r\n\r\n\t\t\t\t<Form.Item className=\"mb-0\">\r\n\t\t\t\t\t<Button onClick={cancelFun}>Cancel</Button>&nbsp;&nbsp;\r\n\t\t\t\t\t<Button type=\"primary\" className=\"btn-w25 btn-primary-light\" onClick={() => form.submit()}>Save</Button>\r\n\t\t\t\t</Form.Item>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t</Form>\r\n\r\n\t\t</Card>\r\n\t)\r\n};\r\n\r\nexport default connect(({ time_tables, global, loading, subjects }) => ({\r\n\ttime_tables: time_tables,\r\n\tglobal: global,\r\n\tsubjects: subjects,\r\n}))(AddEditTimeTable);"]},"metadata":{},"sourceType":"module"}