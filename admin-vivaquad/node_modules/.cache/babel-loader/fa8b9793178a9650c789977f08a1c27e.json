{"ast":null,"code":"import _slicedToArray from\"/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef,Fragment}from'react';import{Empty,Modal,Form,Input,Button,Switch,Upload,Dropdown,Menu,Select,notification,Transfer,DatePicker}from'antd';import{connect}from'dva';var formItemLayout={labelCol:{xs:{span:24},sm:{span:24}}};var TextArea=Input.TextArea;var AddEdit=function AddEdit(props){var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var dispatch=props.dispatch;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),catlist=_useState2[0],setCatlist=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),count=_useState4[0],setCount=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),dcount=_useState6[0],setDCount=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),btnDis=_useState8[0],setBtnDis=_useState8[1];useEffect(function(){var unmounted=false;return function(){unmounted=true;};},[dispatch]);useEffect(function(){var unmounted=false;var data=props.detail;if(props.detail){form.setFieldsValue({//   ['hall_name']: data.hall_name, \n});}else{form.resetFields();}return function(){unmounted=true;};},[props.visible]);useEffect(function(){var unmounted=false;var announcements=props.announcements;setCatlist(announcements.list?announcements.list.data:[]);return function(){unmounted=true;};},[props.announcements.list]);var onFinish=function onFinish(val){setBtnDis(true);if(props.detail){val._id=props.detail._id;dispatch({type:'announcements/announcementEdit',payload:val});}else{dispatch({type:'announcements/announcementAdd',payload:val});}};useEffect(function(){var unmounted=false;var add=props.announcements.add;if(!unmounted&&add.count>count&&add.status){setBtnDis(false);setCount(add.count);props.returnData('success');}else if(!unmounted&&add.count>count&&!add.status){setBtnDis(false);setCount(add.count);}// Edit\nvar edit=props.announcements.edit;if(!unmounted&&edit.count>dcount&&edit.status){setBtnDis(false);setDCount(edit.count);props.returnData('success');}else if(!unmounted&&edit.count>dcount&&!edit.status){setBtnDis(false);setDCount(edit.count);}return function(){unmounted=true;};},[props.announcements]);var cancelFun=function cancelFun(){if(!props.detail)form.resetFields();props.closeModel();};return/*#__PURE__*/React.createElement(Modal,{visible:props.visible,title:props.detail?'Edit Announcement':'Add Announcement',onCancel:cancelFun,footer:/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(Button,{onClick:cancelFun},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{type:\"primary\",disabled:btnDis,className:\"btn-w25 btn-primary-light\",onClick:function onClick(){return form.submit();}},props.detail?'Edit Announcement':'Add Announcement'))},/*#__PURE__*/React.createElement(Form,Object.assign({},formItemLayout,{form:form,name:\"loc_info\",layout:\"vertical\",onFinish:onFinish,className:\"innerFields\"}),/*#__PURE__*/React.createElement(Form.Item,{name:\"title\",label:\"Title\",rules:[{required:true,message:'This field is required!'},{max:50,message:'Title must not be greater than 50 characters.'}]},/*#__PURE__*/React.createElement(Input,{placeholder:\"Enter Title\"}))),/*#__PURE__*/React.createElement(Form,Object.assign({},formItemLayout,{form:form,name:\"loc_info\",layout:\"vertical\",onFinish:onFinish,className:\"innerFields\"}),/*#__PURE__*/React.createElement(Form.Item,{name:\"message\",label:\"Description\",rules:[{required:true,message:'This field is required!'},{max:100,message:'Description must not be greater than 100 characters.'}]},/*#__PURE__*/React.createElement(TextArea,{placeholder:\"Description\",rows:3}))));};export default connect(function(_ref){var announcements=_ref.announcements,global=_ref.global,loading=_ref.loading;return{announcements:announcements,global:global,loading:loading};})(AddEdit);","map":{"version":3,"sources":["/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/src/pages/announcement/action/addEdit.jsx"],"names":["React","useState","useEffect","useRef","Fragment","Empty","Modal","Form","Input","Button","Switch","Upload","Dropdown","Menu","Select","notification","Transfer","DatePicker","connect","formItemLayout","labelCol","xs","span","sm","TextArea","AddEdit","props","useForm","form","dispatch","catlist","setCatlist","count","setCount","dcount","setDCount","btnDis","setBtnDis","unmounted","data","detail","setFieldsValue","resetFields","visible","announcements","list","onFinish","val","_id","type","payload","add","status","returnData","edit","cancelFun","closeModel","submit","required","message","max","global","loading"],"mappings":"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","sourcesContent":["import React, { useState,useEffect,useRef, Fragment} from 'react';\r\nimport {Empty, Modal,Form,Input,Button,Switch, Upload, Dropdown, Menu, Select, notification, Transfer, DatePicker } from 'antd';\r\n\r\nimport { connect } from 'dva';\r\n\r\nconst formItemLayout = { labelCol: {xs: { span: 24, },  sm: { span: 24, },}};\r\nconst { TextArea } = Input;\r\n\r\n\r\nconst AddEdit =props => {\r\n\tconst [form] = Form.useForm();\r\n\tconst { dispatch} = props;\r\n\tconst [catlist, setCatlist] = useState([])\r\n\tconst [count, setCount] = useState(0)\r\n\tconst [dcount, setDCount] = useState(0)\r\n\tconst [btnDis, setBtnDis] = useState(false)\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\treturn () => {unmounted = true;}\r\n    },[dispatch])\r\n\t\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\r\n\t\tlet data = props.detail;\t\t\r\n\t\tif(props.detail){\r\n\t\t\tform.setFieldsValue({\r\n\t\t\t//   ['hall_name']: data.hall_name, \r\n\t\t\t});}\r\n\t\telse{ form.resetFields(); }\r\n\t\t\r\n\t\treturn () => {unmounted = true;}\r\n    },[props.visible])\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\tlet {announcements} = props;\r\n\t\tsetCatlist(announcements.list ? announcements.list.data:[]);\r\n\t\treturn () => {unmounted = true;}\r\n    },[props.announcements.list])\r\n\t\r\n\tconst onFinish= val=>{\r\n\t\r\n\r\n\r\n\t\t\r\n\t\tsetBtnDis(true);\r\n\t\tif(props.detail){\r\n\t\t\tval._id = props.detail._id\r\n\t\t\tdispatch({type: 'announcements/announcementEdit',  payload: val,});\r\n\t\t}\r\n\t\telse{\r\n\t\t\t\r\n\t\t\tdispatch({type: 'announcements/announcementAdd',  payload: val,});\r\n\t\t}\r\n\t}\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\tlet add = props.announcements.add\r\n\t\tif(!unmounted && add.count > count && add.status){\r\n\t\t\tsetBtnDis(false);\r\n\t\t  setCount(add.count);\t\t  \r\n\t\t  props.returnData('success');\r\n\t\t}else if(!unmounted && add.count > count && !add.status){\r\n\t\t  setBtnDis(false);\r\n\t\t  setCount(add.count);\r\n\t\t}\r\n\t\t\r\n\t\t// Edit\r\n\t\tlet edit = props.announcements.edit\r\n\t\tif(!unmounted && edit.count > dcount && edit.status){\r\n\t\t  setBtnDis(false);\r\n\t\t  setDCount(edit.count);\r\n\t\t  \r\n\t\t  props.returnData('success');\r\n\t\t}else if(!unmounted && edit.count > dcount && !edit.status){\r\n\t\t  setBtnDis(false);\r\n\t\t  setDCount(edit.count);\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\tunmounted = true;\r\n\t\t}\r\n\t},[props.announcements])\r\n\t\r\n\tconst cancelFun = ()=>{\r\n\t\tif(!props.detail)\r\n\t\t\tform.resetFields();\r\n\t\tprops.closeModel()\r\n\t}\r\n\r\n\t\r\nreturn (\r\n\t<Modal visible={props.visible} title={props.detail?'Edit Announcement':'Add Announcement'} onCancel={cancelFun} footer={<Fragment>\r\n\t\t\t\t<Button onClick={cancelFun}>Cancel</Button>\r\n\t\t\t\t<Button type=\"primary\" disabled={btnDis} className=\"btn-w25 btn-primary-light\" onClick={()=>form.submit()}>{props.detail?'Edit Announcement':'Add Announcement'}</Button>\r\n\t\t\t</Fragment>} >\r\n\t\t<Form {...formItemLayout} form={form} name=\"loc_info\" layout=\"vertical\" onFinish={onFinish} className=\"innerFields\">\r\n\t\t\t<Form.Item name=\"title\" label=\"Title\"  rules={[{ required: true, message: 'This field is required!' },{ max: 50, message: 'Title must not be greater than 50 characters.' },]} >\r\n\t\t\t\t<Input placeholder=\"Enter Title\" />\r\n\t\t\t</Form.Item>\r\n\t\t</Form>\r\n\r\n\t\t<Form {...formItemLayout} form={form} name=\"loc_info\" layout=\"vertical\" onFinish={onFinish} className=\"innerFields\">\r\n\t\t\t<Form.Item name=\"message\" label=\"Description\"  rules={[{ required: true, message: 'This field is required!' },{ max: 100, message: 'Description must not be greater than 100 characters.' },]} >\r\n\t\t\t<TextArea placeholder=\"Description\"  rows={3}  />\r\n\t\t\t</Form.Item>\r\n\t\t</Form>\r\n\t\t\r\n\t</Modal>\r\n)};\r\n\r\nexport default connect(({ announcements, global, loading }) => ({\r\n  announcements:announcements,\r\n  global: global,\r\n  loading: loading \r\n}))(AddEdit);"]},"metadata":{},"sourceType":"module"}