{"ast":null,"code":"import _defineProperty from\"/Users/kalyansingh/Desktop/Project/cicd/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/kalyansingh/Desktop/Project/cicd/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef,Fragment}from'react';import{Empty,Modal,Form,Input,Button,Switch,Upload,Dropdown,Menu,Select,notification,Transfer,DatePicker}from'antd';import{connect}from'dva';var formItemLayout={labelCol:{xs:{span:24},sm:{span:24}}};var AddEdit=function AddEdit(props){var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var dispatch=props.dispatch;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),catlist=_useState2[0],setCatlist=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),count=_useState4[0],setCount=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),dcount=_useState6[0],setDCount=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),btnDis=_useState8[0],setBtnDis=_useState8[1];useEffect(function(){var unmounted=false;return function(){unmounted=true;};},[dispatch]);useEffect(function(){var unmounted=false;var data=props.detail;if(props.detail){form.setFieldsValue(_defineProperty({},'subject_name',data.subject_name));}else{form.resetFields();}return function(){unmounted=true;};},[props.visible]);useEffect(function(){var unmounted=false;var subjects=props.subjects;setCatlist(subjects.list?subjects.list.data:[]);return function(){unmounted=true;};},[props.subjects.list]);var onFinish=function onFinish(val){setBtnDis(true);if(props.detail){val._id=props.detail._id;dispatch({type:'subjects/subjectEdit',payload:val});}else{dispatch({type:'subjects/subjectAdd',payload:val});}};useEffect(function(){var unmounted=false;var add=props.subjects.add;if(!unmounted&&add.count>count&&add.status){setBtnDis(false);setCount(add.count);props.returnData('success');}else if(!unmounted&&add.count>count&&!add.status){setBtnDis(false);setCount(add.count);}// Edit\nvar edit=props.subjects.edit;if(!unmounted&&edit.count>dcount&&edit.status){setBtnDis(false);setDCount(edit.count);props.returnData('success');}else if(!unmounted&&edit.count>dcount&&!edit.status){setBtnDis(false);setDCount(edit.count);}return function(){unmounted=true;};},[props.subjects]);var cancelFun=function cancelFun(){if(!props.detail)form.resetFields();props.closeModel();};return/*#__PURE__*/React.createElement(Modal,{visible:props.visible,title:props.detail?'Edit Subject':'Add Subject',onCancel:cancelFun,footer:/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(Button,{onClick:cancelFun},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{type:\"primary\",disabled:btnDis,className:\"btn-w25 btn-primary-light\",onClick:function onClick(){return form.submit();}},props.detail?'Edit Subject':'Add Subject'))},/*#__PURE__*/React.createElement(Form,Object.assign({},formItemLayout,{form:form,name:\"loc_info\",layout:\"vertical\",onFinish:onFinish,className:\"innerFields\"}),/*#__PURE__*/React.createElement(Form.Item,{name:\"subject_name\",rules:[{required:true,message:'This field is required!'},{max:25,message:'Subject Name must not be greater than 25 characters.'}]},/*#__PURE__*/React.createElement(Input,{placeholder:\"Enter Subject Name\"}))));};export default connect(function(_ref){var subjects=_ref.subjects,global=_ref.global,loading=_ref.loading;return{subjects:subjects,global:global,loading:loading};})(AddEdit);","map":{"version":3,"sources":["/Users/kalyansingh/Desktop/Project/cicd/admin-vivaquad/src/pages/subject/action/addEdit.jsx"],"names":["React","useState","useEffect","useRef","Fragment","Empty","Modal","Form","Input","Button","Switch","Upload","Dropdown","Menu","Select","notification","Transfer","DatePicker","connect","formItemLayout","labelCol","xs","span","sm","AddEdit","props","useForm","form","dispatch","catlist","setCatlist","count","setCount","dcount","setDCount","btnDis","setBtnDis","unmounted","data","detail","setFieldsValue","subject_name","resetFields","visible","subjects","list","onFinish","val","_id","type","payload","add","status","returnData","edit","cancelFun","closeModel","submit","required","message","max","global","loading"],"mappings":"4VAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAAyBC,SAAzB,CAAmCC,MAAnC,CAA2CC,QAA3C,KAA0D,OAA1D,CACA,OAAQC,KAAR,CAAeC,KAAf,CAAqBC,IAArB,CAA0BC,KAA1B,CAAgCC,MAAhC,CAAuCC,MAAvC,CAA+CC,MAA/C,CAAuDC,QAAvD,CAAiEC,IAAjE,CAAuEC,MAAvE,CAA+EC,YAA/E,CAA6FC,QAA7F,CAAuGC,UAAvG,KAAyH,MAAzH,CAEA,OAASC,OAAT,KAAwB,KAAxB,CAEA,GAAMC,CAAAA,cAAc,CAAG,CAAEC,QAAQ,CAAE,CAACC,EAAE,CAAE,CAAEC,IAAI,CAAE,EAAR,CAAL,CAAqBC,EAAE,CAAE,CAAED,IAAI,CAAE,EAAR,CAAzB,CAAZ,CAAvB,CAEA,GAAME,CAAAA,OAAO,CAAE,QAATA,CAAAA,OAAS,CAAAC,KAAK,CAAI,CACvB,kBAAelB,IAAI,CAACmB,OAAL,EAAf,gDAAOC,IAAP,mBACA,GAAQC,CAAAA,QAAR,CAAoBH,KAApB,CAAQG,QAAR,CACA,cAA8B3B,QAAQ,CAAC,EAAD,CAAtC,wCAAO4B,OAAP,eAAgBC,UAAhB,eACA,eAA0B7B,QAAQ,CAAC,CAAD,CAAlC,yCAAO8B,KAAP,eAAcC,QAAd,eACA,eAA4B/B,QAAQ,CAAC,CAAD,CAApC,yCAAOgC,MAAP,eAAeC,SAAf,eACA,eAA4BjC,QAAQ,CAAC,KAAD,CAApC,yCAAOkC,MAAP,eAAeC,SAAf,eAEAlC,SAAS,CAAC,UAAM,CACf,GAAImC,CAAAA,SAAS,CAAG,KAAhB,CACA,MAAO,WAAM,CAACA,SAAS,CAAG,IAAZ,CAAkB,CAAhC,CACG,CAHK,CAGJ,CAACT,QAAD,CAHI,CAAT,CAMA1B,SAAS,CAAC,UAAM,CACf,GAAImC,CAAAA,SAAS,CAAG,KAAhB,CAEA,GAAIC,CAAAA,IAAI,CAAGb,KAAK,CAACc,MAAjB,CACA,GAAGd,KAAK,CAACc,MAAT,CAAgB,CACfZ,IAAI,CAACa,cAAL,oBACG,cADH,CACoBF,IAAI,CAACG,YADzB,GAEI,CAHL,IAII,CAAEd,IAAI,CAACe,WAAL,GAAqB,CAE3B,MAAO,WAAM,CAACL,SAAS,CAAG,IAAZ,CAAkB,CAAhC,CACG,CAXK,CAWJ,CAACZ,KAAK,CAACkB,OAAP,CAXI,CAAT,CAaAzC,SAAS,CAAC,UAAM,CACf,GAAImC,CAAAA,SAAS,CAAG,KAAhB,CACA,GAAKO,CAAAA,QAAL,CAAiBnB,KAAjB,CAAKmB,QAAL,CACAd,UAAU,CAACc,QAAQ,CAACC,IAAT,CAAgBD,QAAQ,CAACC,IAAT,CAAcP,IAA9B,CAAmC,EAApC,CAAV,CACA,MAAO,WAAM,CAACD,SAAS,CAAG,IAAZ,CAAkB,CAAhC,CACG,CALK,CAKJ,CAACZ,KAAK,CAACmB,QAAN,CAAeC,IAAhB,CALI,CAAT,CAOA,GAAMC,CAAAA,QAAQ,CAAE,QAAVA,CAAAA,QAAU,CAAAC,GAAG,CAAE,CAIpBX,SAAS,CAAC,IAAD,CAAT,CACA,GAAGX,KAAK,CAACc,MAAT,CAAgB,CAEfQ,GAAG,CAACC,GAAJ,CAAUvB,KAAK,CAACc,MAAN,CAAaS,GAAvB,CACApB,QAAQ,CAAC,CAACqB,IAAI,CAAE,sBAAP,CAAgCC,OAAO,CAAEH,GAAzC,CAAD,CAAR,CACA,CAJD,IAKI,CAEHnB,QAAQ,CAAC,CAACqB,IAAI,CAAE,qBAAP,CAA+BC,OAAO,CAAEH,GAAxC,CAAD,CAAR,CAEA,CACD,CAfD,CAiBA7C,SAAS,CAAC,UAAM,CACf,GAAImC,CAAAA,SAAS,CAAG,KAAhB,CACA,GAAIc,CAAAA,GAAG,CAAG1B,KAAK,CAACmB,QAAN,CAAeO,GAAzB,CACA,GAAG,CAACd,SAAD,EAAcc,GAAG,CAACpB,KAAJ,CAAYA,KAA1B,EAAmCoB,GAAG,CAACC,MAA1C,CAAiD,CAChDhB,SAAS,CAAC,KAAD,CAAT,CACCJ,QAAQ,CAACmB,GAAG,CAACpB,KAAL,CAAR,CACAN,KAAK,CAAC4B,UAAN,CAAiB,SAAjB,EACD,CAJD,IAIM,IAAG,CAAChB,SAAD,EAAcc,GAAG,CAACpB,KAAJ,CAAYA,KAA1B,EAAmC,CAACoB,GAAG,CAACC,MAA3C,CAAkD,CACtDhB,SAAS,CAAC,KAAD,CAAT,CACAJ,QAAQ,CAACmB,GAAG,CAACpB,KAAL,CAAR,CACD,CAED;AACA,GAAIuB,CAAAA,IAAI,CAAG7B,KAAK,CAACmB,QAAN,CAAeU,IAA1B,CACA,GAAG,CAACjB,SAAD,EAAciB,IAAI,CAACvB,KAAL,CAAaE,MAA3B,EAAqCqB,IAAI,CAACF,MAA7C,CAAoD,CAClDhB,SAAS,CAAC,KAAD,CAAT,CACAF,SAAS,CAACoB,IAAI,CAACvB,KAAN,CAAT,CAEAN,KAAK,CAAC4B,UAAN,CAAiB,SAAjB,EACD,CALD,IAKM,IAAG,CAAChB,SAAD,EAAciB,IAAI,CAACvB,KAAL,CAAaE,MAA3B,EAAqC,CAACqB,IAAI,CAACF,MAA9C,CAAqD,CACzDhB,SAAS,CAAC,KAAD,CAAT,CACAF,SAAS,CAACoB,IAAI,CAACvB,KAAN,CAAT,CACD,CACD,MAAO,WAAM,CACZM,SAAS,CAAG,IAAZ,CACA,CAFD,CAGA,CA1BQ,CA0BP,CAACZ,KAAK,CAACmB,QAAP,CA1BO,CAAT,CA4BA,GAAMW,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAI,CACrB,GAAG,CAAC9B,KAAK,CAACc,MAAV,CACCZ,IAAI,CAACe,WAAL,GACDjB,KAAK,CAAC+B,UAAN,GACA,CAJD,CAOD,mBACC,oBAAC,KAAD,EAAO,OAAO,CAAE/B,KAAK,CAACkB,OAAtB,CAA+B,KAAK,CAAElB,KAAK,CAACc,MAAN,CAAa,cAAb,CAA4B,aAAlE,CAAiF,QAAQ,CAAEgB,SAA3F,CAAsG,MAAM,cAAE,oBAAC,QAAD,mBAC3G,oBAAC,MAAD,EAAQ,OAAO,CAAEA,SAAjB,WAD2G,cAE3G,oBAAC,MAAD,EAAQ,IAAI,CAAC,SAAb,CAAuB,QAAQ,CAAEpB,MAAjC,CAAyC,SAAS,CAAC,2BAAnD,CAA+E,OAAO,CAAE,yBAAIR,CAAAA,IAAI,CAAC8B,MAAL,EAAJ,EAAxF,EAA4GhC,KAAK,CAACc,MAAN,CAAa,cAAb,CAA4B,aAAxI,CAF2G,CAA9G,eAIC,oBAAC,IAAD,kBAAUpB,cAAV,EAA0B,IAAI,CAAEQ,IAAhC,CAAsC,IAAI,CAAC,UAA3C,CAAsD,MAAM,CAAC,UAA7D,CAAwE,QAAQ,CAAEmB,QAAlF,CAA4F,SAAS,CAAC,aAAtG,gBACC,oBAAC,IAAD,CAAM,IAAN,EAAW,IAAI,CAAC,cAAhB,CAAgC,KAAK,CAAE,CAAC,CAAEY,QAAQ,CAAE,IAAZ,CAAkBC,OAAO,CAAE,yBAA3B,CAAD,CAAwD,CAAEC,GAAG,CAAE,EAAP,CAAWD,OAAO,CAAE,sDAApB,CAAxD,CAAvC,eACC,oBAAC,KAAD,EAAO,WAAW,CAAC,oBAAnB,EADD,CADD,CAJD,CADD,CAYE,CAlGF,CAoGA,cAAezC,CAAAA,OAAO,CAAC,kBAAG0B,CAAAA,QAAH,MAAGA,QAAH,CAAaiB,MAAb,MAAaA,MAAb,CAAqBC,OAArB,MAAqBA,OAArB,OAAoC,CACzDlB,QAAQ,CAACA,QADgD,CAEzDiB,MAAM,CAAEA,MAFiD,CAGzDC,OAAO,CAAEA,OAHgD,CAApC,EAAD,CAAP,CAIXtC,OAJW,CAAf","sourcesContent":["import React, { useState,useEffect,useRef, Fragment} from 'react';\r\nimport {Empty, Modal,Form,Input,Button,Switch, Upload, Dropdown, Menu, Select, notification, Transfer, DatePicker } from 'antd';\r\n\r\nimport { connect } from 'dva';\r\n\r\nconst formItemLayout = { labelCol: {xs: { span: 24, },  sm: { span: 24, },}};\r\n\r\nconst AddEdit =props => {\r\n\tconst [form] = Form.useForm();\r\n\tconst { dispatch} = props;\r\n\tconst [catlist, setCatlist] = useState([])\r\n\tconst [count, setCount] = useState(0)\r\n\tconst [dcount, setDCount] = useState(0)\r\n\tconst [btnDis, setBtnDis] = useState(false)\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\treturn () => {unmounted = true;}\r\n    },[dispatch])\r\n\t\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\r\n\t\tlet data = props.detail;\t\t\r\n\t\tif(props.detail){\r\n\t\t\tform.setFieldsValue({\r\n\t\t\t  ['subject_name']: data.subject_name, \r\n\t\t\t});}\r\n\t\telse{ form.resetFields(); }\r\n\t\t\r\n\t\treturn () => {unmounted = true;}\r\n    },[props.visible])\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\tlet {subjects} = props;\r\n\t\tsetCatlist(subjects.list ? subjects.list.data:[]);\r\n\t\treturn () => {unmounted = true;}\r\n    },[props.subjects.list])\r\n\t\r\n\tconst onFinish= val=>{\r\n\r\n\r\n\t\t\r\n\t\tsetBtnDis(true);\r\n\t\tif(props.detail){\r\n\t\t\t\r\n\t\t\tval._id = props.detail._id\r\n\t\t\tdispatch({type: 'subjects/subjectEdit',  payload: val,});\r\n\t\t}\r\n\t\telse{\r\n\t\t\t\r\n\t\t\tdispatch({type: 'subjects/subjectAdd',  payload: val,});\r\n\r\n\t\t}\r\n\t}\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\tlet add = props.subjects.add\r\n\t\tif(!unmounted && add.count > count && add.status){\r\n\t\t\tsetBtnDis(false);\r\n\t\t  setCount(add.count);\t\t  \r\n\t\t  props.returnData('success');\r\n\t\t}else if(!unmounted && add.count > count && !add.status){\r\n\t\t  setBtnDis(false);\r\n\t\t  setCount(add.count);\r\n\t\t}\r\n\t\t\r\n\t\t// Edit\r\n\t\tlet edit = props.subjects.edit\r\n\t\tif(!unmounted && edit.count > dcount && edit.status){\r\n\t\t  setBtnDis(false);\r\n\t\t  setDCount(edit.count);\r\n\t\t  \r\n\t\t  props.returnData('success');\r\n\t\t}else if(!unmounted && edit.count > dcount && !edit.status){\r\n\t\t  setBtnDis(false);\r\n\t\t  setDCount(edit.count);\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\tunmounted = true;\r\n\t\t}\r\n\t},[props.subjects])\r\n\t\r\n\tconst cancelFun = ()=>{\r\n\t\tif(!props.detail)\r\n\t\t\tform.resetFields();\r\n\t\tprops.closeModel()\r\n\t}\r\n\r\n\t\r\nreturn (\r\n\t<Modal visible={props.visible} title={props.detail?'Edit Subject':'Add Subject'} onCancel={cancelFun} footer={<Fragment>\r\n\t\t\t\t<Button onClick={cancelFun}>Cancel</Button>\r\n\t\t\t\t<Button type=\"primary\" disabled={btnDis} className=\"btn-w25 btn-primary-light\" onClick={()=>form.submit()}>{props.detail?'Edit Subject':'Add Subject'}</Button>\r\n\t\t\t</Fragment>} >\r\n\t\t<Form {...formItemLayout} form={form} name=\"loc_info\" layout=\"vertical\" onFinish={onFinish} className=\"innerFields\">\r\n\t\t\t<Form.Item name=\"subject_name\"  rules={[{ required: true, message: 'This field is required!' },{ max: 25, message: 'Subject Name must not be greater than 25 characters.' }]} >\r\n\t\t\t\t<Input placeholder=\"Enter Subject Name\" />\r\n\t\t\t</Form.Item>\r\n\t\t</Form>\r\n\t\t\r\n\t</Modal>\r\n)};\r\n\r\nexport default connect(({ subjects, global, loading }) => ({\r\n  subjects:subjects,\r\n  global: global,\r\n  loading: loading \r\n}))(AddEdit);"]},"metadata":{},"sourceType":"module"}