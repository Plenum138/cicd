{"ast":null,"code":"var _jsxFileName = \"/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/src/pages/time_table/action/addEdit.jsx\";\nimport React, { useState, useEffect, useRef, Fragment } from 'react';\nimport { Row, Col, Empty, Modal, Card, Typography, Alert, Form, Input, Checkbox, Button, Space, Upload, Dropdown, Menu, Select, notification, Transfer, DatePicker, TimePicker, message, InputNumber } from 'antd';\nimport { LeftOutlined, LoadingOutlined, EditOutlined, CloseOutlined, PlusOutlined, MinusCircleOutlined } from '@ant-design/icons';\nimport moment from 'moment';\nimport { connect } from 'dva';\nconst dateFormat = 'MM/DD/YYYY';\nconst {\n  Option\n} = Select;\nconst {\n  RangePicker\n} = TimePicker;\nconst days = [{\n  value: 0,\n  day: 'Sunday'\n}, {\n  value: 1,\n  day: 'Monday'\n}, {\n  value: 2,\n  day: 'Tuesday'\n}, {\n  value: 3,\n  day: 'Wednesday'\n}, {\n  value: 4,\n  day: 'Thursday'\n}, {\n  value: 5,\n  day: 'Friday'\n}, {\n  value: 6,\n  day: 'Saturday'\n}];\nconst formItemLayout = {\n  labelCol: {\n    xs: {\n      span: 24\n    },\n    sm: {\n      span: 24\n    }\n  }\n};\nconst baseUrl = process.env.REACT_APP_ApiUrl;\n\nconst AddEditTimeTable = props => {\n  var _subjects$listData, _subjects$listData$da, _subjects$listData2, _subjects$listData2$d, _subjects$listData3, _subjects$listData3$d, _subjects$listData4, _subjects$listData4$d;\n\n  const [form] = Form.useForm();\n  const {\n    dispatch,\n    subjects\n  } = props;\n  const [Inquiry, setInquiry] = useState('');\n  const [PageId, setPageId] = useState('');\n  const [count, setCount] = useState(0);\n  const [yearList, setYearList] = useState([]);\n  const [classList, setClassList] = useState([]);\n  const [stream, setStream] = useState('');\n  const classArray = subjects === null || subjects === void 0 ? void 0 : (_subjects$listData = subjects.listData) === null || _subjects$listData === void 0 ? void 0 : (_subjects$listData$da = _subjects$listData.data) === null || _subjects$listData$da === void 0 ? void 0 : _subjects$listData$da.class_list;\n  const teacherArray = subjects === null || subjects === void 0 ? void 0 : (_subjects$listData2 = subjects.listData) === null || _subjects$listData2 === void 0 ? void 0 : (_subjects$listData2$d = _subjects$listData2.data) === null || _subjects$listData2$d === void 0 ? void 0 : _subjects$listData2$d.teacher_list;\n  const subjectArray = subjects === null || subjects === void 0 ? void 0 : (_subjects$listData3 = subjects.listData) === null || _subjects$listData3 === void 0 ? void 0 : (_subjects$listData3$d = _subjects$listData3.data) === null || _subjects$listData3$d === void 0 ? void 0 : _subjects$listData3$d.subject_list;\n  const streamArray = subjects === null || subjects === void 0 ? void 0 : (_subjects$listData4 = subjects.listData) === null || _subjects$listData4 === void 0 ? void 0 : (_subjects$listData4$d = _subjects$listData4.data) === null || _subjects$listData4$d === void 0 ? void 0 : _subjects$listData4$d.stream_list;\n  useEffect(() => {\n    let unmounted = false;\n    let user_id = localStorage.getItem('userId');\n    props.dispatch({\n      type: 'subjects/getsubjectList',\n      payload: {\n        user_id: user_id\n      }\n    });\n    window.scroll(0, 0);\n\n    if (props.match.params.id) {\n      DetailFun(props.match.params.id);\n    } else {\n      form.resetFields();\n    }\n\n    return () => {\n      unmounted = true;\n    };\n  }, [dispatch]);\n\n  const DetailFun = id => {\n    props.dispatch({\n      type: 'time_tables/detailTimeTable',\n      payload: id\n    });\n  };\n\n  useEffect(() => {\n    let unmounted = false;\n\n    if (props.time_tables.add) {\n      dispatch({\n        type: 'time_tables/clearAction'\n      });\n      props.history.push('/time-tables');\n    }\n\n    if (props.time_tables.edit) {\n      dispatch({\n        type: 'time_tables/clearAction'\n      });\n      props.history.push('/time-tables');\n    }\n\n    if (props.time_tables && props.time_tables.detail && props.time_tables.detail.status) {\n      let data = props.time_tables.detail.data[0];\n      console.log('data', data);\n      setPageId(data._id);\n      form.setFieldsValue({\n        ['stream_id']: data.stream_id,\n        ['year']: data.year,\n        ['class_name']: data.class,\n        ['teacher_id']: data.teacher_id,\n        ['subject_id']: data.subject_id,\n        ['date']: moment(new Date(data.date)),\n        ['time_range']: [moment(new Date(data.startTime)), moment(new Date(data.endTime))]\n      }); // {\n      // \t\"_id\": \"629f48a0489d5e8266a0f043\",\n      // \t\"teacher_id\": \"6299e9526543180bbd65b9ad\",\n      // \t\"school_id\": \"625031af2eb80e5d5ad3d8e5\",\n      // \t\"subject_id\": \"629a13eb423b8a4aefa2ed18\",\n      // \t\"startTime\": \"2022-06-06T18:37:00.051Z\",\n      // \t\"endTime\": \"2022-06-07T00:30:00.669Z\",\n      // \t\"date\": \"2022-06-27T12:46:16.628Z\",\n      // \t\"stream_id\": \"628c7826c70eff5ac08296b4\",\n      // \t\"year\": \"1 Year\",\n      // \t\"class\": \"101\",\n      // \t\"created_at\": \"2022-06-07T12:46:24.059Z\",\n      // \t\"updated_at\": \"2022-06-07T12:46:24.059Z\",\n      // \t\"__v\": 0\n      // }\n    }\n\n    return () => {\n      unmounted = true;\n    };\n  }, [props.time_tables]);\n\n  const cancelFun = () => {\n    form.resetFields();\n    props.history.push('/time_tables');\n  };\n\n  const handleChange = value => {\n    console.log(`selected ${value}`);\n  };\n\n  const onFinish = val => {\n    if (props.match.params.id) {\n      val._id = PageId;\n      dispatch({\n        type: 'time_tables/editTimeTable',\n        payload: val\n      });\n    } else {\n      dispatch({\n        type: 'time_tables/AddTimeTable',\n        payload: val\n      });\n    }\n  };\n\n  const onStreamChange = async function (e) {\n    let needUpdate_ = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    form.setFieldsValue({\n      ['year']: []\n    });\n    form.setFieldsValue({\n      ['class_name']: []\n    });\n    form.setFieldsValue({\n      ['teacher_id']: []\n    });\n    form.setFieldsValue({\n      ['subject_id']: []\n    });\n    const year_list = [...new Map(classArray && classArray.filter(item => item.streamInfo._id === e).map(item => [item[\"year\"], item])).values()];\n    setYearList(year_list);\n    setStream(e);\n  };\n\n  const onYearChange = async function (e) {\n    let needUpdate_ = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    form.setFieldsValue({\n      ['class_name']: []\n    });\n    form.setFieldsValue({\n      ['teacher_id']: []\n    });\n    form.setFieldsValue({\n      ['subject_id']: []\n    });\n    const class_list = classArray && classArray.filter(item => item.year === e && item.stream_id === stream);\n    setClassList(class_list);\n  };\n\n  return /*#__PURE__*/React.createElement(Card, {\n    title: /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(LeftOutlined, {\n      onClick: () => props.history.push('/time-tables'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 22\n      }\n    }), props.detail ? 'Edit Time Table' : 'Add Time Table'),\n    style: {\n      marginTop: \"0\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Form, Object.assign({}, formItemLayout, {\n    form: form,\n    name: \"loc_info\",\n    layout: \"vertical\",\n    onFinish: onFinish,\n    className: \"innerFields\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(Row, {\n    gutter: 15,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    sm: 24,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"stream_id\",\n    label: \"Stream\",\n    rules: [{\n      required: true,\n      message: 'Field required!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    placeholder: \"Select Stream\",\n    onChange: e => onStreamChange(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 8\n    }\n  }, streamArray && streamArray.map((item, index) => {\n    var _item$streamInfo, _item$streamInfo2;\n\n    return /*#__PURE__*/React.createElement(Select.Option, {\n      key: index,\n      value: item === null || item === void 0 ? void 0 : (_item$streamInfo = item.streamInfo) === null || _item$streamInfo === void 0 ? void 0 : _item$streamInfo._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 58\n      }\n    }, item === null || item === void 0 ? void 0 : (_item$streamInfo2 = item.streamInfo) === null || _item$streamInfo2 === void 0 ? void 0 : _item$streamInfo2.name);\n  })))), /*#__PURE__*/React.createElement(Col, {\n    sm: 24,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"year\",\n    label: \"Select Year\",\n    rules: [{\n      required: true,\n      message: 'Field required!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    placeholder: \"Select Year\",\n    onChange: e => onYearChange(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 8\n    }\n  }, yearList && yearList.map((item, index) => /*#__PURE__*/React.createElement(Select.Option, {\n    key: index,\n    value: item.year,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 52\n    }\n  }, item.year)))))), /*#__PURE__*/React.createElement(Row, {\n    gutter: 15,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    sm: 24,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"class_name\",\n    label: \"Select Class\",\n    rules: [{\n      required: true,\n      message: 'Field required!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    placeholder: \"Select Class\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 8\n    }\n  }, classList && classList.map((item, index) => /*#__PURE__*/React.createElement(Select.Option, {\n    key: index,\n    value: item.class_name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 54\n    }\n  }, item.class_name))))), /*#__PURE__*/React.createElement(Col, {\n    sm: 24,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"subject_id\",\n    label: \"Select Subject\",\n    rules: [{\n      required: true,\n      message: 'Field required!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    placeholder: \"Select Subject\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 8\n    }\n  }, subjectArray && subjectArray.map((item, index) => /*#__PURE__*/React.createElement(Select.Option, {\n    key: index,\n    value: item === null || item === void 0 ? void 0 : item._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 60\n    }\n  }, item === null || item === void 0 ? void 0 : item.subject_name)))))), /*#__PURE__*/React.createElement(Row, {\n    gutter: 15,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    sm: 24,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"teacher_id\",\n    label: \"Select Teacher\",\n    rules: [{\n      required: true,\n      message: 'Field required!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    placeholder: \"Select Teacher\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 8\n    }\n  }, teacherArray && teacherArray.map((item, index) => /*#__PURE__*/React.createElement(Select.Option, {\n    key: index,\n    value: item === null || item === void 0 ? void 0 : item._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 60\n    }\n  }, item === null || item === void 0 ? void 0 : item.username))))), /*#__PURE__*/React.createElement(Col, {\n    sm: 24,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"class_location\",\n    label: \"Class Location\",\n    rules: [{\n      required: true,\n      message: 'Field required!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    size: \"large\",\n    placeholder: \"Enter Class Location\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 8\n    }\n  })))), /*#__PURE__*/React.createElement(Row, {\n    gutter: 15,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    sm: 24,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"date\",\n    label: \"Select Session\",\n    rules: [{\n      required: true,\n      message: 'Field required!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(DatePicker.RangePicker, {\n    format: \"YYYY-MM-DD\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 8\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    sm: 24,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"days\",\n    label: \"Select Days\",\n    rules: [{\n      required: true,\n      message: 'Field required!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    mode: \"multiple\",\n    allowClear: true,\n    style: {\n      width: '100%'\n    },\n    placeholder: \"Please select days\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 8\n    }\n  }, days.map((item, index) => /*#__PURE__*/React.createElement(Option, {\n    key: index,\n    value: item.value,\n    label: item.day,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"demo-option-label-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 11\n    }\n  }, item.day)))))), /*#__PURE__*/React.createElement(Col, {\n    sm: 24,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"time_range\",\n    label: \"Time Range\",\n    rules: [{\n      required: true,\n      message: 'Field required!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(RangePicker, {\n    use12Hours: true,\n    format: \"h:mm a\",\n    bordered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 8\n    }\n  })))), /*#__PURE__*/React.createElement(Row, {\n    gutter: 15,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Form.Item, {\n    className: \"mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: cancelFun,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 6\n    }\n  }, \"Cancel\"), \"\\xA0\\xA0\", /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    className: \"btn-w25 btn-primary-light\",\n    onClick: () => form.submit(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 6\n    }\n  }, \"Save\"))));\n};\n\nexport default connect(_ref => {\n  let {\n    time_tables,\n    global,\n    loading,\n    subjects\n  } = _ref;\n  return {\n    time_tables: time_tables,\n    global: global,\n    subjects: subjects\n  };\n})(AddEditTimeTable);","map":{"version":3,"sources":["/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/src/pages/time_table/action/addEdit.jsx"],"names":["React","useState","useEffect","useRef","Fragment","Row","Col","Empty","Modal","Card","Typography","Alert","Form","Input","Checkbox","Button","Space","Upload","Dropdown","Menu","Select","notification","Transfer","DatePicker","TimePicker","message","InputNumber","LeftOutlined","LoadingOutlined","EditOutlined","CloseOutlined","PlusOutlined","MinusCircleOutlined","moment","connect","dateFormat","Option","RangePicker","days","value","day","formItemLayout","labelCol","xs","span","sm","baseUrl","process","env","REACT_APP_ApiUrl","AddEditTimeTable","props","form","useForm","dispatch","subjects","Inquiry","setInquiry","PageId","setPageId","count","setCount","yearList","setYearList","classList","setClassList","stream","setStream","classArray","listData","data","class_list","teacherArray","teacher_list","subjectArray","subject_list","streamArray","stream_list","unmounted","user_id","localStorage","getItem","type","payload","window","scroll","match","params","id","DetailFun","resetFields","time_tables","add","history","push","edit","detail","status","console","log","_id","setFieldsValue","stream_id","year","class","teacher_id","subject_id","Date","date","startTime","endTime","cancelFun","handleChange","onFinish","val","onStreamChange","e","needUpdate_","year_list","Map","filter","item","streamInfo","map","values","onYearChange","marginTop","required","index","name","class_name","subject_name","username","width","submit","global","loading"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, Fragment } from 'react';\r\nimport { Row, Col, Empty, Modal, Card, Typography, Alert, Form, Input, Checkbox, Button, Space, Upload, Dropdown, Menu, Select, notification, Transfer, DatePicker, TimePicker, message, InputNumber } from 'antd';\r\nimport { LeftOutlined, LoadingOutlined, EditOutlined, CloseOutlined, PlusOutlined, MinusCircleOutlined } from '@ant-design/icons';\r\nimport moment from 'moment';\r\nimport { connect } from 'dva';\r\nconst dateFormat = 'MM/DD/YYYY';\r\nconst { Option } = Select;\r\n\r\nconst { RangePicker } = TimePicker;\r\nconst days = [{ value: 0, day: 'Sunday' }, { value: 1, day: 'Monday' }, { value: 2, day: 'Tuesday' }, { value: 3, day: 'Wednesday' }, { value: 4, day: 'Thursday' }, { value: 5, day: 'Friday' }, { value: 6, day: 'Saturday' }]\r\n\r\nconst formItemLayout = { labelCol: { xs: { span: 24, }, sm: { span: 24, }, } };\r\nconst baseUrl = process.env.REACT_APP_ApiUrl\r\nconst AddEditTimeTable = props => {\r\n\tconst [form] = Form.useForm();\r\n\tconst { dispatch, subjects } = props;\r\n\tconst [Inquiry, setInquiry] = useState('');\r\n\tconst [PageId, setPageId] = useState('');\r\n\tconst [count, setCount] = useState(0)\r\n\tconst [yearList, setYearList] = useState([])\r\n\tconst [classList, setClassList] = useState([])\r\n\tconst [stream, setStream] = useState('');\r\n\tconst classArray = subjects?.listData?.data?.class_list;\r\n\tconst teacherArray = subjects?.listData?.data?.teacher_list;\r\n\tconst subjectArray = subjects?.listData?.data?.subject_list;\r\n\tconst streamArray = subjects?.listData?.data?.stream_list\r\n\r\n\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\tlet user_id = localStorage.getItem('userId');\r\n\t\tprops.dispatch({ type: 'subjects/getsubjectList', payload: { user_id: user_id } });\r\n\r\n\t\twindow.scroll(0, 0);\r\n\t\tif (props.match.params.id) {\r\n\t\t\tDetailFun(props.match.params.id)\r\n\t\t} else {\r\n\t\t\tform.resetFields();\r\n\t\t}\r\n\t\treturn () => { unmounted = true; }\r\n\t}, [dispatch])\r\n\r\n\tconst DetailFun = (id) => {\r\n\t\tprops.dispatch({ type: 'time_tables/detailTimeTable', payload: id });\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\r\n\t\tif (props.time_tables.add) {\r\n\t\t\tdispatch({ type: 'time_tables/clearAction' });\r\n\t\t\tprops.history.push('/time-tables');\r\n\t\t}\r\n\r\n\t\tif (props.time_tables.edit) {\r\n\t\t\tdispatch({ type: 'time_tables/clearAction' });\r\n\t\t\tprops.history.push('/time-tables');\r\n\t\t}\r\n\r\n\t\tif (props.time_tables && props.time_tables.detail && props.time_tables.detail.status) {\r\n\t\t\tlet data = props.time_tables.detail.data[0];\r\n\t\t\tconsole.log('data', data);\r\n\t\t\tsetPageId(data._id)\r\n\r\n\r\n\r\n\t\t\tform.setFieldsValue({\r\n\t\t\t\t['stream_id']: data.stream_id,\r\n\t\t\t\t['year']: data.year,\r\n\t\t\t\t['class_name']: data.class,\r\n\t\t\t\t['teacher_id']: data.teacher_id,\r\n\t\t\t\t['subject_id']: data.subject_id,\r\n\t\t\t\t['date']: moment(new Date(data.date)),\r\n\t\t\t\t['time_range']: [moment(new Date(data.startTime)), moment(new Date(data.endTime))],\r\n\r\n\r\n\r\n\t\t\t})\r\n\t\t\t// {\r\n\t\t\t// \t\"_id\": \"629f48a0489d5e8266a0f043\",\r\n\t\t\t// \t\"teacher_id\": \"6299e9526543180bbd65b9ad\",\r\n\t\t\t// \t\"school_id\": \"625031af2eb80e5d5ad3d8e5\",\r\n\t\t\t// \t\"subject_id\": \"629a13eb423b8a4aefa2ed18\",\r\n\t\t\t// \t\"startTime\": \"2022-06-06T18:37:00.051Z\",\r\n\t\t\t// \t\"endTime\": \"2022-06-07T00:30:00.669Z\",\r\n\t\t\t// \t\"date\": \"2022-06-27T12:46:16.628Z\",\r\n\t\t\t// \t\"stream_id\": \"628c7826c70eff5ac08296b4\",\r\n\t\t\t// \t\"year\": \"1 Year\",\r\n\t\t\t// \t\"class\": \"101\",\r\n\t\t\t// \t\"created_at\": \"2022-06-07T12:46:24.059Z\",\r\n\t\t\t// \t\"updated_at\": \"2022-06-07T12:46:24.059Z\",\r\n\t\t\t// \t\"__v\": 0\r\n\t\t\t// }\r\n\r\n\t\t}\r\n\r\n\t\treturn () => { unmounted = true; }\r\n\t}, [props.time_tables])\r\n\r\n\tconst cancelFun = () => {\r\n\t\tform.resetFields();\r\n\t\tprops.history.push('/time_tables');\r\n\t}\r\n\r\n\tconst handleChange = (value) => {\r\n\t\tconsole.log(`selected ${value}`);\r\n\t};\r\n\r\n\tconst onFinish = val => {\r\n\r\n\r\n\t\tif (props.match.params.id) {\r\n\t\t\tval._id = PageId;\r\n\r\n\t\t\tdispatch({ type: 'time_tables/editTimeTable', payload: val });\r\n\t\t} else {\r\n\t\t\tdispatch({ type: 'time_tables/AddTimeTable', payload: val });\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tconst onStreamChange = async (e, needUpdate_ = false) => {\r\n\t\tform.setFieldsValue({ ['year']: [], })\r\n\t\tform.setFieldsValue({ ['class_name']: [], })\r\n\t\tform.setFieldsValue({ ['teacher_id']: [], })\r\n\t\tform.setFieldsValue({ ['subject_id']: [], })\r\n\r\n\t\tconst year_list = [...new Map(classArray && classArray.filter((item) => item.streamInfo._id === e).map((item) => [item[\"year\"], item])).values(),];\r\n\t\tsetYearList(year_list)\r\n\t\tsetStream(e)\r\n\t}\r\n\tconst onYearChange = async (e, needUpdate_ = false) => {\r\n\t\tform.setFieldsValue({ ['class_name']: [], })\r\n\t\tform.setFieldsValue({ ['teacher_id']: [], })\r\n\t\tform.setFieldsValue({ ['subject_id']: [], })\r\n\t\tconst class_list = classArray && classArray.filter((item) => item.year === e && item.stream_id === stream)\r\n\t\tsetClassList(class_list)\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\treturn (\r\n\t\t<Card title={<span><LeftOutlined onClick={() => props.history.push('/time-tables')} />\r\n\t\t\t{props.detail ? 'Edit Time Table' : 'Add Time Table'}</span>} style={{ marginTop: \"0\" }}>\r\n\r\n\t\t\t<Form {...formItemLayout} form={form} name=\"loc_info\" layout=\"vertical\" onFinish={onFinish} className=\"innerFields\">\r\n\r\n\t\t\t\t<Row gutter={15}>\r\n\t\t\t\t\t<Col sm={24} md={12}>\r\n\t\t\t\t\t\t<Form.Item name=\"stream_id\" label=\"Stream\" rules={[{ required: true, message: 'Field required!' },]}  >\r\n\t\t\t\t\t\t\t<Select placeholder=\"Select Stream\" onChange={(e) => onStreamChange(e)}>\r\n\t\t\t\t\t\t\t\t{streamArray && streamArray.map((item, index) => <Select.Option key={index} value={item?.streamInfo?._id}>{item?.streamInfo?.name}</Select.Option>)}\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t<Col sm={24} md={12}>\r\n\t\t\t\t\t\t<Form.Item name=\"year\" label=\"Select Year\" rules={[{ required: true, message: 'Field required!' },]}  >\r\n\t\t\t\t\t\t\t<Select placeholder=\"Select Year\" onChange={(e) => onYearChange(e)}>\r\n\t\t\t\t\t\t\t\t{yearList && yearList.map((item, index) => <Select.Option key={index} value={item.year}>{item.year}</Select.Option>)}\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\r\n\r\n\t\t\t\t<Row gutter={15}>\r\n\t\t\t\t\t<Col sm={24} md={12}>\r\n\t\t\t\t\t\t<Form.Item name=\"class_name\" label=\"Select Class\" rules={[{ required: true, message: 'Field required!' },]}  >\r\n\t\t\t\t\t\t\t<Select placeholder=\"Select Class\" >\r\n\t\t\t\t\t\t\t\t{classList && classList.map((item, index) => <Select.Option key={index} value={item.class_name}>{item.class_name}</Select.Option>)}\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t<Col sm={24} md={12}>\r\n\t\t\t\t\t\t<Form.Item name=\"subject_id\" label=\"Select Subject\" rules={[{ required: true, message: 'Field required!' },]}  >\r\n\t\t\t\t\t\t\t<Select placeholder=\"Select Subject\" >\r\n\t\t\t\t\t\t\t\t{subjectArray && subjectArray.map((item, index) => <Select.Option key={index} value={item?._id}>{item?.subject_name}</Select.Option>)}\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\r\n\t\t\t\t<Row gutter={15}>\r\n\t\t\t\t\t<Col sm={24} md={12}>\r\n\t\t\t\t\t\t<Form.Item name=\"teacher_id\" label=\"Select Teacher\" rules={[{ required: true, message: 'Field required!' },]}  >\r\n\t\t\t\t\t\t\t<Select placeholder=\"Select Teacher\" >\r\n\t\t\t\t\t\t\t\t{teacherArray && teacherArray.map((item, index) => <Select.Option key={index} value={item?._id}>{item?.username}</Select.Option>)}\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t<Col sm={24} md={12}>\r\n\t\t\t\t\t\t<Form.Item name=\"class_location\" label=\"Class Location\" rules={[{ required: true, message: 'Field required!' },]}  >\r\n\t\t\t\t\t\t\t<Input size=\"large\" placeholder=\"Enter Class Location\" />\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\r\n\r\n\t\t\t\t</Row>\r\n\r\n\r\n\t\t\t\t<Row gutter={15}>\r\n\t\t\t\t\t<Col sm={24} md={6}>\r\n\t\t\t\t\t\t<Form.Item name=\"date\" label=\"Select Session\" rules={[{ required: true, message: 'Field required!' },]}  >\r\n\t\t\t\t\t\t\t<DatePicker.RangePicker format=\"YYYY-MM-DD\" />\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\r\n\r\n\t\t\t\t\t<Col sm={24} md={12}>\r\n\t\t\t\t\t\t<Form.Item name=\"days\" label=\"Select Days\" rules={[{ required: true, message: 'Field required!' },]}  >\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tmode=\"multiple\"\r\n\t\t\t\t\t\t\t\tallowClear\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tplaceholder=\"Please select days\"\r\n\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{days.map((item, index) =>\r\n\t\t\t\t\t\t\t\t\t<Option key={index} value={item.value} label={item.day}>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"demo-option-label-item\">\r\n\t\t\t\t\t\t\t\t\t\t{item.day}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</Option>)}\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t<Col sm={24} md={6}>\r\n\t\t\t\t\t\t<Form.Item name=\"time_range\" label=\"Time Range\" rules={[{ required: true, message: 'Field required!' },]}  >\r\n\r\n\t\t\t\t\t\t\t<RangePicker \t use12Hours format=\"h:mm a\" bordered={true} />\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<Row gutter={15}>\r\n\r\n\t\t\t\t\r\n\r\n\r\n\t\t\t\t</Row>\r\n\r\n\t\t\t\t<Form.Item className=\"mb-0\">\r\n\t\t\t\t\t<Button onClick={cancelFun}>Cancel</Button>&nbsp;&nbsp;\r\n\t\t\t\t\t<Button type=\"primary\" className=\"btn-w25 btn-primary-light\" onClick={() => form.submit()}>Save</Button>\r\n\t\t\t\t</Form.Item>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t</Form>\r\n\r\n\t\t</Card>\r\n\t)\r\n};\r\n\r\nexport default connect(({ time_tables, global, loading, subjects }) => ({\r\n\ttime_tables: time_tables,\r\n\tglobal: global,\r\n\tsubjects: subjects,\r\n}))(AddEditTimeTable);"]},"metadata":{},"sourceType":"module"}