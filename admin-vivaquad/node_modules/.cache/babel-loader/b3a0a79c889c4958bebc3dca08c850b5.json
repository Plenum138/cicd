{"ast":null,"code":"var _jsxFileName = \"/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/src/pages/students/action/addEdit.jsx\";\nimport React, { useState, useEffect, useRef, Fragment } from 'react';\nimport { Row, Col, Empty, Modal, Card, Typography, InputNumber, Form, Input, Checkbox, Button, Switch, Upload, Dropdown, Menu, Select, notification, Transfer, DatePicker, Avatar, message, Descriptions } from 'antd';\nimport { LeftOutlined, LoadingOutlined, EditOutlined, CloseOutlined } from '@ant-design/icons';\nimport { section, semester } from '../../../utils/section';\nimport moment from 'moment';\nimport { connect } from 'dva';\nimport styles from './style.less';\nconst {\n  Text\n} = Typography;\nconst {\n  TextArea\n} = Input;\nconst timestemp = new Date().getTime();\nconst {\n  RangePicker\n} = DatePicker;\nconst formItemLayout = {\n  labelCol: {\n    xs: {\n      span: 24\n    },\n    sm: {\n      span: 24\n    }\n  }\n};\nconst dateFormat = 'YYYY/MM/DD';\n\nconst AddEditStudent = props => {\n  var _detail$schoolDetail, _detail$schoolDetail2, _detail$schoolDetail3;\n\n  const [form] = Form.useForm();\n  const [form2] = Form.useForm();\n  const {\n    dispatch,\n    category\n  } = props;\n  const [visible, setVisible] = useState(false);\n  const [detail, setDetail] = useState({});\n  const [classDetail, setclassDetail] = useState([]);\n  const [itemId, setItemId] = useState();\n  const [imageUrl, setImageUrl] = useState('');\n  const [picModel, setPicModel] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [InquiryData, setInquiryData] = useState('');\n  const [Inquiry, setInquiry] = useState('');\n  const [count, setCount] = useState(0);\n  const [ecount, setECount] = useState(0);\n  const [dcount, setDCount] = useState(0);\n  const [btnDis, setBtnDis] = useState(false);\n  console.log('const', classDetail);\n  useEffect(() => {\n    let unmounted = false;\n    window.scroll(0, 0);\n\n    if (props.match && props.match.params.id) {\n      setItemId(props.match.params.id);\n      DetailFun(props.match.params.id);\n    } else {\n      form.resetFields();\n      setImageUrl('');\n    }\n\n    return () => {\n      unmounted = true;\n    };\n  }, [dispatch]);\n\n  const DetailFun = id => {\n    props.dispatch({\n      type: 'users/getDetail',\n      payload: {\n        _id: id,\n        profile_id: id\n      }\n    });\n  };\n\n  const onFinish = val => {\n    props.dispatch({\n      type: 'users/updateMeal',\n      payload: {\n        _id: props.match.params.id,\n        meal: val.meal\n      }\n    });\n    form.setFieldsValue({\n      ['meal']: val.meal\n    });\n  };\n\n  const onFinishClass = val => {\n    props.dispatch({\n      type: 'users/updateMeal',\n      payload: {\n        _id: props.match.params.id,\n        meal: val.meal\n      }\n    });\n    form.setFieldsValue({\n      ['meal']: val.meal\n    });\n  };\n\n  useEffect(() => {\n    let unmounted = false; // Edit\n\n    let edit = props.users.edit;\n\n    if (!unmounted && edit.count > ecount && edit.status) {\n      setECount(edit.count);\n      setBtnDis(false);\n      setImageUrl('');\n      cancelFun();\n    } else if (!unmounted && edit.count > ecount && !edit.status) {\n      setBtnDis(false);\n      setECount(edit.count);\n    } // detail\n\n\n    if (props.match && props.match.params.id) {\n      let detail = props.users.detail;\n      console.log(\"detail : \", detail);\n\n      if (!unmounted && detail && detail.status) {\n        setDCount(detail.count);\n        let data = detail.profile;\n        setclassDetail(detail);\n        setDetail({ ...data,\n          username: data.username,\n          email: data.email,\n          mobile_number: data.mobile_number,\n          isEmailVerified: data.isEmailVerified,\n          isMobileVerified: data.isMobileVerified,\n          roles: data.roles\n        });\n        form.setFieldsValue({\n          ['dob']: moment(new Date(data.dob), 'YYYY/MM/DD'),\n          ['email']: data.email,\n          ['gender']: data.gender,\n          ['name']: data.name,\n          ['phone']: data.phone,\n          ['photo']: data.photo,\n          ['meal']: data.meal\n        });\n        setImageUrl(data.photo);\n      } else if (!unmounted && detail && !detail.status) {\n        setBtnDis(false);\n        setDCount(detail.count);\n      }\n    }\n\n    return () => {\n      unmounted = true;\n    };\n  }, [props.users]);\n\n  const cancelFun = () => {\n    form.resetFields();\n    setImageUrl('');\n    props.history.push('/students');\n  };\n\n  const onStreamChange = e => {\n    const year_list = [...new Map(this.state.listData && this.state.listData.filter(item => item.streamInfo[0]._id === e).map(item => [item[\"year\"], item])).values()];\n    this.setState({\n      year_list: year_list,\n      setStream: e,\n      listData: year_list\n    });\n  };\n\n  const onYearChange = e => {\n    const class_list = [...new Map(this.state.listData && this.state.listData.filter(item => item.year === e && item.stream_id === this.state.setStream).map(item => [item[\"class\"], item])).values()];\n    this.setState({\n      class_list: class_list,\n      setYear: e\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Card, {\n    title: /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(LeftOutlined, {\n      onClick: () => props.history.push('/students'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 21\n      }\n    }), \" User Details\"),\n    style: {\n      marginTop: \"0\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 2\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    gutter: 15,\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 2\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    flex: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    gutter: 100,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    sm: 12,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    class: \"label label-default\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 11\n    }\n  }, \"Profile Image\")), /*#__PURE__*/React.createElement(Avatar, {\n    shape: \"round\",\n    size: 160,\n    src: detail.avatar,\n    style: {\n      marginBottom: '2px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    sm: 12,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    class: \"label label-default\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 12\n    }\n  }, \"ID Card\")), /*#__PURE__*/React.createElement(Avatar, {\n    shape: \"square\",\n    size: 160,\n    src: detail.id_card,\n    style: {\n      marginBottom: '2px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 8\n    }\n  }))))), /*#__PURE__*/React.createElement(Descriptions, {\n    size: 'middle',\n    bordered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Descriptions.Item, {\n    label: \"Name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 11\n    }\n  }, detail.username), /*#__PURE__*/React.createElement(Descriptions.Item, {\n    label: \"Email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 5\n    }\n  }, detail.email), /*#__PURE__*/React.createElement(Descriptions.Item, {\n    label: \"Is Email Verified\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 5\n    }\n  }, detail.isEmailVerified ? 'true' : 'false'), /*#__PURE__*/React.createElement(Descriptions.Item, {\n    label: \"Role\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 5\n    }\n  }, detail.roles), /*#__PURE__*/React.createElement(Descriptions.Item, {\n    label: \"Profile Created On\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 11\n    }\n  }, moment(detail.create).format(dateFormat)), /*#__PURE__*/React.createElement(Descriptions.Item, {\n    label: \"DOB\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 5\n    }\n  }, detail.dob), /*#__PURE__*/React.createElement(Descriptions.Item, {\n    label: \"Mobile No\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 5\n    }\n  }, detail.mobile_number))), /*#__PURE__*/React.createElement(Card, {\n    title: /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 15\n      }\n    }, \" Meal Details\"),\n    style: {\n      marginTop: \"30px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 2\n    }\n  }, /*#__PURE__*/React.createElement(Form, Object.assign({}, formItemLayout, {\n    form: form,\n    name: \"loc_info\",\n    layout: \"vertical\",\n    onFinish: onFinish,\n    className: \"innerFields\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 2\n    }\n  }), /*#__PURE__*/React.createElement(Row, {\n    gutter: 15,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    flex: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    gutter: 15,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    sm: 12,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"meal\",\n    label: \"Meal\",\n    rules: [{\n      required: true,\n      message: 'This field is required.'\n    }, _ref => {\n      let {\n        getFieldValue\n      } = _ref;\n      return {\n        validator(rule, value) {\n          if (!value) {\n            return Promise.reject('');\n          }\n\n          if (value > 999) {\n            return Promise.reject('meal can not be greater than 999');\n          }\n\n          return Promise.resolve();\n        }\n\n      };\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(InputNumber, {\n    type: 'number',\n    placeholder: \"Enter Meal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 9\n    }\n  })))))), /*#__PURE__*/React.createElement(Form.Item, {\n    className: \"mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    disabled: btnDis,\n    className: \"btn-w25 btn-primary-light\",\n    onClick: () => form.submit(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 5\n    }\n  }, \"Update Meal\")))), /*#__PURE__*/React.createElement(Card, {\n    title: /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 15\n      }\n    }, \" Class Details\"),\n    style: {\n      marginTop: \"30px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 2\n    }\n  }, /*#__PURE__*/React.createElement(Form, Object.assign({}, formItemLayout, {\n    form: form2,\n    name: \"loc_info\",\n    layout: \"vertical\",\n    onFinish: onFinishClass,\n    className: \"innerFields\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 2\n    }\n  }), /*#__PURE__*/React.createElement(Form.Item, {\n    className: \"mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    disabled: btnDis,\n    className: \"btn-w25 btn-primary-light\",\n    onClick: () => form2.submit(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 5\n    }\n  }, \"Update Section\")))), /*#__PURE__*/React.createElement(Card, {\n    title: /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 15\n      }\n    }, \" School Details\"),\n    style: {\n      marginTop: \"30px\",\n      marginBottom: \"30px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 2\n    }\n  }, /*#__PURE__*/React.createElement(Descriptions, {\n    size: 'middle',\n    bordered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Descriptions.Item, {\n    label: \"School Name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 11\n    }\n  }, (_detail$schoolDetail = detail.schoolDetail) === null || _detail$schoolDetail === void 0 ? void 0 : _detail$schoolDetail.school_name), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 104\n    }\n  }), /*#__PURE__*/React.createElement(Descriptions.Item, {\n    label: \"School Address\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 5\n    }\n  }, (_detail$schoolDetail2 = detail.schoolDetail) === null || _detail$schoolDetail2 === void 0 ? void 0 : _detail$schoolDetail2.address)), /*#__PURE__*/React.createElement(Avatar, {\n    shape: \"square\",\n    size: 160,\n    src: (_detail$schoolDetail3 = detail.schoolDetail) === null || _detail$schoolDetail3 === void 0 ? void 0 : _detail$schoolDetail3.media,\n    style: {\n      marginBottom: '2px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 3\n    }\n  })));\n};\n\nexport default connect(_ref2 => {\n  let {\n    users,\n    global,\n    loading\n  } = _ref2;\n  return {\n    users: users,\n    global: global\n  };\n})(AddEditStudent);","map":{"version":3,"sources":["/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/src/pages/students/action/addEdit.jsx"],"names":["React","useState","useEffect","useRef","Fragment","Row","Col","Empty","Modal","Card","Typography","InputNumber","Form","Input","Checkbox","Button","Switch","Upload","Dropdown","Menu","Select","notification","Transfer","DatePicker","Avatar","message","Descriptions","LeftOutlined","LoadingOutlined","EditOutlined","CloseOutlined","section","semester","moment","connect","styles","Text","TextArea","timestemp","Date","getTime","RangePicker","formItemLayout","labelCol","xs","span","sm","dateFormat","AddEditStudent","props","form","useForm","form2","dispatch","category","visible","setVisible","detail","setDetail","classDetail","setclassDetail","itemId","setItemId","imageUrl","setImageUrl","picModel","setPicModel","loading","setLoading","InquiryData","setInquiryData","Inquiry","setInquiry","count","setCount","ecount","setECount","dcount","setDCount","btnDis","setBtnDis","console","log","unmounted","window","scroll","match","params","id","DetailFun","resetFields","type","payload","_id","profile_id","onFinish","val","meal","setFieldsValue","onFinishClass","edit","users","status","cancelFun","data","profile","username","email","mobile_number","isEmailVerified","isMobileVerified","roles","dob","gender","name","phone","photo","history","push","onStreamChange","e","year_list","Map","state","listData","filter","item","streamInfo","map","values","setState","setStream","onYearChange","class_list","year","stream_id","setYear","marginTop","avatar","marginBottom","id_card","create","format","required","getFieldValue","validator","rule","value","Promise","reject","resolve","submit","schoolDetail","school_name","address","media","global"],"mappings":"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","sourcesContent":["import React, { useState,useEffect,useRef, Fragment} from 'react';\r\nimport {Row, Col, Empty, Modal, Card, Typography, InputNumber,Form,Input, Checkbox,Button,Switch, Upload, Dropdown, Menu, Select, notification, Transfer, DatePicker, Avatar, message, Descriptions } from 'antd';\r\nimport { LeftOutlined, LoadingOutlined, EditOutlined, CloseOutlined} from '@ant-design/icons';\r\nimport {section , semester} from '../../../utils/section'\r\nimport moment from 'moment';\r\nimport { connect } from 'dva';\r\nimport styles from './style.less';\r\n\r\nconst { Text } = Typography;\r\nconst { TextArea } = Input;\r\nconst timestemp = (new Date()).getTime();\r\nconst { RangePicker } = DatePicker;\r\nconst formItemLayout = { labelCol: {xs: { span: 24, },  sm: { span: 24, },}};\r\nconst dateFormat = 'YYYY/MM/DD';\r\n\r\nconst AddEditStudent =props => {\r\n\tconst [form] = Form.useForm();\r\n\tconst [form2] = Form.useForm();\r\n\r\n\tconst { dispatch, category } = props;\r\n\tconst [visible, setVisible] = useState(false);\r\n\tconst [detail, setDetail] = useState({});\r\n\tconst [classDetail,setclassDetail] = useState([]);\r\n\r\n\tconst [itemId, setItemId] = useState()\r\n\tconst [imageUrl, setImageUrl] = useState('');\r\n\tconst [picModel, setPicModel] = useState(false);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [InquiryData, setInquiryData] = useState(''); \r\n\tconst [Inquiry, setInquiry] = useState('');\r\n\tconst [count, setCount] = useState(0)\r\n\tconst [ecount, setECount] = useState(0)\r\n\tconst [dcount, setDCount] = useState(0)\r\n\tconst [btnDis, setBtnDis] = useState(false)\r\n\r\n\r\nconsole.log('const' ,classDetail)\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\twindow.scroll(0, 0);\r\n\t\tif(props.match && props.match.params.id)\r\n\t\t{\r\n\t\t\tsetItemId(props.match.params.id)\r\n\t\t\tDetailFun(props.match.params.id)\r\n\r\n\t\t}else {\r\n\t\t\tform.resetFields();\r\n\t\t\tsetImageUrl('');\r\n\t\t}\r\n\t\treturn () => { unmounted = true; }\r\n    },[dispatch])\r\n\t\r\n\t\r\n\tconst DetailFun=(id)=>{\r\n\t\tprops.dispatch({type: 'users/getDetail', payload: { _id: id, profile_id: id }});\r\n\t}\r\n\t\r\n\r\n\r\n\tconst onFinish= val=>{\r\n\t\tprops.dispatch({type: 'users/updateMeal', payload: { _id: props.match.params.id, meal  : val.meal  }});\r\n\t\tform.setFieldsValue({\r\n\t\t\t ['meal']: val.meal , \r\n\t\t  });\r\n\r\n\t}\r\n\r\n\r\n\tconst onFinishClass= val=>{\r\n\t\tprops.dispatch({type: 'users/updateMeal', payload: { _id: props.match.params.id, meal  : val.meal  }});\r\n\t\tform.setFieldsValue({\r\n\t\t\t ['meal']: val.meal , \r\n\t\t  });\r\n\r\n\t}\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\t// Edit\r\n\t\tlet edit = props.users.edit\r\n\t\tif(!unmounted && edit.count > ecount && edit.status){\r\n\t\t  setECount(edit.count);\r\n\t\t  setBtnDis(false);\r\n\t\t  setImageUrl('');\r\n\t\t  cancelFun();\r\n\t\t}else if(!unmounted && edit.count > ecount && !edit.status){\r\n\t\t  setBtnDis(false);\r\n\t\t  setECount(edit.count);\r\n\t\t}\r\n\r\n\t\t\r\n\t\t\r\n\t\t// detail\r\n\t\tif(props.match && props.match.params.id)\r\n\t\t{\r\n\t\t\t\r\n\t\t\tlet detail = props.users.detail;\r\n\t\t\tconsole.log(\"detail : \", detail);\r\n\t\t\tif(!unmounted &&  detail && detail.status){\r\n\t\t\t  setDCount(detail.count);\r\n\t\t\t  let data = detail.profile;\r\n\t\t\t  setclassDetail(detail)\r\n\t\t\t\tsetDetail({\r\n\t\t\t\t\t...data,\r\n\t\t\t\t\tusername: data.username,\r\n\t\t\t\t\temail: data.email,\r\n\t\t\t\t\tmobile_number: data.mobile_number,\r\n\t\t\t\t\tisEmailVerified: data.isEmailVerified,\r\n\t\t\t\t\tisMobileVerified: data.isMobileVerified,\r\n\t\t\t\t\troles: data.roles,\r\n\t\t\t\t})\r\n\t\t\t\tform.setFieldsValue({\r\n\t\t\t\t  ['dob']: moment(new Date(data.dob), 'YYYY/MM/DD'),  ['email']: data.email, ['gender']: data.gender, ['name']: data.name, ['phone']: data.phone, ['photo']: data.photo , ['meal']: data.meal ,  \r\n\t\t\t\t});\r\n\r\n\t\t\t\tsetImageUrl(data.photo);\r\n\t\t\t}else if(!unmounted && detail && !detail.status){\r\n\t\t\t  setBtnDis(false);\r\n\t\t\t  setDCount(detail.count);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn () => {unmounted = true;\t}\r\n\r\n    },[props.users])\r\n\t\r\n\tconst cancelFun = ()=>{\r\n\t\tform.resetFields();\r\n\t\tsetImageUrl('');\r\n\t\tprops.history.push('/students');\r\n\t}\r\n\r\n\r\n\tconst onStreamChange = (e) => {\r\n\t\tconst year_list = [...new Map(this.state.listData && this.state.listData.filter((item) => item.streamInfo[0]._id === e).map((item) => [item[\"year\"], item])).values(),];\r\n\t\tthis.setState({ year_list: year_list, setStream: e ,listData : year_list })\t\r\n\t}\r\n\r\n\tconst onYearChange = (e) => {\r\n\t\tconst class_list = [...new Map(this.state.listData && this.state.listData.filter((item) => item.year === e && item.stream_id === this.state.setStream).map((item) => [item[\"class\"], item])).values(),];\r\n\t\tthis.setState({ class_list: class_list, setYear: e })\r\n\r\n\t}\r\n\t\r\nreturn (\r\n\t<> \r\n\t<Card title={<span><LeftOutlined onClick={()=> props.history.push('/students')}/> User Details</span>} style={{marginTop:\"0\"}}>\r\n\t<Row gutter={15} className='mb-4'>\r\n\t\t\t\t<Col flex=\"auto\">\r\n\t\t\t\t\t\t<Row gutter={100}>\r\n\t\t\t\t\t\t<Col sm={12} md={12}>\r\n\t\t\t\t\t\t<h4><span class=\"label label-default\">Profile Image</span></h4>\r\n\t\t\t\t\t\t<Avatar shape=\"round\" size={160} src={detail.avatar} style={{marginBottom: '2px'}} />\r\n\r\n\t\t\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t\t\t<Col sm={12} md={12}>\r\n\t\t\t\t\t\t\t<h4><span class=\"label label-default\">ID Card</span></h4>\r\n\r\n\r\n\t\t\t\t\t\t\t<Avatar shape=\"square\" size={160} src={detail.id_card} style={{marginBottom: '2px'}} />\r\n\r\n\t\t\t\t\t\t\t</Col>\r\n                           \r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\r\n\t{/* <Avatar shape=\"round\" size={160} src={detail.avatar} style={{marginBottom: '2px'}} />\r\n\t<Avatar shape=\"square\" size={160} src={detail.id_card} style={{marginBottom: '2px'}} /> */}\r\n\r\n\t\t<Descriptions size={'middle'} bordered>\t\t\t\t\t\r\n          <Descriptions.Item label=\"Name\">{detail.username}</Descriptions.Item>\r\n\t\t  <Descriptions.Item label=\"Email\">{detail.email}</Descriptions.Item>\r\n\t\t  <Descriptions.Item label=\"Is Email Verified\">{detail.isEmailVerified ? 'true' : 'false'}</Descriptions.Item>\r\n\t\t  <Descriptions.Item label=\"Role\">{detail.roles}</Descriptions.Item>\r\n          <Descriptions.Item label=\"Profile Created On\">{moment(detail.create).format(dateFormat)}</Descriptions.Item>\r\n\t\t  <Descriptions.Item label=\"DOB\">{detail.dob}</Descriptions.Item>\r\n\t\t  <Descriptions.Item label=\"Mobile No\">{detail.mobile_number}</Descriptions.Item>\r\n\r\n\r\n\t\t  \r\n        </Descriptions>\r\n\t</Card>\r\n\r\n\t<Card title={<span> Meal Details</span>} style={{marginTop:\"30px\"}}>\r\n\t<Form {...formItemLayout} form={form} name=\"loc_info\" layout=\"vertical\" onFinish={onFinish} className=\"innerFields\">\r\n\r\n\t\t\t\t<Row gutter={15}>\r\n\t\t\t\t<Col flex=\"auto\">\r\n\t\t\t\t\t\t<Row gutter={15}>\r\n\t\t\t\t\t\t<Col sm={12} md={12}>\r\n\t\t\t\t\t\t\t\t<Form.Item name=\"meal\" label=\"Meal\"    rules={[{ required: true, message: 'This field is required.' } ,\r\n\t\t  ({ getFieldValue }) => ({\r\n\t\t\tvalidator(rule, value) {\r\n\t\t\t  if (!value) {\r\n\t\t\t\treturn Promise.reject('');\r\n\t\t\t  }\r\n\t\t\t  if (value > 999) {\r\n\t\t\t\t  return Promise.reject('meal can not be greater than 999');\r\n\t\t\t\t}\r\n\t\t\t\treturn Promise.resolve();\r\n  \r\n\t\t\t},\r\n\t\t  }),\r\n\t\t  \r\n          ]}  >\r\n\t\t\t\t\t\t\t\t<InputNumber type={'number'} placeholder=\"Enter Meal\"\r\n         \r\n           \r\n           \r\n\t\t />\r\n\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</Col>\r\n                           \r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\r\n\t\t\t\t\r\n\t\t\r\n\t\t\t\t<Form.Item className=\"mb-0\">\r\n\t\t\t\t\t\r\n\t\t\t\t<Button type=\"primary\" disabled={btnDis} className=\"btn-w25 btn-primary-light\" onClick={() => form.submit()}>Update Meal</Button>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t</Form>\r\n\t</Card>\r\n\t\r\n\r\n\t<Card title={<span> Class Details</span>} style={{marginTop:\"30px\"}}>\r\n\t<Form {...formItemLayout} form={form2} name=\"loc_info\" layout=\"vertical\" onFinish={onFinishClass} className=\"innerFields\">\r\n\r\n\t\t\t\t{/* <Row gutter={15}>\r\n\t\t\t\t<Col flex=\"auto\">\r\n\t\t\t\t\t\t<Row gutter={15}>\r\n\t\t\t\t\t\t<Col sm={8} md={8}>\r\n\t\t\t\t\t\t<Form.Item name=\"stream_id\" label=\"Stream Name\"   >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Select placeholder=\"Select Stream\" onChange={(e) => onStreamChange(e)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.state.stream_list && this.state.stream_list.map((item, index) => {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn <Select.Option key={index} value={item?.streamInfo[0]?._id}>{item?.streamInfo[0]?.name}</Select.Option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Select>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t\t\t<Col sm={8} md={8}>\r\n\t\t\t\t\t\t\t<Form.Item name=\"year\" label=\"Year\"   >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Select placeholder=\"Select Year\" onChange={(e) => onYearChange(e)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.state.year_list && this.state.year_list.map((item, index) => <Select.Option key={index} value={item?.year}>{item?.year}</Select.Option>)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t\t\t<Col sm={8} md={8}>\r\n\t\t\t\t\t\t\t<Form.Item name=\"class_name\" label=\"Class\" >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Select placeholder=\"Select Class\" >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.state.class_list && this.state.class_list.map((item, index) => <Select.Option key={index} value={item?.class}>{item?.class}</Select.Option>)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</Col>\r\n                           \r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row> */}\r\n\r\n\t\t\t\t\r\n\t\t\r\n\t\t\t\t<Form.Item className=\"mb-0\">\r\n\t\t\t\t\t\r\n\t\t\t\t<Button type=\"primary\" disabled={btnDis} className=\"btn-w25 btn-primary-light\" onClick={() => form2.submit()}>Update Section</Button>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t</Form>\r\n\t</Card> \r\n\r\n\t<Card title={<span> School Details</span>} style={{marginTop:\"30px\" ,marginBottom:\"30px\"}}>\r\n     \t\t<Descriptions size={'middle'} bordered>\t\t\t\t\t\t\r\n          <Descriptions.Item label=\"School Name\">{detail.schoolDetail?.school_name}</Descriptions.Item><br />\r\n\t\t  <Descriptions.Item label=\"School Address\">{detail.schoolDetail?.address}</Descriptions.Item>\r\n\r\n\r\n\t\t  \r\n        </Descriptions>\r\n\t <Avatar shape=\"square\" size={160} src={detail.schoolDetail?.media} style={{marginBottom: '2px'}} />\r\n\r\n\t</Card>\r\n\r\n\t\r\n\r\n\t\r\n\t</>\r\n\r\n\t\r\n\r\n)};\r\n\r\nexport default connect(({ users, global, loading }) => ({\r\n  users:users,\r\n  global: global\r\n}))(AddEditStudent);"]},"metadata":{},"sourceType":"module"}