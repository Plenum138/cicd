{"ast":null,"code":"import _defineProperty from\"/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef,Fragment}from'react';import{Empty,Modal,Form,Input,Button,Switch,Upload,Dropdown,Menu,Select,notification,Transfer,DatePicker}from'antd';import{connect}from'dva';var formItemLayout={labelCol:{xs:{span:24},sm:{span:24}}};var AddEdit=function AddEdit(props){var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var dispatch=props.dispatch;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),catlist=_useState2[0],setCatlist=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),count=_useState4[0],setCount=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),dcount=_useState6[0],setDCount=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),btnDis=_useState8[0],setBtnDis=_useState8[1];useEffect(function(){var unmounted=false;return function(){unmounted=true;};},[dispatch]);useEffect(function(){var unmounted=false;var data=props.detail;if(props.detail){form.setFieldsValue(_defineProperty({},'roles',data.roles));}else{form.resetFields();}return function(){unmounted=true;};},[props.visible]);useEffect(function(){var unmounted=false;var roles=props.roles;setCatlist(roles.list?roles.list.data:[]);return function(){unmounted=true;};},[props.roles.list]);var onFinish=function onFinish(val){setBtnDis(true);if(props.detail){val._id=props.detail._id;dispatch({type:'roles/roleEdit',payload:val});}else{dispatch({type:'roles/roleAdd',payload:val});}};useEffect(function(){var unmounted=false;var add=props.roles.add;if(!unmounted&&add.count>count&&add.status){setBtnDis(false);setCount(add.count);props.returnData('success');}else if(!unmounted&&add.count>count&&!add.status){setBtnDis(false);setCount(add.count);}// Edit\nvar edit=props.roles.edit;if(!unmounted&&edit.count>dcount&&edit.status){setBtnDis(false);setDCount(edit.count);props.returnData('success');}else if(!unmounted&&edit.count>dcount&&!edit.status){setBtnDis(false);setDCount(edit.count);}return function(){unmounted=true;};},[props.roles]);var cancelFun=function cancelFun(){if(!props.detail)form.resetFields();props.closeModel();};return/*#__PURE__*/React.createElement(Modal,{visible:props.visible,title:props.detail?'Edit Role':'Add Role',onCancel:cancelFun,footer:/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(Button,{onClick:cancelFun},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{type:\"primary\",disabled:btnDis,className:\"btn-w25 btn-primary-light\",onClick:function onClick(){return form.submit();}},props.detail?'Edit Role':'Add Role'))},/*#__PURE__*/React.createElement(Form,Object.assign({},formItemLayout,{form:form,name:\"loc_info\",layout:\"vertical\",onFinish:onFinish,className:\"innerFields\"}),/*#__PURE__*/React.createElement(Form.Item,{name:\"roles\",rules:[{required:true,message:'This field is required!'}]},/*#__PURE__*/React.createElement(Input,{placeholder:\"Enter Role\"}))));};export default connect(function(_ref){var roles=_ref.roles,global=_ref.global,loading=_ref.loading;return{roles:roles,global:global,loading:loading};})(AddEdit);","map":{"version":3,"sources":["/Users/kalyansingh/Desktop/Project/vivaquad/admin-backend/admin-vivaquad/src/pages/roles/action/addEdit.jsx"],"names":["React","useState","useEffect","useRef","Fragment","Empty","Modal","Form","Input","Button","Switch","Upload","Dropdown","Menu","Select","notification","Transfer","DatePicker","connect","formItemLayout","labelCol","xs","span","sm","AddEdit","props","useForm","form","dispatch","catlist","setCatlist","count","setCount","dcount","setDCount","btnDis","setBtnDis","unmounted","data","detail","setFieldsValue","roles","resetFields","visible","list","onFinish","val","_id","type","payload","add","status","returnData","edit","cancelFun","closeModel","submit","required","message","global","loading"],"mappings":"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","sourcesContent":["import React, { useState,useEffect,useRef, Fragment} from 'react';\r\nimport {Empty, Modal,Form,Input,Button,Switch, Upload, Dropdown, Menu, Select, notification, Transfer, DatePicker } from 'antd';\r\n\r\nimport { connect } from 'dva';\r\n\r\nconst formItemLayout = { labelCol: {xs: { span: 24, },  sm: { span: 24, },}};\r\n\r\nconst AddEdit =props => {\r\n\tconst [form] = Form.useForm();\r\n\tconst { dispatch} = props;\r\n\tconst [catlist, setCatlist] = useState([])\r\n\tconst [count, setCount] = useState(0)\r\n\tconst [dcount, setDCount] = useState(0)\r\n\tconst [btnDis, setBtnDis] = useState(false)\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\treturn () => {unmounted = true;}\r\n    },[dispatch])\r\n\t\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\r\n\t\tlet data = props.detail;\t\t\r\n\t\tif(props.detail){\r\n\t\t\tform.setFieldsValue({\r\n\t\t\t  ['roles']: data.roles, \r\n\t\t\t});}\r\n\t\telse{ form.resetFields(); }\r\n\t\t\r\n\t\treturn () => {unmounted = true;}\r\n    },[props.visible])\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\tlet {roles} = props;\r\n\t\tsetCatlist(roles.list ? roles.list.data:[]);\r\n\t\treturn () => {unmounted = true;}\r\n    },[props.roles.list])\r\n\t\r\n\tconst onFinish= val=>{\r\n\r\n\r\n\t\t\r\n\t\tsetBtnDis(true);\r\n\t\tif(props.detail){\r\n\t\t\tval._id = props.detail._id\r\n\t\t\tdispatch({type: 'roles/roleEdit',  payload: val,});\r\n\t\t}\r\n\t\telse{\r\n\t\t\t\r\n\t\t\tdispatch({type: 'roles/roleAdd',  payload: val,});\r\n\t\t}\r\n\t}\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\tlet add = props.roles.add\r\n\t\tif(!unmounted && add.count > count && add.status){\r\n\t\t\tsetBtnDis(false);\r\n\t\t  setCount(add.count);\t\t  \r\n\t\t  props.returnData('success');\r\n\t\t}else if(!unmounted && add.count > count && !add.status){\r\n\t\t  setBtnDis(false);\r\n\t\t  setCount(add.count);\r\n\t\t}\r\n\t\t\r\n\t\t// Edit\r\n\t\tlet edit = props.roles.edit\r\n\t\tif(!unmounted && edit.count > dcount && edit.status){\r\n\t\t  setBtnDis(false);\r\n\t\t  setDCount(edit.count);\r\n\t\t  \r\n\t\t  props.returnData('success');\r\n\t\t}else if(!unmounted && edit.count > dcount && !edit.status){\r\n\t\t  setBtnDis(false);\r\n\t\t  setDCount(edit.count);\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\tunmounted = true;\r\n\t\t}\r\n\t},[props.roles])\r\n\t\r\n\tconst cancelFun = ()=>{\r\n\t\tif(!props.detail)\r\n\t\t\tform.resetFields();\r\n\t\tprops.closeModel()\r\n\t}\r\n\r\n\t\r\nreturn (\r\n\t<Modal visible={props.visible} title={props.detail?'Edit Role':'Add Role'} onCancel={cancelFun} footer={<Fragment>\r\n\t\t\t\t<Button onClick={cancelFun}>Cancel</Button>\r\n\t\t\t\t<Button type=\"primary\" disabled={btnDis} className=\"btn-w25 btn-primary-light\" onClick={()=>form.submit()}>{props.detail?'Edit Role':'Add Role'}</Button>\r\n\t\t\t</Fragment>} >\r\n\t\t<Form {...formItemLayout} form={form} name=\"loc_info\" layout=\"vertical\" onFinish={onFinish} className=\"innerFields\">\r\n\t\t\t<Form.Item name=\"roles\"  rules={[{ required: true, message: 'This field is required!' }]} >\r\n\t\t\t\t<Input placeholder=\"Enter Role\" />\r\n\t\t\t</Form.Item>\r\n\t\t</Form>\r\n\t\t\r\n\t</Modal>\r\n)};\r\n\r\nexport default connect(({ roles, global, loading }) => ({\r\n  roles:roles,\r\n  global: global,\r\n  loading: loading \r\n}))(AddEdit);"]},"metadata":{},"sourceType":"module"}